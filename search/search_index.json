{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"healthcheckx","text":"<p>Production-grade health checks for Python applications</p> <p> </p>"},{"location":"#overview","title":"Overview","text":"<p>healthcheckx is a comprehensive health check library designed for production Python applications. It provides a simple, extensible framework for monitoring the health of various services and components in your application.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>\ud83d\udd0c Framework Agnostic - Core library works independently, with optional adapters for FastAPI, Flask, and Django</li> <li>\ud83c\udfaf Built-in Health Checks - Pre-built checks for popular services:</li> <li>Cache: Redis, KeyDB, Memcached</li> <li>Message Queues: RabbitMQ</li> <li>Relational Databases: PostgreSQL, MySQL, SQLite, Oracle, MS SQL Server</li> <li>NoSQL Databases: MongoDB</li> <li>\u26a1 Simple &amp; Extensible - Easy to add custom health checks with a clean API</li> <li>\ud83c\udff7\ufe0f Named Checks - Support for multiple instances of the same service with custom names</li> <li>\ud83c\udfad Graceful Degradation - Distinguishes between healthy, degraded, and unhealthy states</li> <li>\u23f1\ufe0f Performance Tracking - Measures execution time for each health check</li> <li>\ud83d\udee1\ufe0f Error Handling - Catches exceptions gracefully and returns meaningful status</li> <li>\ud83d\udd27 Configurable Timeouts - Non-blocking checks with configurable timeouts</li> <li>\ud83d\udce6 Optional Dependencies - Install only what you need</li> </ul>"},{"location":"#quick-example","title":"Quick Example","text":"<pre><code>from healthcheckx import Health\n\n# Create health check instance\nhealth = Health()\n\n# Register checks (method chaining supported)\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://user:pass@localhost/db\") \\\n      .mongodb_check(\"mongodb://localhost:27017\")\n\n# Run all checks\nresults = health.run()\n\n# Inspect results\nfor result in results:\n    print(f\"{result.name}: {result.status} ({result.duration_ms:.2f}ms)\")\n</code></pre>"},{"location":"#installation","title":"Installation","text":"<pre><code># Basic installation\npip install healthcheckx\n\n# With specific service support\npip install healthcheckx[redis]\npip install healthcheckx[postgresql]\n\n# Install all supported services\npip install healthcheckx[all]\n</code></pre>"},{"location":"#health-status-levels","title":"Health Status Levels","text":"<p>healthcheckx supports three levels of health status:</p> <ul> <li><code>healthy</code> - Service is functioning normally</li> <li><code>degraded</code> - Service is operational but impaired</li> <li><code>unhealthy</code> - Service is down or failing</li> </ul>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Installation Guide - Detailed installation instructions</li> <li>Quick Start - Get started in minutes</li> <li>Built-in Checks - Explore available health checks</li> <li>Framework Integration - Integrate with your framework</li> <li>Custom Checks - Create your own health checks</li> <li>API Reference - Complete API documentation</li> </ul>"},{"location":"#contributing","title":"Contributing","text":"<p>Contributions are welcome! Please feel free to submit a Pull Request.</p>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the MIT License.</p>"},{"location":"#author","title":"Author","text":"<p>Soumen Samanta</p> <ul> <li>GitHub: @Soumen3</li> <li>Repository: healthcheckx</li> </ul>"},{"location":"api-reference/","title":"API Reference","text":"<p>Complete API documentation for healthcheckx.</p>"},{"location":"api-reference/#core-classes","title":"Core Classes","text":""},{"location":"api-reference/#health","title":"<code>Health</code>","text":"<p>Main health check orchestrator.</p> <pre><code>class Health:\n    \"\"\"\n    Main health check orchestrator for monitoring service dependencies.\n\n    The Health class provides a fluent API for registering and executing health checks\n    across various services. It supports method chaining for convenient configuration.\n    \"\"\"\n</code></pre>"},{"location":"api-reference/#methods","title":"Methods","text":""},{"location":"api-reference/#registercheck-healthcheck-health","title":"<code>register(check: HealthCheck) -&gt; Health</code>","text":"<p>Register a custom health check function.</p> <p>Parameters: - <code>check</code> (HealthCheck): A callable that returns <code>CheckResult</code></p> <p>Returns: - <code>Health</code>: Self for method chaining</p> <p>Example: <pre><code>def custom_check():\n    return CheckResult(\"my-service\", HealthStatus.healthy)\n\nhealth = Health()\nhealth.register(custom_check)\n</code></pre></p>"},{"location":"api-reference/#run-listcheckresult","title":"<code>run() -&gt; List[CheckResult]</code>","text":"<p>Execute all registered health checks.</p> <p>Returns: - <code>List[CheckResult]</code>: Results from all checks</p> <p>Example: <pre><code>results = health.run()\nfor result in results:\n    print(f\"{result.name}: {result.status}\")\n</code></pre></p>"},{"location":"api-reference/#cache-check-methods","title":"Cache Check Methods","text":""},{"location":"api-reference/#redis_checkredis_url-str-timeout-int-2-name-str-redis-health","title":"<code>redis_check(redis_url: str, timeout: int = 2, name: str = \"redis\") -&gt; Health</code>","text":"<p>Register a Redis health check.</p> <p>Parameters: - <code>redis_url</code> (str): Redis connection URL (e.g., \"redis://localhost:6379\") - <code>timeout</code> (int, optional): Connection timeout in seconds. Default: 2 - <code>name</code> (str, optional): Custom name for the check. Default: \"redis\"</p> <p>Example: <pre><code>health.redis_check(\"redis://localhost:6379\", timeout=3, name=\"redis-cache\")\n</code></pre></p>"},{"location":"api-reference/#keydb_checkkeydb_url-str-timeout-int-2-name-str-keydb-health","title":"<code>keydb_check(keydb_url: str, timeout: int = 2, name: str = \"keydb\") -&gt; Health</code>","text":"<p>Register a KeyDB health check.</p> <p>Parameters: - <code>keydb_url</code> (str): KeyDB connection URL (e.g., \"keydb://localhost:6379\") - <code>timeout</code> (int, optional): Connection timeout in seconds. Default: 2 - <code>name</code> (str, optional): Custom name for the check. Default: \"keydb\"</p>"},{"location":"api-reference/#memcached_checkhost-str-localhost-port-int-11211-timeout-int-2-name-str-memcached-health","title":"<code>memcached_check(host: str = \"localhost\", port: int = 11211, timeout: int = 2, name: str = \"memcached\") -&gt; Health</code>","text":"<p>Register a Memcached health check.</p> <p>Parameters: - <code>host</code> (str, optional): Memcached server host. Default: \"localhost\" - <code>port</code> (int, optional): Memcached server port. Default: 11211 - <code>timeout</code> (int, optional): Connection timeout in seconds. Default: 2 - <code>name</code> (str, optional): Custom name for the check. Default: \"memcached\"</p>"},{"location":"api-reference/#message-queue-check-methods","title":"Message Queue Check Methods","text":""},{"location":"api-reference/#rabbitmq_checkamqp_url-str-timeout-int-2-name-str-rabbitmq-health","title":"<code>rabbitmq_check(amqp_url: str, timeout: int = 2, name: str = \"rabbitmq\") -&gt; Health</code>","text":"<p>Register a RabbitMQ health check.</p> <p>Parameters: - <code>amqp_url</code> (str): AMQP connection URL (e.g., \"amqp://guest:guest@localhost:5672\") - <code>timeout</code> (int, optional): Connection timeout in seconds. Default: 2 - <code>name</code> (str, optional): Custom name for the check. Default: \"rabbitmq\"</p>"},{"location":"api-reference/#relational-database-check-methods","title":"Relational Database Check Methods","text":""},{"location":"api-reference/#postgresql_checkdsn-str-timeout-int-3-name-str-postgresql-health","title":"<code>postgresql_check(dsn: str, timeout: int = 3, name: str = \"postgresql\") -&gt; Health</code>","text":"<p>Register a PostgreSQL health check.</p> <p>Parameters: - <code>dsn</code> (str): PostgreSQL connection string (e.g., \"postgresql://user:pass@localhost/db\") - <code>timeout</code> (int, optional): Connection timeout in seconds. Default: 3 - <code>name</code> (str, optional): Custom name for the check. Default: \"postgresql\"</p>"},{"location":"api-reference/#mysql_checkdsn-str-timeout-int-3-name-str-mysql-health","title":"<code>mysql_check(dsn: str, timeout: int = 3, name: str = \"mysql\") -&gt; Health</code>","text":"<p>Register a MySQL health check.</p> <p>Parameters: - <code>dsn</code> (str): MySQL connection string (e.g., \"mysql://user:pass@localhost:3306/db\") - <code>timeout</code> (int, optional): Connection timeout in seconds. Default: 3 - <code>name</code> (str, optional): Custom name for the check. Default: \"mysql\"</p>"},{"location":"api-reference/#sqlite_checkdb_path-str-timeout-int-3-name-str-sqlite-health","title":"<code>sqlite_check(db_path: str, timeout: int = 3, name: str = \"sqlite\") -&gt; Health</code>","text":"<p>Register a SQLite health check.</p> <p>Parameters: - <code>db_path</code> (str): Path to SQLite database file (e.g., \"/path/to/db.db\" or \":memory:\") - <code>timeout</code> (int, optional): Connection timeout in seconds. Default: 3 - <code>name</code> (str, optional): Custom name for the check. Default: \"sqlite\"</p>"},{"location":"api-reference/#oracle_checkdsn-str-timeout-int-3-name-str-oracle-health","title":"<code>oracle_check(dsn: str, timeout: int = 3, name: str = \"oracle\") -&gt; Health</code>","text":"<p>Register an Oracle health check.</p> <p>Parameters: - <code>dsn</code> (str): Oracle connection string (e.g., \"oracle://user:pass@localhost:1521/service\") - <code>timeout</code> (int, optional): Connection timeout in seconds. Default: 3 - <code>name</code> (str, optional): Custom name for the check. Default: \"oracle\"</p>"},{"location":"api-reference/#mssql_checkdsn-str-timeout-int-3-name-str-mssql-health","title":"<code>mssql_check(dsn: str, timeout: int = 3, name: str = \"mssql\") -&gt; Health</code>","text":"<p>Register a MS SQL Server health check.</p> <p>Parameters: - <code>dsn</code> (str): MS SQL connection string (e.g., \"mssql://user:pass@localhost:1433/db\") - <code>timeout</code> (int, optional): Connection timeout in seconds. Default: 3 - <code>name</code> (str, optional): Custom name for the check. Default: \"mssql\"</p>"},{"location":"api-reference/#nosql-database-check-methods","title":"NoSQL Database Check Methods","text":""},{"location":"api-reference/#mongodb_checkconnection_string-str-timeout-int-3-name-str-mongodb-health","title":"<code>mongodb_check(connection_string: str, timeout: int = 3, name: str = \"mongodb\") -&gt; Health</code>","text":"<p>Register a MongoDB health check.</p> <p>Parameters: - <code>connection_string</code> (str): MongoDB connection string (e.g., \"mongodb://localhost:27017\") - <code>timeout</code> (int, optional): Connection timeout in seconds. Default: 3 - <code>name</code> (str, optional): Custom name for the check. Default: \"mongodb\"</p>"},{"location":"api-reference/#data-classes","title":"Data Classes","text":""},{"location":"api-reference/#checkresult","title":"<code>CheckResult</code>","text":"<p>Contains the result of a health check.</p> <pre><code>@dataclass\nclass CheckResult:\n    name: str                      # Name/identifier of the check\n    status: HealthStatus          # Health status\n    message: Optional[str] = None # Optional error/status message\n    duration_ms: Optional[float] = None  # Execution time in milliseconds\n</code></pre> <p>Attributes: - <code>name</code> (str): Unique identifier for the health check - <code>status</code> (HealthStatus): The health status (healthy/degraded/unhealthy) - <code>message</code> (Optional[str]): Additional information, typically error messages - <code>duration_ms</code> (Optional[float]): How long the check took to execute</p> <p>Example: <pre><code>result = CheckResult(\n    name=\"redis\",\n    status=HealthStatus.healthy,\n    message=None,\n    duration_ms=12.5\n)\n</code></pre></p>"},{"location":"api-reference/#enums","title":"Enums","text":""},{"location":"api-reference/#healthstatus","title":"<code>HealthStatus</code>","text":"<p>Enumeration of possible health states.</p> <pre><code>class HealthStatus(str, Enum):\n    healthy = \"healthy\"      # Service is functioning normally\n    degraded = \"degraded\"    # Service is operational but impaired\n    unhealthy = \"unhealthy\"  # Service is down or failing\n</code></pre> <p>Values: - <code>healthy</code>: Service is functioning normally - <code>degraded</code>: Service is operational but with reduced functionality - <code>unhealthy</code>: Service is completely down or failing</p> <p>Example: <pre><code>from healthcheckx import HealthStatus\n\nif result.status == HealthStatus.healthy:\n    print(\"All systems operational\")\nelif result.status == HealthStatus.degraded:\n    print(\"Service degraded\")\nelse:\n    print(\"Service down\")\n</code></pre></p>"},{"location":"api-reference/#functions","title":"Functions","text":""},{"location":"api-reference/#overall_statusresults-listcheckresult-healthstatus","title":"<code>overall_status(results: List[CheckResult]) -&gt; HealthStatus</code>","text":"<p>Determine overall health status from multiple check results.</p> <p>Parameters: - <code>results</code> (List[CheckResult]): List of check results</p> <p>Returns: - <code>HealthStatus</code>: Aggregated status</p> <p>Logic: - If ANY check is <code>unhealthy</code> \u2192 Returns <code>unhealthy</code> - Else if ANY check is <code>degraded</code> \u2192 Returns <code>degraded</code> - Else \u2192 Returns <code>healthy</code></p> <p>Example: <pre><code>from healthcheckx import Health, overall_status\n\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\")\nhealth.postgresql_check(\"postgresql://localhost/db\")\n\nresults = health.run()\nstatus = overall_status(results)\n\nprint(f\"Overall Status: {status}\")\n</code></pre></p>"},{"location":"api-reference/#type-aliases","title":"Type Aliases","text":""},{"location":"api-reference/#healthcheck","title":"<code>HealthCheck</code>","text":"<p>Type alias for health check callables.</p> <pre><code>HealthCheck = Callable[[], CheckResult]\n</code></pre> <p>A health check is any callable that takes no parameters and returns a <code>CheckResult</code>.</p> <p>Example: <pre><code>def my_check() -&gt; CheckResult:\n    return CheckResult(\"my-service\", HealthStatus.healthy)\n\n# my_check matches the HealthCheck type\n</code></pre></p>"},{"location":"api-reference/#framework-adapters","title":"Framework Adapters","text":""},{"location":"api-reference/#fastapiadapter","title":"<code>FastAPIAdapter</code>","text":"<p>Adapter for integrating with FastAPI applications.</p> <pre><code>from healthcheckx import Health, FastAPIAdapter\n\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\")\n\nadapter = FastAPIAdapter(health)\napp.get(\"/health\")(adapter.endpoint)\n</code></pre> <p>HTTP Response: - Status Code: 200 (healthy/degraded) or 503 (unhealthy) - Content-Type: application/json</p>"},{"location":"api-reference/#flask_health_endpointhealth-health","title":"<code>flask_health_endpoint(health: Health)</code>","text":"<p>Create a Flask view function for health checks.</p> <pre><code>from healthcheckx import Health, flask_health_endpoint\n\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\")\n\napp.route(\"/health\")(flask_health_endpoint(health))\n</code></pre>"},{"location":"api-reference/#django_health_viewhealth-health","title":"<code>django_health_view(health: Health)</code>","text":"<p>Create a Django view function for health checks.</p> <pre><code>from healthcheckx import Health, django_health_view\n\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\")\n\nurlpatterns = [\n    path('health/', django_health_view(health)),\n]\n</code></pre>"},{"location":"api-reference/#constants","title":"Constants","text":""},{"location":"api-reference/#version","title":"Version","text":"<pre><code>import healthcheckx\nprint(healthcheckx.__version__)  # e.g., \"0.1.2\"\n</code></pre>"},{"location":"api-reference/#complete-example","title":"Complete Example","text":"<pre><code>from healthcheckx import (\n    Health,\n    CheckResult,\n    HealthStatus,\n    overall_status\n)\n\n# Create health instance\nhealth = Health()\n\n# Register multiple checks\nhealth.redis_check(\"redis://localhost:6379\", timeout=2, name=\"redis-cache\") \\\n      .postgresql_check(\"postgresql://user:pass@localhost/db\", timeout=3) \\\n      .mongodb_check(\"mongodb://localhost:27017\", timeout=3)\n\n# Custom check\ndef api_check() -&gt; CheckResult:\n    try:\n        # Your check logic\n        return CheckResult(\"external-api\", HealthStatus.healthy)\n    except Exception as e:\n        return CheckResult(\"external-api\", HealthStatus.unhealthy, str(e))\n\nhealth.register(api_check)\n\n# Execute all checks\nresults = health.run()\n\n# Get overall status\nstatus = overall_status(results)\n\n# Process results\nfor result in results:\n    print(f\"{result.name}: {result.status} ({result.duration_ms:.2f}ms)\")\n    if result.message:\n        print(f\"  Message: {result.message}\")\n\nprint(f\"\\nOverall: {status}\")\n</code></pre>"},{"location":"api-reference/#see-also","title":"See Also","text":"<ul> <li>Quick Start Guide</li> <li>Built-in Checks</li> <li>Custom Checks</li> <li>Examples</li> </ul>"},{"location":"examples/","title":"Examples","text":"<p>Complete, working examples demonstrating healthcheckx in various scenarios.</p>"},{"location":"examples/#quick-start-example","title":"Quick Start Example","text":"<p>The simplest possible health check:</p> <pre><code>from healthcheckx import Health\n\n# Create health check instance\nhealth = Health()\n\n# Add checks\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://localhost/mydb\")\n\n# Run checks\nresults = health.run()\n\n# Print results\nfor result in results:\n    print(f\"{result.name}: {result.status.value}\")\n</code></pre>"},{"location":"examples/#web-application-examples","title":"Web Application Examples","text":""},{"location":"examples/#fastapi-application","title":"FastAPI Application","text":"<p>Complete FastAPI application with health checks:</p> <pre><code>from fastapi import FastAPI\nfrom healthcheckx import Health, FastAPIAdapter\nimport os\n\napp = FastAPI(title=\"My API\", version=\"1.0.0\")\n\n# Initialize health checks\nhealth = Health()\n\n# Register checks from environment\nhealth.postgresql_check(\n    os.getenv(\"DATABASE_URL\", \"postgresql://localhost/mydb\"),\n    name=\"database\"\n)\n\nhealth.redis_check(\n    os.getenv(\"REDIS_URL\", \"redis://localhost:6379\"),\n    name=\"cache\"\n)\n\nhealth.rabbitmq_check(\n    os.getenv(\"RABBITMQ_URL\", \"amqp://localhost:5672\"),\n    name=\"message-queue\"\n)\n\n# Create adapter and add endpoint\nadapter = FastAPIAdapter(health)\n\n@app.get(\"/health\", tags=[\"monitoring\"])\nasync def health_check():\n    \"\"\"Health check endpoint for all services\"\"\"\n    return await adapter.endpoint()\n\n@app.get(\"/healthz\", tags=[\"monitoring\"])\nasync def liveness():\n    \"\"\"Liveness probe - always returns OK\"\"\"\n    return {\"status\": \"ok\"}\n\n@app.get(\"/ready\", tags=[\"monitoring\"])\nasync def readiness():\n    \"\"\"Readiness probe - checks all dependencies\"\"\"\n    return await adapter.endpoint()\n\n# Application endpoints\n@app.get(\"/\")\ndef read_root():\n    return {\"message\": \"Welcome to My API\"}\n\n@app.get(\"/api/items\")\ndef get_items():\n    # Your business logic\n    return {\"items\": []}\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre> <p>Run with: <pre><code>uvicorn main:app --reload\n</code></pre></p>"},{"location":"examples/#flask-application","title":"Flask Application","text":"<p>Complete Flask application with health checks:</p> <pre><code>from flask import Flask, jsonify\nfrom healthcheckx import Health, flask_health_endpoint\nimport os\n\napp = Flask(__name__)\n\n# Initialize health checks\nhealth = Health()\n\nhealth.postgresql_check(\n    os.getenv(\"DATABASE_URL\", \"postgresql://localhost/mydb\"),\n    name=\"database\"\n)\n\nhealth.redis_check(\n    os.getenv(\"REDIS_URL\", \"redis://localhost:6379\"),\n    name=\"cache\"\n)\n\n# Add health endpoint\napp.add_url_rule(\"/health\", \"health\", flask_health_endpoint(health))\n\n@app.route(\"/healthz\")\ndef liveness():\n    \"\"\"Liveness probe\"\"\"\n    return jsonify({\"status\": \"ok\"}), 200\n\n@app.route(\"/ready\")\ndef readiness():\n    \"\"\"Readiness probe\"\"\"\n    return flask_health_endpoint(health)()\n\n# Application routes\n@app.route(\"/\")\ndef index():\n    return jsonify({\"message\": \"Welcome to My API\"})\n\n@app.route(\"/api/users\")\ndef get_users():\n    # Your business logic\n    return jsonify({\"users\": []})\n\nif __name__ == \"__main__\":\n    app.run(host=\"0.0.0.0\", port=5000, debug=True)\n</code></pre> <p>Run with: <pre><code>python app.py\n</code></pre></p>"},{"location":"examples/#django-application","title":"Django Application","text":"<p>Complete Django setup with health checks:</p> <p>myproject/api/health.py: <pre><code>from healthcheckx import Health\nfrom django.conf import settings\nimport os\n\ndef create_health():\n    health = Health()\n\n    # Database from Django settings\n    db_config = settings.DATABASES['default']\n    if db_config['ENGINE'] == 'django.db.backends.postgresql':\n        db_url = (\n            f\"postgresql://{db_config['USER']}:{db_config['PASSWORD']}\"\n            f\"@{db_config['HOST']}:{db_config['PORT']}/{db_config['NAME']}\"\n        )\n        health.postgresql_check(db_url, name=\"database\")\n\n    # Cache from Django settings\n    cache_config = settings.CACHES['default']\n    if 'redis' in cache_config['BACKEND'].lower():\n        health.redis_check(cache_config['LOCATION'], name=\"cache\")\n\n    # Additional services from environment\n    if rabbitmq_url := os.getenv(\"RABBITMQ_URL\"):\n        health.rabbitmq_check(rabbitmq_url, name=\"message-queue\")\n\n    return health\n\nhealth = create_health()\n</code></pre></p> <p>myproject/api/views.py: <pre><code>from django.http import JsonResponse\nfrom healthcheckx import django_health_view\nfrom .health import health\n\n# Health check views\nhealth_check = django_health_view(health)\n\ndef liveness(request):\n    return JsonResponse({\"status\": \"ok\"})\n\nreadiness = django_health_view(health)\n</code></pre></p> <p>myproject/api/urls.py: <pre><code>from django.urls import path\nfrom . import views\n\napp_name = 'api'\n\nurlpatterns = [\n    path('health/', views.health_check, name='health'),\n    path('healthz/', views.liveness, name='liveness'),\n    path('ready/', views.readiness, name='readiness'),\n]\n</code></pre></p> <p>myproject/urls.py: <pre><code>from django.contrib import admin\nfrom django.urls import path, include\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('', include('api.urls')),\n]\n</code></pre></p>"},{"location":"examples/#microservices-example","title":"Microservices Example","text":"<p>Health checks for a microservices architecture:</p> <pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport requests\nimport os\n\ndef create_microservices_health():\n    health = Health()\n\n    # Shared infrastructure\n    health.postgresql_check(\n        os.getenv(\"DATABASE_URL\"),\n        name=\"postgres-shared\"\n    )\n\n    health.redis_check(\n        os.getenv(\"REDIS_URL\"),\n        name=\"redis-cache\"\n    )\n\n    health.rabbitmq_check(\n        os.getenv(\"RABBITMQ_URL\"),\n        name=\"message-queue\"\n    )\n\n    # Microservice health checks\n    services = [\n        (\"user-service\", \"http://user-service:8001/health\"),\n        (\"order-service\", \"http://order-service:8002/health\"),\n        (\"payment-service\", \"http://payment-service:8003/health\"),\n        (\"notification-service\", \"http://notification-service:8004/health\"),\n    ]\n\n    for service_name, service_url in services:\n        def create_service_check(name, url):\n            def check() -&gt; CheckResult:\n                try:\n                    response = requests.get(url, timeout=2)\n                    if response.status_code == 200:\n                        return CheckResult(name, HealthStatus.healthy)\n                    return CheckResult(\n                        name,\n                        HealthStatus.unhealthy,\n                        f\"HTTP {response.status_code}\"\n                    )\n                except Exception as e:\n                    return CheckResult(name, HealthStatus.unhealthy, str(e))\n            return check\n\n        health.register(create_service_check(service_name, service_url))\n\n    return health\n\n# Use in your API gateway or service mesh\nhealth = create_microservices_health()\n</code></pre>"},{"location":"examples/#multiple-environments-example","title":"Multiple Environments Example","text":"<p>Different configurations for different environments:</p> <pre><code>from healthcheckx import Health\nimport os\n\ndef create_health_for_environment():\n    health = Health()\n    environment = os.getenv(\"ENVIRONMENT\", \"development\")\n\n    if environment == \"development\":\n        # Development: local services\n        health.redis_check(\"redis://localhost:6379\", name=\"redis\")\n        health.postgresql_check(\"postgresql://localhost/mydb_dev\", name=\"database\")\n\n    elif environment == \"staging\":\n        # Staging: cloud services with replicas\n        health.postgresql_check(\n            os.getenv(\"DATABASE_URL\"),\n            name=\"postgres-primary\"\n        )\n        health.postgresql_check(\n            os.getenv(\"DATABASE_REPLICA_URL\"),\n            name=\"postgres-replica\"\n        )\n        health.redis_check(os.getenv(\"REDIS_URL\"), name=\"redis-cache\")\n        health.rabbitmq_check(os.getenv(\"RABBITMQ_URL\"), name=\"rabbitmq\")\n\n    elif environment == \"production\":\n        # Production: full monitoring\n        health.postgresql_check(\n            os.getenv(\"DATABASE_URL\"),\n            name=\"postgres-primary\"\n        )\n        health.postgresql_check(\n            os.getenv(\"DATABASE_REPLICA_URL\"),\n            name=\"postgres-replica\"\n        )\n        health.redis_check(\n            os.getenv(\"REDIS_CACHE_URL\"),\n            name=\"redis-cache\"\n        )\n        health.redis_check(\n            os.getenv(\"REDIS_SESSION_URL\"),\n            name=\"redis-sessions\"\n        )\n        health.rabbitmq_check(os.getenv(\"RABBITMQ_URL\"), name=\"rabbitmq\")\n        health.mongodb_check(os.getenv(\"MONGODB_URL\"), name=\"mongodb\")\n\n    return health\n\nhealth = create_health_for_environment()\n</code></pre>"},{"location":"examples/#custom-health-check-example","title":"Custom Health Check Example","text":"<p>Custom health check for external API:</p> <pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport requests\n\nhealth = Health()\n\n# Built-in checks\nhealth.redis_check(\"redis://localhost:6379\", name=\"redis\")\nhealth.postgresql_check(\"postgresql://localhost/mydb\", name=\"database\")\n\n# Custom external API check\ndef payment_gateway_check() -&gt; CheckResult:\n    \"\"\"Check payment gateway availability\"\"\"\n    try:\n        response = requests.get(\n            \"https://api.stripe.com/v1/charges\",\n            headers={\n                \"Authorization\": f\"Bearer {os.getenv('STRIPE_SECRET_KEY')}\"\n            },\n            timeout=3\n        )\n\n        if response.status_code in [200, 401]:  # 401 means API is up\n            return CheckResult(\"payment-gateway\", HealthStatus.healthy)\n        else:\n            return CheckResult(\n                \"payment-gateway\",\n                HealthStatus.unhealthy,\n                f\"HTTP {response.status_code}\"\n            )\n    except requests.Timeout:\n        return CheckResult(\n            \"payment-gateway\",\n            HealthStatus.unhealthy,\n            \"Request timeout\"\n        )\n    except Exception as e:\n        return CheckResult(\"payment-gateway\", HealthStatus.unhealthy, str(e))\n\n# Custom disk space check\ndef disk_space_check() -&gt; CheckResult:\n    \"\"\"Check available disk space\"\"\"\n    import shutil\n\n    try:\n        total, used, free = shutil.disk_usage(\"/\")\n        percent_used = (used / total) * 100\n\n        if percent_used &gt; 90:\n            return CheckResult(\n                \"disk-space\",\n                HealthStatus.unhealthy,\n                f\"Disk usage critical: {percent_used:.1f}%\"\n            )\n        elif percent_used &gt; 75:\n            return CheckResult(\n                \"disk-space\",\n                HealthStatus.degraded,\n                f\"Disk usage high: {percent_used:.1f}%\"\n            )\n        else:\n            return CheckResult(\"disk-space\", HealthStatus.healthy)\n    except Exception as e:\n        return CheckResult(\"disk-space\", HealthStatus.unhealthy, str(e))\n\n# Register custom checks\nhealth.register(payment_gateway_check)\nhealth.register(disk_space_check)\n\n# Run all checks\nresults = health.run()\n</code></pre>"},{"location":"examples/#docker-compose-example","title":"Docker Compose Example","text":"<p>Complete docker-compose setup with health checks:</p> <p>docker-compose.yml: <pre><code>version: '3.8'\n\nservices:\n  app:\n    build: .\n    ports:\n      - \"8000:8000\"\n    environment:\n      - DATABASE_URL=postgresql://postgres:postgres@postgres:5432/mydb\n      - REDIS_URL=redis://redis:6379/0\n      - RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672/\n      - ENVIRONMENT=production\n    depends_on:\n      postgres:\n        condition: service_healthy\n      redis:\n        condition: service_healthy\n      rabbitmq:\n        condition: service_healthy\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8000/health\"]\n      interval: 30s\n      timeout: 3s\n      retries: 3\n      start_period: 10s\n\n  postgres:\n    image: postgres:15-alpine\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: postgres\n      POSTGRES_DB: mydb\n    ports:\n      - \"5432:5432\"\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  redis:\n    image: redis:7-alpine\n    ports:\n      - \"6379:6379\"\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"ping\"]\n      interval: 10s\n      timeout: 3s\n      retries: 5\n\n  rabbitmq:\n    image: rabbitmq:3-management-alpine\n    ports:\n      - \"5672:5672\"\n      - \"15672:15672\"\n    healthcheck:\n      test: [\"CMD\", \"rabbitmq-diagnostics\", \"ping\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\nvolumes:\n  postgres_data:\n</code></pre></p> <p>app.py: <pre><code>from fastapi import FastAPI\nfrom healthcheckx import Health, FastAPIAdapter\nimport os\n\napp = FastAPI()\n\nhealth = Health()\nhealth.postgresql_check(os.getenv(\"DATABASE_URL\"), name=\"postgres\")\nhealth.redis_check(os.getenv(\"REDIS_URL\"), name=\"redis\")\nhealth.rabbitmq_check(os.getenv(\"RABBITMQ_URL\"), name=\"rabbitmq\")\n\nadapter = FastAPIAdapter(health)\napp.get(\"/health\")(adapter.endpoint)\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello World\"}\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre></p> <p>Dockerfile: <pre><code>FROM python:3.11-slim\n\nWORKDIR /app\n\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\nCOPY . .\n\nEXPOSE 8000\n\nCMD [\"uvicorn\", \"app:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]\n</code></pre></p>"},{"location":"examples/#kubernetes-example","title":"Kubernetes Example","text":"<p>Complete Kubernetes deployment with health checks:</p> <p>deployment.yaml: <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-app\n  labels:\n    app: my-app\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: my-app\n  template:\n    metadata:\n      labels:\n        app: my-app\n    spec:\n      containers:\n      - name: app\n        image: my-app:1.0.0\n        ports:\n        - containerPort: 8000\n          name: http\n\n        env:\n        - name: DATABASE_URL\n          valueFrom:\n            secretKeyRef:\n              name: app-secrets\n              key: database-url\n        - name: REDIS_URL\n          value: \"redis://redis-service:6379\"\n        - name: RABBITMQ_URL\n          value: \"amqp://rabbitmq-service:5672\"\n        - name: ENVIRONMENT\n          value: \"production\"\n\n        resources:\n          requests:\n            memory: \"256Mi\"\n            cpu: \"100m\"\n          limits:\n            memory: \"512Mi\"\n            cpu: \"500m\"\n\n        # Liveness probe - restart if unhealthy\n        livenessProbe:\n          httpGet:\n            path: /healthz\n            port: 8000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n          timeoutSeconds: 5\n          failureThreshold: 3\n\n        # Readiness probe - don't send traffic if not ready\n        readinessProbe:\n          httpGet:\n            path: /ready\n            port: 8000\n          initialDelaySeconds: 10\n          periodSeconds: 5\n          timeoutSeconds: 3\n          failureThreshold: 3\n\n        # Startup probe - give time to start\n        startupProbe:\n          httpGet:\n            path: /health\n            port: 8000\n          initialDelaySeconds: 0\n          periodSeconds: 5\n          timeoutSeconds: 3\n          failureThreshold: 30\n\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: my-app-service\nspec:\n  selector:\n    app: my-app\n  ports:\n  - protocol: TCP\n    port: 80\n    targetPort: 8000\n  type: LoadBalancer\n\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: app-secrets\ntype: Opaque\nstringData:\n  database-url: \"postgresql://user:pass@postgres-service:5432/mydb\"\n</code></pre></p>"},{"location":"examples/#multi-database-example","title":"Multi-Database Example","text":"<p>Application using multiple databases:</p> <pre><code>from healthcheckx import Health\nimport os\n\nhealth = Health()\n\n# PostgreSQL - Main application database\nhealth.postgresql_check(\n    os.getenv(\"POSTGRES_URL\", \"postgresql://localhost/app_db\"),\n    name=\"postgres-main\"\n)\n\n# MySQL - Legacy system integration\nhealth.mysql_check(\n    os.getenv(\"MYSQL_URL\", \"mysql://localhost:3306/legacy_db\"),\n    name=\"mysql-legacy\"\n)\n\n# MongoDB - Document storage\nhealth.mongodb_check(\n    os.getenv(\"MONGODB_URL\", \"mongodb://localhost:27017/documents\"),\n    name=\"mongodb-docs\"\n)\n\n# SQLite - Local cache database\nhealth.sqlite_check(\n    os.getenv(\"SQLITE_PATH\", \"sqlite:///cache.db\"),\n    name=\"sqlite-cache\"\n)\n\n# Redis - Session storage\nhealth.redis_check(\n    os.getenv(\"REDIS_URL\", \"redis://localhost:6379\"),\n    name=\"redis-sessions\"\n)\n\n# Run checks\nresults = health.run()\n\n# Categorize results\ndb_results = [r for r in results if any(db in r.name for db in ['postgres', 'mysql', 'mongodb', 'sqlite'])]\ncache_results = [r for r in results if 'redis' in r.name]\n\nprint(\"Database Health:\")\nfor result in db_results:\n    print(f\"  {result.name}: {result.status.value}\")\n\nprint(\"\\nCache Health:\")\nfor result in cache_results:\n    print(f\"  {result.name}: {result.status.value}\")\n</code></pre>"},{"location":"examples/#regional-deployment-example","title":"Regional Deployment Example","text":"<p>Multi-region deployment with health monitoring:</p> <pre><code>from healthcheckx import Health\nfrom typing import Dict\nimport os\n\nclass RegionalHealth:\n    def __init__(self):\n        self.regions = {}\n\n    def add_region(self, region_name: str):\n        health = Health()\n\n        # Database for this region\n        health.postgresql_check(\n            os.getenv(f\"{region_name.upper()}_DATABASE_URL\"),\n            name=f\"postgres-{region_name}\"\n        )\n\n        # Cache for this region\n        health.redis_check(\n            os.getenv(f\"{region_name.upper()}_REDIS_URL\"),\n            name=f\"redis-{region_name}\"\n        )\n\n        self.regions[region_name] = health\n\n    def check_all_regions(self):\n        all_results = {}\n        for region, health in self.regions.items():\n            all_results[region] = health.run()\n        return all_results\n\n# Setup regions\nregional = RegionalHealth()\nregional.add_region(\"us-east-1\")\nregional.add_region(\"eu-west-1\")\nregional.add_region(\"ap-south-1\")\n\n# Check all regions\nresults = regional.check_all_regions()\n\nfor region, checks in results.items():\n    print(f\"\\n{region}:\")\n    for check in checks:\n        print(f\"  {check.name}: {check.status.value}\")\n</code></pre>"},{"location":"examples/#cli-tool-example","title":"CLI Tool Example","text":"<p>Command-line health check tool:</p> <pre><code>#!/usr/bin/env python3\n\"\"\"Health check CLI tool\"\"\"\n\nimport argparse\nimport sys\nfrom healthcheckx import Health, HealthStatus\nimport os\n\ndef main():\n    parser = argparse.ArgumentParser(description='Run health checks')\n    parser.add_argument('--json', action='store_true', help='Output as JSON')\n    parser.add_argument('--verbose', '-v', action='store_true', help='Verbose output')\n    args = parser.parse_args()\n\n    # Setup health checks\n    health = Health()\n\n    if db_url := os.getenv(\"DATABASE_URL\"):\n        health.postgresql_check(db_url, name=\"database\")\n\n    if redis_url := os.getenv(\"REDIS_URL\"):\n        health.redis_check(redis_url, name=\"redis\")\n\n    if rabbitmq_url := os.getenv(\"RABBITMQ_URL\"):\n        health.rabbitmq_check(rabbitmq_url, name=\"rabbitmq\")\n\n    # Run checks\n    results = health.run()\n\n    # Output results\n    if args.json:\n        import json\n        output = {\n            \"status\": \"healthy\" if all(r.status == HealthStatus.healthy for r in results) else \"unhealthy\",\n            \"checks\": [\n                {\n                    \"name\": r.name,\n                    \"status\": r.status.value,\n                    \"duration_ms\": r.duration_ms,\n                    \"message\": r.message\n                }\n                for r in results\n            ]\n        }\n        print(json.dumps(output, indent=2))\n    else:\n        print(\"Health Check Results:\")\n        print(\"-\" * 50)\n        for result in results:\n            status_symbol = \"\u2713\" if result.status == HealthStatus.healthy else \"\u2717\"\n            print(f\"{status_symbol} {result.name}: {result.status.value}\")\n            if args.verbose and result.message:\n                print(f\"  Message: {result.message}\")\n            if args.verbose:\n                print(f\"  Duration: {result.duration_ms:.2f}ms\")\n        print(\"-\" * 50)\n\n    # Exit with error if any check failed\n    if any(r.status == HealthStatus.unhealthy for r in results):\n        sys.exit(1)\n\n    sys.exit(0)\n\nif __name__ == \"__main__\":\n    main()\n</code></pre> <p>Usage: <pre><code># Basic check\npython healthcheck.py\n\n# JSON output\npython healthcheck.py --json\n\n# Verbose output\npython healthcheck.py --verbose\n</code></pre></p>"},{"location":"examples/#testing-example","title":"Testing Example","text":"<p>Unit tests for health checks:</p> <pre><code>import unittest\nfrom unittest.mock import patch, MagicMock\nfrom healthcheckx import Health, HealthStatus\n\nclass TestHealthChecks(unittest.TestCase):\n\n    def test_redis_healthy(self):\n        \"\"\"Test Redis health check returns healthy when connected\"\"\"\n        health = Health()\n        health.redis_check(\"redis://localhost:6379\", name=\"redis\")\n\n        with patch('redis.Redis') as mock_redis:\n            mock_instance = MagicMock()\n            mock_instance.ping.return_value = True\n            mock_redis.from_url.return_value = mock_instance\n\n            results = health.run()\n            self.assertEqual(len(results), 1)\n            self.assertEqual(results[0].status, HealthStatus.healthy)\n\n    def test_postgres_unhealthy(self):\n        \"\"\"Test PostgreSQL check returns unhealthy when connection fails\"\"\"\n        health = Health()\n        health.postgresql_check(\"postgresql://localhost/test\", name=\"postgres\")\n\n        with patch('psycopg2.connect') as mock_connect:\n            mock_connect.side_effect = Exception(\"Connection refused\")\n\n            results = health.run()\n            self.assertEqual(len(results), 1)\n            self.assertEqual(results[0].status, HealthStatus.unhealthy)\n\n    def test_multiple_checks(self):\n        \"\"\"Test multiple health checks\"\"\"\n        health = Health()\n        health.redis_check(\"redis://localhost:6379\", name=\"redis\")\n        health.postgresql_check(\"postgresql://localhost/test\", name=\"postgres\")\n\n        results = health.run()\n        self.assertEqual(len(results), 2)\n        self.assertIn(\"redis\", [r.name for r in results])\n        self.assertIn(\"postgres\", [r.name for r in results])\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>"},{"location":"examples/#next-steps","title":"Next Steps","text":"<ul> <li>Installation - Install healthcheckx</li> <li>Quick Start - Get started quickly</li> <li>Built-in Checks - Explore available checks</li> <li>Framework Integration - Integrate with your framework</li> <li>API Reference - Complete API documentation</li> </ul>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.8 or higher</li> <li>pip (Python package installer)</li> </ul>"},{"location":"installation/#basic-installation","title":"Basic Installation","text":"<p>Install the core library without any optional dependencies:</p> <pre><code>pip install healthcheckx\n</code></pre> <p>This provides the core functionality and allows you to create custom health checks, but does not include drivers for specific services.</p>"},{"location":"installation/#installing-with-service-support","title":"Installing with Service Support","text":"<p>healthcheckx uses optional dependencies to keep the core library lightweight. Install only the services you need:</p>"},{"location":"installation/#cache-systems","title":"Cache Systems","text":"<pre><code># Redis (also works for KeyDB)\npip install healthcheckx[redis]\n\n# Memcached\npip install healthcheckx[memcached]\n</code></pre>"},{"location":"installation/#message-queues","title":"Message Queues","text":"<pre><code># RabbitMQ\npip install healthcheckx[rabbitmq]\n</code></pre>"},{"location":"installation/#relational-databases","title":"Relational Databases","text":"<pre><code># PostgreSQL\npip install healthcheckx[postgresql]\n\n# MySQL\npip install healthcheckx[mysql]\n\n# SQLite (no extra dependencies needed - included in Python)\n\n# Oracle\npip install healthcheckx[oracle]\n\n# MS SQL Server\npip install healthcheckx[mssql]\n</code></pre>"},{"location":"installation/#nosql-databases","title":"NoSQL Databases","text":"<pre><code># MongoDB\npip install healthcheckx[mongodb]\n</code></pre>"},{"location":"installation/#install-multiple-services","title":"Install Multiple Services","text":"<p>You can install multiple services at once:</p> <pre><code>pip install healthcheckx[redis,postgresql,mongodb]\n</code></pre>"},{"location":"installation/#install-all-services","title":"Install All Services","text":"<p>To install all available service drivers:</p> <pre><code>pip install healthcheckx[all]\n</code></pre> <p>This includes: - Redis (redis&gt;=5.0) - Memcached (pymemcache&gt;=4.0) - RabbitMQ (pika&gt;=1.3) - PostgreSQL (psycopg2-binary&gt;=2.9) - MySQL (mysql-connector-python&gt;=8.0) - Oracle (oracledb&gt;=3.4) - MS SQL Server (pymssql&gt;=2.2) - MongoDB (pymongo&gt;=4.0)</p>"},{"location":"installation/#virtual-environment-recommended","title":"Virtual Environment (Recommended)","text":"<p>It's recommended to install healthcheckx in a virtual environment:</p> <pre><code># Create virtual environment\npython -m venv venv\n\n# Activate on Windows\nvenv\\Scripts\\activate\n\n# Activate on Linux/Mac\nsource venv/bin/activate\n\n# Install healthcheckx\npip install healthcheckx[all]\n</code></pre>"},{"location":"installation/#verify-installation","title":"Verify Installation","text":"<p>After installation, verify that healthcheckx is properly installed:</p> <pre><code>import healthcheckx\nprint(healthcheckx.__version__)\n</code></pre> <p>Or try a simple health check:</p> <pre><code>from healthcheckx import Health, CheckResult, HealthStatus\n\nhealth = Health()\nprint(\"healthcheckx installed successfully!\")\n</code></pre>"},{"location":"installation/#upgrading","title":"Upgrading","text":"<p>To upgrade to the latest version:</p> <pre><code>pip install --upgrade healthcheckx\n</code></pre> <p>To upgrade with specific extras:</p> <pre><code>pip install --upgrade healthcheckx[all]\n</code></pre>"},{"location":"installation/#development-installation","title":"Development Installation","text":"<p>If you want to contribute to healthcheckx, clone the repository and install in editable mode:</p> <pre><code># Clone repository\ngit clone https://github.com/Soumen3/healthcheckx.git\ncd healthcheckx\n\n# Install in editable mode with all dependencies\npip install -e .[all]\n</code></pre>"},{"location":"installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"installation/#import-errors","title":"Import Errors","text":"<p>If you get import errors for specific services:</p> <pre><code>ModuleNotFoundError: No module named 'redis'\n</code></pre> <p>Install the required optional dependency:</p> <pre><code>pip install healthcheckx[redis]\n</code></pre>"},{"location":"installation/#version-conflicts","title":"Version Conflicts","text":"<p>If you experience dependency conflicts, try creating a fresh virtual environment:</p> <pre><code>python -m venv fresh_venv\nsource fresh_venv/bin/activate  # or fresh_venv\\Scripts\\activate on Windows\npip install healthcheckx[all]\n</code></pre>"},{"location":"installation/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start Guide - Get started with healthcheckx</li> <li>Built-in Checks - Explore available health checks</li> <li>Framework Integration - Integrate with your framework</li> </ul>"},{"location":"quickstart/","title":"Quick Start","text":"<p>Get up and running with healthcheckx in minutes!</p>"},{"location":"quickstart/#your-first-health-check","title":"Your First Health Check","text":""},{"location":"quickstart/#step-1-install-healthcheckx","title":"Step 1: Install healthcheckx","text":"<pre><code>pip install healthcheckx[redis,postgresql]\n</code></pre>"},{"location":"quickstart/#step-2-create-a-health-check","title":"Step 2: Create a Health Check","text":"<pre><code>from healthcheckx import Health\n\n# Create health check instance\nhealth = Health()\n\n# Register checks\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://user:password@localhost/mydb\")\n\n# Run all checks\nresults = health.run()\n\n# Print results\nfor result in results:\n    print(f\"{result.name}: {result.status}\")\n</code></pre> <p>Output: <pre><code>redis: healthy\npostgresql: healthy\n</code></pre></p>"},{"location":"quickstart/#detailed-results","title":"Detailed Results","text":"<p>Each health check returns detailed information:</p> <pre><code>from healthcheckx import Health\n\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\")\n\nresults = health.run()\n\nfor result in results:\n    print(f\"Name: {result.name}\")\n    print(f\"Status: {result.status}\")\n    print(f\"Duration: {result.duration_ms:.2f}ms\")\n    if result.message:\n        print(f\"Message: {result.message}\")\n</code></pre>"},{"location":"quickstart/#overall-status","title":"Overall Status","text":"<p>Get an aggregate status across all checks:</p> <pre><code>from healthcheckx import Health, overall_status\n\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://user:pass@localhost/db\") \\\n      .mongodb_check(\"mongodb://localhost:27017\")\n\nresults = health.run()\nstatus = overall_status(results)\n\nprint(f\"Overall Status: {status}\")\n# Output: Overall Status: healthy\n</code></pre>"},{"location":"quickstart/#multiple-service-instances","title":"Multiple Service Instances","text":"<p>Monitor multiple instances of the same service using the <code>name</code> parameter:</p> <pre><code>from healthcheckx import Health\n\nhealth = Health()\n\n# Monitor multiple Redis instances\nhealth.redis_check(\"redis://primary:6379\", name=\"redis-primary\") \\\n      .redis_check(\"redis://cache:6379\", name=\"redis-cache\") \\\n      .redis_check(\"redis://sessions:6379\", name=\"redis-sessions\")\n\nresults = health.run()\n\nfor result in results:\n    print(f\"{result.name}: {result.status}\")\n</code></pre> <p>Output: <pre><code>redis-primary: healthy\nredis-cache: healthy\nredis-sessions: healthy\n</code></pre></p>"},{"location":"quickstart/#handling-unhealthy-services","title":"Handling Unhealthy Services","text":"<p>healthcheckx gracefully handles failures:</p> <pre><code>from healthcheckx import Health, HealthStatus\n\nhealth = Health()\nhealth.redis_check(\"redis://nonexistent:6379\")\n\nresults = health.run()\n\nfor result in results:\n    if result.status == HealthStatus.unhealthy:\n        print(f\"\u26a0\ufe0f {result.name} is unhealthy\")\n        print(f\"Error: {result.message}\")\n</code></pre>"},{"location":"quickstart/#custom-timeouts","title":"Custom Timeouts","text":"<p>Configure timeouts for each check:</p> <pre><code>from healthcheckx import Health\n\nhealth = Health()\n\n# Fast timeout for cache\nhealth.redis_check(\"redis://localhost:6379\", timeout=1)\n\n# Longer timeout for database\nhealth.postgresql_check(\"postgresql://localhost/db\", timeout=5)\n\n# Medium timeout for MongoDB\nhealth.mongodb_check(\"mongodb://localhost:27017\", timeout=3)\n\nresults = health.run()\n</code></pre>"},{"location":"quickstart/#framework-integration","title":"Framework Integration","text":""},{"location":"quickstart/#fastapi-example","title":"FastAPI Example","text":"<pre><code>from fastapi import FastAPI\nfrom healthcheckx import Health, FastAPIAdapter\n\napp = FastAPI()\nhealth = Health()\n\n# Register health checks\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://user:pass@localhost/db\")\n\n# Add health endpoint\nadapter = FastAPIAdapter(health)\napp.get(\"/health\")(adapter.endpoint)\n\n# Start server\n# uvicorn main:app --reload\n</code></pre> <p>Visit <code>http://localhost:8000/health</code> to see health status.</p>"},{"location":"quickstart/#flask-example","title":"Flask Example","text":"<pre><code>from flask import Flask\nfrom healthcheckx import Health, flask_health_endpoint\n\napp = Flask(__name__)\nhealth = Health()\n\n# Register health checks\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .mysql_check(\"mysql://root:pass@localhost:3306/db\")\n\n# Add health endpoint\napp.route(\"/health\")(flask_health_endpoint(health))\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>"},{"location":"quickstart/#custom-health-checks","title":"Custom Health Checks","text":"<p>Create your own health checks:</p> <pre><code>from healthcheckx import Health, CheckResult, HealthStatus\n\ndef disk_space_check():\n    \"\"\"Check if disk space is available\"\"\"\n    import shutil\n    stat = shutil.disk_usage(\"/\")\n    free_percent = (stat.free / stat.total) * 100\n\n    if free_percent &gt; 20:\n        return CheckResult(\"disk-space\", HealthStatus.healthy)\n    elif free_percent &gt; 10:\n        return CheckResult(\"disk-space\", HealthStatus.degraded, \n                          f\"Low disk space: {free_percent:.1f}%\")\n    else:\n        return CheckResult(\"disk-space\", HealthStatus.unhealthy,\n                          f\"Critical disk space: {free_percent:.1f}%\")\n\nhealth = Health()\nhealth.register(disk_space_check)\nhealth.redis_check(\"redis://localhost:6379\")\n\nresults = health.run()\n</code></pre>"},{"location":"quickstart/#common-patterns","title":"Common Patterns","text":""},{"location":"quickstart/#environment-based-configuration","title":"Environment-Based Configuration","text":"<pre><code>import os\nfrom healthcheckx import Health\n\nhealth = Health()\n\n# Load from environment variables\nif redis_url := os.getenv(\"REDIS_URL\"):\n    health.redis_check(redis_url)\n\nif db_url := os.getenv(\"DATABASE_URL\"):\n    health.postgresql_check(db_url)\n\nif mongodb_url := os.getenv(\"MONGODB_URL\"):\n    health.mongodb_check(mongodb_url)\n\nresults = health.run()\n</code></pre>"},{"location":"quickstart/#error-handling","title":"Error Handling","text":"<pre><code>from healthcheckx import Health, HealthStatus\nimport logging\n\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://localhost/db\")\n\nresults = health.run()\n\nfor result in results:\n    if result.status == HealthStatus.unhealthy:\n        logging.error(f\"{result.name} is unhealthy: {result.message}\")\n    elif result.status == HealthStatus.degraded:\n        logging.warning(f\"{result.name} is degraded: {result.message}\")\n    else:\n        logging.info(f\"{result.name} is healthy\")\n</code></pre>"},{"location":"quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Built-in Checks - Explore all available health checks</li> <li>Framework Integration - Deep dive into framework adapters</li> <li>Custom Checks - Learn to create advanced custom checks</li> <li>API Reference - Complete API documentation</li> </ul>"},{"location":"advanced/","title":"Advanced Topics","text":""},{"location":"advanced/#implementation-in-progress","title":"\ud83d\udea7 Implementation in Progress","text":"<p>The advanced topics documentation is currently being developed and will be available soon.</p>"},{"location":"advanced/#planned-topics","title":"Planned Topics","text":"<ul> <li>Custom Health Checks - Create custom health checks for any service</li> <li>Multiple Instances - Monitor multiple instances of the same service</li> <li>Configuration - Configure timeouts, retries, and custom settings</li> </ul>"},{"location":"advanced/#whats-coming","title":"What's Coming","text":"<p>We're working on comprehensive guides for:</p> <ul> <li>Creating custom health checks for external APIs and services</li> <li>Monitoring multiple database and cache instances</li> <li>Advanced configuration options and environment management</li> <li>Performance optimization and caching strategies</li> <li>Integration patterns for microservices architectures</li> <li>Best practices for production deployments</li> </ul>"},{"location":"advanced/#contributing","title":"Contributing","text":"<p>If you have specific use cases or examples you'd like to see covered, please feel free to open an issue or submit a pull request.</p>"},{"location":"advanced/#in-the-meantime","title":"In the Meantime","text":"<p>Check out our other documentation sections:</p> <ul> <li>Quick Start - Get started quickly</li> <li>Built-in Checks - Learn about available health checks</li> <li>Framework Integration - Integrate with FastAPI, Flask, or Django</li> <li>API Reference - Complete API documentation</li> </ul> <p>This documentation is actively being developed. Stay tuned for updates!</p>"},{"location":"advanced/configuration/","title":"Configuration","text":"<p>Configure health check behavior including timeouts, retries, and custom settings.</p>"},{"location":"advanced/configuration/#overview","title":"Overview","text":"<p>healthcheckx provides sensible defaults but allows you to customize:</p> <ul> <li>Connection timeouts</li> <li>Check behavior</li> <li>Error handling</li> <li>Response formats</li> <li>Execution strategies</li> </ul>"},{"location":"advanced/configuration/#default-settings","title":"Default Settings","text":"<p>All built-in checks use these defaults:</p> <pre><code>DEFAULT_TIMEOUT = 2  # seconds\nDEFAULT_CONNECT_TIMEOUT = 2  # seconds\n</code></pre>"},{"location":"advanced/configuration/#connection-strings","title":"Connection Strings","text":""},{"location":"advanced/configuration/#redis","title":"Redis","text":"<pre><code>health.redis_check(\"redis://localhost:6379/0\", name=\"redis\")\n\n# With password\nhealth.redis_check(\"redis://:password@localhost:6379/0\", name=\"redis\")\n\n# With username and password (Redis 6+)\nhealth.redis_check(\"redis://user:password@localhost:6379/0\", name=\"redis\")\n\n# SSL/TLS\nhealth.redis_check(\"rediss://localhost:6380/0\", name=\"redis-ssl\")\n</code></pre>"},{"location":"advanced/configuration/#postgresql","title":"PostgreSQL","text":"<pre><code># Basic\nhealth.postgresql_check(\n    \"postgresql://user:password@localhost:5432/dbname\",\n    name=\"postgres\"\n)\n\n# With SSL\nhealth.postgresql_check(\n    \"postgresql://user:password@localhost:5432/dbname?sslmode=require\",\n    name=\"postgres\"\n)\n\n# Custom timeout in connection string\nhealth.postgresql_check(\n    \"postgresql://user:password@localhost:5432/dbname?connect_timeout=5\",\n    name=\"postgres\"\n)\n</code></pre>"},{"location":"advanced/configuration/#mysql","title":"MySQL","text":"<pre><code># Basic\nhealth.mysql_check(\n    \"mysql://user:password@localhost:3306/dbname\",\n    name=\"mysql\"\n)\n\n# With charset\nhealth.mysql_check(\n    \"mysql://user:password@localhost:3306/dbname?charset=utf8mb4\",\n    name=\"mysql\"\n)\n</code></pre>"},{"location":"advanced/configuration/#mongodb","title":"MongoDB","text":"<pre><code># Basic\nhealth.mongodb_check(\n    \"mongodb://localhost:27017/dbname\",\n    name=\"mongodb\"\n)\n\n# With authentication\nhealth.mongodb_check(\n    \"mongodb://user:password@localhost:27017/dbname?authSource=admin\",\n    name=\"mongodb\"\n)\n\n# Replica set\nhealth.mongodb_check(\n    \"mongodb://mongo1:27017,mongo2:27017,mongo3:27017/dbname?replicaSet=rs0\",\n    name=\"mongodb\"\n)\n\n# With timeout\nhealth.mongodb_check(\n    \"mongodb://localhost:27017/dbname?serverSelectionTimeoutMS=2000\",\n    name=\"mongodb\"\n)\n</code></pre>"},{"location":"advanced/configuration/#rabbitmq","title":"RabbitMQ","text":"<pre><code># Basic\nhealth.rabbitmq_check(\n    \"amqp://guest:guest@localhost:5672/\",\n    name=\"rabbitmq\"\n)\n\n# Virtual host\nhealth.rabbitmq_check(\n    \"amqp://user:password@localhost:5672/myvhost\",\n    name=\"rabbitmq\"\n)\n\n# SSL\nhealth.rabbitmq_check(\n    \"amqps://user:password@localhost:5671/\",\n    name=\"rabbitmq-ssl\"\n)\n</code></pre>"},{"location":"advanced/configuration/#memcached","title":"Memcached","text":"<pre><code># Single server\nhealth.memcached_check(\n    \"memcached://localhost:11211\",\n    name=\"memcached\"\n)\n\n# Multiple servers (client handles distribution)\nhealth.memcached_check(\n    \"memcached://cache1:11211,cache2:11211\",\n    name=\"memcached-cluster\"\n)\n</code></pre>"},{"location":"advanced/configuration/#keydb","title":"KeyDB","text":"<pre><code># Same as Redis\nhealth.keydb_check(\"redis://localhost:6379\", name=\"keydb\")\n</code></pre>"},{"location":"advanced/configuration/#sqlite","title":"SQLite","text":"<pre><code># File-based\nhealth.sqlite_check(\"sqlite:///path/to/database.db\", name=\"sqlite\")\n\n# Absolute path\nhealth.sqlite_check(\"sqlite:////absolute/path/to/database.db\", name=\"sqlite\")\n\n# In-memory (for testing)\nhealth.sqlite_check(\"sqlite:///:memory:\", name=\"sqlite-memory\")\n</code></pre>"},{"location":"advanced/configuration/#oracle","title":"Oracle","text":"<pre><code># TNS format\nhealth.oracle_check(\n    \"oracle://user:password@localhost:1521/ORCL\",\n    name=\"oracle\"\n)\n\n# Easy Connect format\nhealth.oracle_check(\n    \"oracle://user:password@//localhost:1521/service_name\",\n    name=\"oracle\"\n)\n</code></pre>"},{"location":"advanced/configuration/#ms-sql-server","title":"MS SQL Server","text":"<pre><code># Basic\nhealth.mssql_check(\n    \"mssql://user:password@localhost:1433/dbname\",\n    name=\"mssql\"\n)\n\n# Windows Authentication\nhealth.mssql_check(\n    \"mssql://localhost:1433/dbname?trusted_connection=yes\",\n    name=\"mssql\"\n)\n</code></pre>"},{"location":"advanced/configuration/#environment-variables","title":"Environment Variables","text":"<p>Best practice: Use environment variables for configuration:</p> <pre><code>from healthcheckx import Health\nimport os\n\ndef create_health():\n    health = Health()\n\n    # Get from environment with defaults\n    redis_url = os.getenv(\"REDIS_URL\", \"redis://localhost:6379\")\n    db_url = os.getenv(\"DATABASE_URL\", \"postgresql://localhost/mydb\")\n\n    health.redis_check(redis_url, name=\"redis\")\n    health.postgresql_check(db_url, name=\"database\")\n\n    return health\n\nhealth = create_health()\n</code></pre>"},{"location":"advanced/configuration/#environment-file-env","title":"Environment File (.env)","text":"<pre><code># .env file\nDATABASE_URL=postgresql://user:pass@localhost:5432/mydb\nREDIS_URL=redis://:password@localhost:6379/0\nRABBITMQ_URL=amqp://user:pass@localhost:5672/\nMONGODB_URL=mongodb://localhost:27017/mydb\n</code></pre> <p>Load with python-dotenv:</p> <pre><code>from healthcheckx import Health\nfrom dotenv import load_dotenv\nimport os\n\n# Load .env file\nload_dotenv()\n\nhealth = Health()\n\nhealth.postgresql_check(os.getenv(\"DATABASE_URL\"), name=\"database\")\nhealth.redis_check(os.getenv(\"REDIS_URL\"), name=\"redis\")\nhealth.rabbitmq_check(os.getenv(\"RABBITMQ_URL\"), name=\"rabbitmq\")\nhealth.mongodb_check(os.getenv(\"MONGODB_URL\"), name=\"mongodb\")\n</code></pre>"},{"location":"advanced/configuration/#configuration-classes","title":"Configuration Classes","text":"<p>Create configuration classes for better organization:</p> <pre><code>from dataclasses import dataclass\nfrom typing import Optional\nimport os\n\n@dataclass\nclass RedisConfig:\n    url: str\n    name: str = \"redis\"\n\n    @classmethod\n    def from_env(cls, env_var: str = \"REDIS_URL\", name: str = \"redis\"):\n        return cls(\n            url=os.getenv(env_var, \"redis://localhost:6379\"),\n            name=name\n        )\n\n@dataclass\nclass DatabaseConfig:\n    url: str\n    name: str = \"database\"\n\n    @classmethod\n    def from_env(cls, env_var: str = \"DATABASE_URL\", name: str = \"database\"):\n        return cls(\n            url=os.getenv(env_var, \"postgresql://localhost/mydb\"),\n            name=name\n        )\n\n@dataclass\nclass HealthConfig:\n    redis: RedisConfig\n    database: DatabaseConfig\n    rabbitmq_url: Optional[str] = None\n\n    @classmethod\n    def from_env(cls):\n        return cls(\n            redis=RedisConfig.from_env(),\n            database=DatabaseConfig.from_env(),\n            rabbitmq_url=os.getenv(\"RABBITMQ_URL\")\n        )\n\n# Usage\nconfig = HealthConfig.from_env()\n\nhealth = Health()\nhealth.redis_check(config.redis.url, name=config.redis.name)\nhealth.postgresql_check(config.database.url, name=config.database.name)\n\nif config.rabbitmq_url:\n    health.rabbitmq_check(config.rabbitmq_url, name=\"rabbitmq\")\n</code></pre>"},{"location":"advanced/configuration/#custom-timeout-configuration","title":"Custom Timeout Configuration","text":"<p>For custom checks with specific timeouts:</p> <pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport requests\n\ndef create_api_check(url: str, timeout: int = 2):\n    \"\"\"Factory with custom timeout\"\"\"\n    def check() -&gt; CheckResult:\n        try:\n            response = requests.get(url, timeout=timeout)\n            if response.status_code == 200:\n                return CheckResult(\"api\", HealthStatus.healthy)\n            return CheckResult(\"api\", HealthStatus.unhealthy, f\"HTTP {response.status_code}\")\n        except Exception as e:\n            return CheckResult(\"api\", HealthStatus.unhealthy, str(e))\n    return check\n\nhealth = Health()\n\n# Different timeouts for different services\nhealth.register(create_api_check(\"https://fast-api.com\", timeout=1))\nhealth.register(create_api_check(\"https://slow-api.com\", timeout=5))\n</code></pre>"},{"location":"advanced/configuration/#logging-configuration","title":"Logging Configuration","text":"<p>Configure logging for health checks:</p> <pre><code>from healthcheckx import Health\nimport logging\n\n# Configure logging\nlogging.basicConfig(\n    level=logging.INFO,\n    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n)\n\nlogger = logging.getLogger(__name__)\n\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\", name=\"redis\")\nhealth.postgresql_check(\"postgresql://localhost/db\", name=\"database\")\n\n# Log results\nresults = health.run()\nfor result in results:\n    if result.status.value == \"unhealthy\":\n        logger.error(f\"{result.name} is unhealthy: {result.message}\")\n    elif result.status.value == \"degraded\":\n        logger.warning(f\"{result.name} is degraded: {result.message}\")\n    else:\n        logger.info(f\"{result.name} is healthy ({result.duration_ms:.2f}ms)\")\n</code></pre>"},{"location":"advanced/configuration/#retry-configuration","title":"Retry Configuration","text":"<p>Add retry logic to health checks:</p> <pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport time\nfrom functools import wraps\n\ndef with_retry(max_attempts: int = 3, delay: float = 0.5):\n    \"\"\"Decorator to add retry logic\"\"\"\n    def decorator(check_func):\n        @wraps(check_func)\n        def wrapper() -&gt; CheckResult:\n            last_result = None\n            for attempt in range(max_attempts):\n                result = check_func()\n                if result.status == HealthStatus.healthy:\n                    return result\n                last_result = result\n                if attempt &lt; max_attempts - 1:\n                    time.sleep(delay)\n            return last_result\n        return wrapper\n    return decorator\n\n# Usage\n@with_retry(max_attempts=3, delay=0.5)\ndef unstable_service_check() -&gt; CheckResult:\n    # Your check logic\n    pass\n\nhealth = Health()\nhealth.register(unstable_service_check)\n</code></pre>"},{"location":"advanced/configuration/#response-format-configuration","title":"Response Format Configuration","text":"<p>Customize response format:</p> <pre><code>from healthcheckx import Health, overall_status\nfrom typing import Dict, Any\nimport json\n\ndef custom_response_format(results) -&gt; Dict[str, Any]:\n    \"\"\"Custom response format\"\"\"\n    status = overall_status(results)\n\n    return {\n        \"status\": status.value,\n        \"timestamp\": \"2026-01-15T10:30:00Z\",\n        \"total_checks\": len(results),\n        \"healthy_count\": sum(1 for r in results if r.status.value == \"healthy\"),\n        \"unhealthy_count\": sum(1 for r in results if r.status.value == \"unhealthy\"),\n        \"average_response_time\": sum(r.duration_ms for r in results) / len(results),\n        \"checks\": [\n            {\n                \"name\": r.name,\n                \"status\": r.status.value,\n                \"duration_ms\": round(r.duration_ms, 2),\n                \"message\": r.message\n            }\n            for r in results\n        ]\n    }\n\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\", name=\"redis\")\nhealth.postgresql_check(\"postgresql://localhost/db\", name=\"database\")\n\nresults = health.run()\ncustom_response = custom_response_format(results)\nprint(json.dumps(custom_response, indent=2))\n</code></pre>"},{"location":"advanced/configuration/#caching-configuration","title":"Caching Configuration","text":"<p>Cache health check results to reduce load:</p> <pre><code>from healthcheckx import Health\nfrom functools import lru_cache\nfrom datetime import datetime, timedelta\nfrom typing import List\n\nclass CachedHealth:\n    def __init__(self, health: Health, cache_duration: int = 30):\n        self.health = health\n        self.cache_duration = cache_duration  # seconds\n        self.last_check = None\n        self.cached_results = None\n\n    def run(self):\n        \"\"\"Run checks with caching\"\"\"\n        now = datetime.now()\n\n        # Return cached results if still valid\n        if (self.cached_results is not None and \n            self.last_check is not None and\n            (now - self.last_check).total_seconds() &lt; self.cache_duration):\n            return self.cached_results\n\n        # Run fresh checks\n        self.cached_results = self.health.run()\n        self.last_check = now\n        return self.cached_results\n\n# Usage\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\", name=\"redis\")\nhealth.postgresql_check(\"postgresql://localhost/db\", name=\"database\")\n\ncached_health = CachedHealth(health, cache_duration=30)\n\n# First call - runs checks\nresults1 = cached_health.run()\n\n# Second call within 30 seconds - returns cached results\nresults2 = cached_health.run()  # Same results, no actual checks\n\n# After 30 seconds - runs fresh checks\nimport time\ntime.sleep(31)\nresults3 = cached_health.run()  # New checks\n</code></pre>"},{"location":"advanced/configuration/#framework-specific-configuration","title":"Framework-Specific Configuration","text":""},{"location":"advanced/configuration/#fastapi-with-settings","title":"FastAPI with Settings","text":"<pre><code>from fastapi import FastAPI\nfrom pydantic_settings import BaseSettings\nfrom healthcheckx import Health, FastAPIAdapter\n\nclass Settings(BaseSettings):\n    redis_url: str = \"redis://localhost:6379\"\n    database_url: str = \"postgresql://localhost/mydb\"\n    environment: str = \"development\"\n\n    class Config:\n        env_file = \".env\"\n\nsettings = Settings()\n\napp = FastAPI()\n\nhealth = Health()\nhealth.redis_check(settings.redis_url, name=\"redis\")\nhealth.postgresql_check(settings.database_url, name=\"database\")\n\nadapter = FastAPIAdapter(health)\napp.get(\"/health\")(adapter.endpoint)\n</code></pre>"},{"location":"advanced/configuration/#flask-with-config","title":"Flask with Config","text":"<pre><code>from flask import Flask\nfrom healthcheckx import Health, flask_health_endpoint\n\napp = Flask(__name__)\n\n# Load configuration\napp.config.from_object('config.ProductionConfig')\n# or\napp.config.from_envvar('APP_CONFIG_FILE')\n\nhealth = Health()\nhealth.redis_check(app.config['REDIS_URL'], name=\"redis\")\nhealth.postgresql_check(app.config['DATABASE_URL'], name=\"database\")\n\napp.add_url_rule(\"/health\", \"health\", flask_health_endpoint(health))\n</code></pre>"},{"location":"advanced/configuration/#django-with-settings","title":"Django with Settings","text":"<pre><code># Django settings.py\nHEALTH_CHECKS = {\n    'REDIS_URL': 'redis://localhost:6379',\n    'DATABASE_URL': 'postgresql://localhost/mydb',\n    'TIMEOUT': 2,\n    'ENABLE_CACHE_CHECK': True,\n    'ENABLE_QUEUE_CHECK': True,\n}\n\n# health.py\nfrom django.conf import settings\nfrom healthcheckx import Health\n\ndef create_health():\n    health = Health()\n\n    config = settings.HEALTH_CHECKS\n\n    health.postgresql_check(config['DATABASE_URL'], name=\"database\")\n\n    if config.get('ENABLE_CACHE_CHECK'):\n        health.redis_check(config['REDIS_URL'], name=\"redis\")\n\n    return health\n\nhealth = create_health()\n</code></pre>"},{"location":"advanced/configuration/#docker-configuration","title":"Docker Configuration","text":""},{"location":"advanced/configuration/#docker-composeyml","title":"docker-compose.yml","text":"<pre><code>version: '3.8'\n\nservices:\n  app:\n    build: .\n    environment:\n      - DATABASE_URL=postgresql://postgres:password@postgres:5432/mydb\n      - REDIS_URL=redis://redis:6379/0\n      - RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672/\n      - HEALTH_CHECK_TIMEOUT=3\n      - ENVIRONMENT=production\n    depends_on:\n      - postgres\n      - redis\n      - rabbitmq\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8000/health\"]\n      interval: 30s\n      timeout: 3s\n      retries: 3\n      start_period: 10s\n\n  postgres:\n    image: postgres:15\n    environment:\n      - POSTGRES_PASSWORD=password\n      - POSTGRES_DB=mydb\n\n  redis:\n    image: redis:7-alpine\n\n  rabbitmq:\n    image: rabbitmq:3-management-alpine\n</code></pre>"},{"location":"advanced/configuration/#kubernetes-configmap","title":"Kubernetes ConfigMap","text":"<pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: health-config\ndata:\n  DATABASE_URL: \"postgresql://postgres:5432/mydb\"\n  REDIS_URL: \"redis://redis:6379\"\n  RABBITMQ_URL: \"amqp://rabbitmq:5672\"\n  HEALTH_CHECK_TIMEOUT: \"2\"\n  ENVIRONMENT: \"production\"\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-app\nspec:\n  template:\n    spec:\n      containers:\n      - name: app\n        image: my-app:latest\n        envFrom:\n        - configMapRef:\n            name: health-config\n        livenessProbe:\n          httpGet:\n            path: /healthz\n            port: 8000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /ready\n            port: 8000\n          initialDelaySeconds: 10\n          periodSeconds: 5\n</code></pre>"},{"location":"advanced/configuration/#best-practices","title":"Best Practices","text":"<ol> <li>Use Environment Variables - Never hardcode credentials</li> <li>Set Appropriate Timeouts - 2-3 seconds for most checks</li> <li>Cache When Needed - Cache results for high-traffic endpoints</li> <li>Log Failures - Always log unhealthy checks for debugging</li> <li>Document Configuration - Comment why each setting exists</li> <li>Validate Configuration - Check that required env vars are set</li> <li>Use Secrets Management - Use proper secret management in production</li> <li>Test Configuration - Test health checks in each environment</li> <li>Monitor Performance - Track check duration over time</li> <li>Keep It Simple - Avoid over-complicated configuration</li> </ol>"},{"location":"advanced/configuration/#configuration-checklist","title":"Configuration Checklist","text":"<ul> <li>[ ] Environment variables defined</li> <li>[ ] Timeouts configured appropriately</li> <li>[ ] Logging enabled</li> <li>[ ] Secrets properly managed</li> <li>[ ] Docker health checks configured</li> <li>[ ] Kubernetes probes configured</li> <li>[ ] Error handling implemented</li> <li>[ ] Caching strategy defined</li> <li>[ ] Documentation updated</li> <li>[ ] Tests written for configuration</li> </ul>"},{"location":"advanced/configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Custom Health Checks - Create custom checks</li> <li>Multiple Instances - Check multiple services</li> <li>Examples - Complete configuration examples</li> </ul>"},{"location":"advanced/custom-checks/","title":"Custom Health Checks","text":"<p>Create custom health checks for any service or resource in your application.</p>"},{"location":"advanced/custom-checks/#overview","title":"Overview","text":"<p>While healthcheckx provides built-in checks for common services, you can easily create custom health checks for:</p> <ul> <li>External APIs</li> <li>File systems</li> <li>Custom databases</li> <li>Business logic validation</li> <li>Third-party services</li> <li>Resource availability (disk space, memory, etc.)</li> </ul>"},{"location":"advanced/custom-checks/#basic-custom-check","title":"Basic Custom Check","text":""},{"location":"advanced/custom-checks/#simple-function","title":"Simple Function","text":"<pre><code>from healthcheckx import Health, CheckResult, HealthStatus\n\nhealth = Health()\n\ndef custom_api_check() -&gt; CheckResult:\n    \"\"\"Check external API availability\"\"\"\n    try:\n        import requests\n        response = requests.get(\"https://api.example.com/status\", timeout=2)\n\n        if response.status_code == 200:\n            return CheckResult(\"external-api\", HealthStatus.healthy)\n        else:\n            return CheckResult(\n                \"external-api\",\n                HealthStatus.unhealthy,\n                f\"HTTP {response.status_code}\"\n            )\n    except Exception as e:\n        return CheckResult(\"external-api\", HealthStatus.unhealthy, str(e))\n\n# Register the custom check\nhealth.register(custom_api_check)\n\n# Run all checks\nresults = health.run()\n</code></pre>"},{"location":"advanced/custom-checks/#checkresult-structure","title":"CheckResult Structure","text":"<p>The <code>CheckResult</code> class has the following parameters:</p> <pre><code>CheckResult(\n    name: str,              # Unique identifier for the check\n    status: HealthStatus,   # healthy, unhealthy, or degraded\n    message: Optional[str] = None,     # Error or status message\n    duration_ms: Optional[float] = None  # Execution time (auto-calculated)\n)\n</code></pre>"},{"location":"advanced/custom-checks/#healthstatus-enum","title":"HealthStatus Enum","text":"<pre><code>from healthcheckx import HealthStatus\n\n# Available status values:\nHealthStatus.healthy    # Service is working correctly\nHealthStatus.unhealthy  # Service is down or not working\nHealthStatus.degraded   # Service is working but with issues\n</code></pre>"},{"location":"advanced/custom-checks/#advanced-custom-checks","title":"Advanced Custom Checks","text":""},{"location":"advanced/custom-checks/#with-timeout-and-retry","title":"With Timeout and Retry","text":"<pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport time\n\ndef api_check_with_retry() -&gt; CheckResult:\n    \"\"\"Check API with retry logic\"\"\"\n    import requests\n\n    max_retries = 3\n    timeout = 2\n\n    for attempt in range(max_retries):\n        try:\n            response = requests.get(\n                \"https://api.example.com/status\",\n                timeout=timeout\n            )\n\n            if response.status_code == 200:\n                return CheckResult(\"api\", HealthStatus.healthy)\n            elif attempt &lt; max_retries - 1:\n                time.sleep(0.5)  # Wait before retry\n                continue\n            else:\n                return CheckResult(\n                    \"api\",\n                    HealthStatus.unhealthy,\n                    f\"HTTP {response.status_code}\"\n                )\n        except requests.Timeout:\n            if attempt &lt; max_retries - 1:\n                continue\n            return CheckResult(\"api\", HealthStatus.unhealthy, \"Timeout\")\n        except Exception as e:\n            return CheckResult(\"api\", HealthStatus.unhealthy, str(e))\n\n    return CheckResult(\"api\", HealthStatus.unhealthy, \"All retries failed\")\n\nhealth = Health()\nhealth.register(api_check_with_retry)\n</code></pre>"},{"location":"advanced/custom-checks/#degraded-status-example","title":"Degraded Status Example","text":"<pre><code>from healthcheckx import Health, CheckResult, HealthStatus\n\ndef disk_space_check() -&gt; CheckResult:\n    \"\"\"Check disk space with degraded state\"\"\"\n    import shutil\n\n    try:\n        total, used, free = shutil.disk_usage(\"/\")\n        percent_used = (used / total) * 100\n\n        if percent_used &gt; 90:\n            return CheckResult(\n                \"disk-space\",\n                HealthStatus.unhealthy,\n                f\"Disk usage critical: {percent_used:.1f}%\"\n            )\n        elif percent_used &gt; 75:\n            return CheckResult(\n                \"disk-space\",\n                HealthStatus.degraded,\n                f\"Disk usage high: {percent_used:.1f}%\"\n            )\n        else:\n            return CheckResult(\n                \"disk-space\",\n                HealthStatus.healthy,\n                f\"Disk usage: {percent_used:.1f}%\"\n            )\n    except Exception as e:\n        return CheckResult(\"disk-space\", HealthStatus.unhealthy, str(e))\n\nhealth = Health()\nhealth.register(disk_space_check)\n</code></pre>"},{"location":"advanced/custom-checks/#real-world-examples","title":"Real-World Examples","text":""},{"location":"advanced/custom-checks/#1-external-api-health-check","title":"1. External API Health Check","text":"<pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport requests\nfrom typing import Dict, Any\n\ndef external_api_check() -&gt; CheckResult:\n    \"\"\"Check external payment gateway API\"\"\"\n    try:\n        response = requests.get(\n            \"https://payment-gateway.com/api/health\",\n            headers={\"Authorization\": \"Bearer YOUR_TOKEN\"},\n            timeout=3\n        )\n\n        if response.status_code == 200:\n            data = response.json()\n            if data.get(\"status\") == \"operational\":\n                return CheckResult(\"payment-gateway\", HealthStatus.healthy)\n            else:\n                return CheckResult(\n                    \"payment-gateway\",\n                    HealthStatus.degraded,\n                    f\"Status: {data.get('status')}\"\n                )\n        else:\n            return CheckResult(\n                \"payment-gateway\",\n                HealthStatus.unhealthy,\n                f\"HTTP {response.status_code}\"\n            )\n    except requests.Timeout:\n        return CheckResult(\n            \"payment-gateway\",\n            HealthStatus.unhealthy,\n            \"Request timeout\"\n        )\n    except Exception as e:\n        return CheckResult(\"payment-gateway\", HealthStatus.unhealthy, str(e))\n\nhealth = Health()\nhealth.register(external_api_check)\n</code></pre>"},{"location":"advanced/custom-checks/#2-s3object-storage-check","title":"2. S3/Object Storage Check","text":"<pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport boto3\nfrom botocore.exceptions import ClientError\n\ndef s3_bucket_check() -&gt; CheckResult:\n    \"\"\"Check S3 bucket accessibility\"\"\"\n    try:\n        s3_client = boto3.client('s3')\n        bucket_name = 'my-app-bucket'\n\n        # Try to list objects (just check access)\n        s3_client.head_bucket(Bucket=bucket_name)\n\n        return CheckResult(\"s3-storage\", HealthStatus.healthy)\n\n    except ClientError as e:\n        error_code = e.response['Error']['Code']\n        if error_code == '404':\n            return CheckResult(\n                \"s3-storage\",\n                HealthStatus.unhealthy,\n                \"Bucket not found\"\n            )\n        elif error_code == '403':\n            return CheckResult(\n                \"s3-storage\",\n                HealthStatus.unhealthy,\n                \"Access denied\"\n            )\n        else:\n            return CheckResult(\n                \"s3-storage\",\n                HealthStatus.unhealthy,\n                str(e)\n            )\n    except Exception as e:\n        return CheckResult(\"s3-storage\", HealthStatus.unhealthy, str(e))\n\nhealth = Health()\nhealth.register(s3_bucket_check)\n</code></pre>"},{"location":"advanced/custom-checks/#3-elasticsearch-check","title":"3. Elasticsearch Check","text":"<pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nfrom elasticsearch import Elasticsearch\n\ndef elasticsearch_check() -&gt; CheckResult:\n    \"\"\"Check Elasticsearch cluster health\"\"\"\n    try:\n        es = Elasticsearch([\"http://localhost:9200\"])\n\n        # Get cluster health\n        health_info = es.cluster.health()\n        cluster_status = health_info['status']\n\n        if cluster_status == 'green':\n            return CheckResult(\"elasticsearch\", HealthStatus.healthy)\n        elif cluster_status == 'yellow':\n            return CheckResult(\n                \"elasticsearch\",\n                HealthStatus.degraded,\n                \"Cluster status: yellow\"\n            )\n        else:  # red\n            return CheckResult(\n                \"elasticsearch\",\n                HealthStatus.unhealthy,\n                \"Cluster status: red\"\n            )\n    except Exception as e:\n        return CheckResult(\"elasticsearch\", HealthStatus.unhealthy, str(e))\n\nhealth = Health()\nhealth.register(elasticsearch_check)\n</code></pre>"},{"location":"advanced/custom-checks/#4-smtp-email-service-check","title":"4. SMTP Email Service Check","text":"<pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport smtplib\n\ndef smtp_check() -&gt; CheckResult:\n    \"\"\"Check SMTP server connectivity\"\"\"\n    try:\n        server = smtplib.SMTP(\"smtp.gmail.com\", 587, timeout=3)\n        server.starttls()\n        server.quit()\n\n        return CheckResult(\"smtp\", HealthStatus.healthy)\n\n    except smtplib.SMTPException as e:\n        return CheckResult(\"smtp\", HealthStatus.unhealthy, f\"SMTP error: {e}\")\n    except Exception as e:\n        return CheckResult(\"smtp\", HealthStatus.unhealthy, str(e))\n\nhealth = Health()\nhealth.register(smtp_check)\n</code></pre>"},{"location":"advanced/custom-checks/#5-memory-usage-check","title":"5. Memory Usage Check","text":"<pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport psutil\n\ndef memory_check() -&gt; CheckResult:\n    \"\"\"Check system memory usage\"\"\"\n    try:\n        memory = psutil.virtual_memory()\n        percent_used = memory.percent\n\n        if percent_used &gt; 90:\n            return CheckResult(\n                \"memory\",\n                HealthStatus.unhealthy,\n                f\"Memory usage critical: {percent_used}%\"\n            )\n        elif percent_used &gt; 75:\n            return CheckResult(\n                \"memory\",\n                HealthStatus.degraded,\n                f\"Memory usage high: {percent_used}%\"\n            )\n        else:\n            return CheckResult(\n                \"memory\",\n                HealthStatus.healthy,\n                f\"Memory usage: {percent_used}%\"\n            )\n    except Exception as e:\n        return CheckResult(\"memory\", HealthStatus.unhealthy, str(e))\n\nhealth = Health()\nhealth.register(memory_check)\n</code></pre>"},{"location":"advanced/custom-checks/#6-websocket-connection-check","title":"6. WebSocket Connection Check","text":"<pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport websocket\n\ndef websocket_check() -&gt; CheckResult:\n    \"\"\"Check WebSocket server connectivity\"\"\"\n    try:\n        ws = websocket.create_connection(\n            \"ws://localhost:8080/ws\",\n            timeout=2\n        )\n\n        # Send ping\n        ws.send(\"ping\")\n        response = ws.recv()\n        ws.close()\n\n        if response == \"pong\":\n            return CheckResult(\"websocket\", HealthStatus.healthy)\n        else:\n            return CheckResult(\n                \"websocket\",\n                HealthStatus.degraded,\n                f\"Unexpected response: {response}\"\n            )\n    except Exception as e:\n        return CheckResult(\"websocket\", HealthStatus.unhealthy, str(e))\n\nhealth = Health()\nhealth.register(websocket_check)\n</code></pre>"},{"location":"advanced/custom-checks/#7-custom-database-query-check","title":"7. Custom Database Query Check","text":"<pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport psycopg2\n\ndef business_logic_check() -&gt; CheckResult:\n    \"\"\"Check if critical data exists\"\"\"\n    try:\n        conn = psycopg2.connect(\n            \"postgresql://user:pass@localhost/db\",\n            connect_timeout=2\n        )\n        cursor = conn.cursor()\n\n        # Check if admin user exists\n        cursor.execute(\"SELECT COUNT(*) FROM users WHERE role = 'admin'\")\n        admin_count = cursor.fetchone()[0]\n\n        cursor.close()\n        conn.close()\n\n        if admin_count &gt; 0:\n            return CheckResult(\"admin-users\", HealthStatus.healthy)\n        else:\n            return CheckResult(\n                \"admin-users\",\n                HealthStatus.unhealthy,\n                \"No admin users found\"\n            )\n    except Exception as e:\n        return CheckResult(\"admin-users\", HealthStatus.unhealthy, str(e))\n\nhealth = Health()\nhealth.register(business_logic_check)\n</code></pre>"},{"location":"advanced/custom-checks/#8-certificate-expiry-check","title":"8. Certificate Expiry Check","text":"<pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport ssl\nimport socket\nfrom datetime import datetime, timedelta\n\ndef ssl_certificate_check() -&gt; CheckResult:\n    \"\"\"Check SSL certificate expiry\"\"\"\n    try:\n        hostname = \"example.com\"\n        context = ssl.create_default_context()\n\n        with socket.create_connection((hostname, 443), timeout=2) as sock:\n            with context.wrap_socket(sock, server_hostname=hostname) as ssock:\n                cert = ssock.getpeercert()\n\n        # Parse expiry date\n        expiry_date = datetime.strptime(\n            cert['notAfter'],\n            '%b %d %H:%M:%S %Y %Z'\n        )\n        days_until_expiry = (expiry_date - datetime.now()).days\n\n        if days_until_expiry &lt; 7:\n            return CheckResult(\n                \"ssl-cert\",\n                HealthStatus.unhealthy,\n                f\"Certificate expires in {days_until_expiry} days\"\n            )\n        elif days_until_expiry &lt; 30:\n            return CheckResult(\n                \"ssl-cert\",\n                HealthStatus.degraded,\n                f\"Certificate expires in {days_until_expiry} days\"\n            )\n        else:\n            return CheckResult(\"ssl-cert\", HealthStatus.healthy)\n\n    except Exception as e:\n        return CheckResult(\"ssl-cert\", HealthStatus.unhealthy, str(e))\n\nhealth = Health()\nhealth.register(ssl_certificate_check)\n</code></pre>"},{"location":"advanced/custom-checks/#parameterized-custom-checks","title":"Parameterized Custom Checks","text":"<p>Create reusable check functions with parameters:</p> <pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport requests\nfrom typing import Callable\n\ndef create_http_check(\n    name: str,\n    url: str,\n    timeout: int = 2,\n    expected_status: int = 200\n) -&gt; Callable[[], CheckResult]:\n    \"\"\"Factory function to create HTTP health checks\"\"\"\n\n    def check() -&gt; CheckResult:\n        try:\n            response = requests.get(url, timeout=timeout)\n\n            if response.status_code == expected_status:\n                return CheckResult(name, HealthStatus.healthy)\n            else:\n                return CheckResult(\n                    name,\n                    HealthStatus.unhealthy,\n                    f\"Expected {expected_status}, got {response.status_code}\"\n                )\n        except Exception as e:\n            return CheckResult(name, HealthStatus.unhealthy, str(e))\n\n    return check\n\n# Create multiple checks using the factory\nhealth = Health()\n\nhealth.register(create_http_check(\n    \"api-users\",\n    \"https://api.example.com/users\"\n))\n\nhealth.register(create_http_check(\n    \"api-products\",\n    \"https://api.example.com/products\"\n))\n\nhealth.register(create_http_check(\n    \"admin-panel\",\n    \"https://admin.example.com\",\n    timeout=3\n))\n</code></pre>"},{"location":"advanced/custom-checks/#class-based-custom-checks","title":"Class-Based Custom Checks","text":"<p>Use classes for more complex checks:</p> <pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport requests\nfrom typing import Optional\n\nclass ApiHealthCheck:\n    \"\"\"Reusable API health check with state\"\"\"\n\n    def __init__(\n        self,\n        name: str,\n        url: str,\n        timeout: int = 2,\n        headers: Optional[dict] = None\n    ):\n        self.name = name\n        self.url = url\n        self.timeout = timeout\n        self.headers = headers or {}\n        self.last_check_time = None\n        self.failure_count = 0\n\n    def __call__(self) -&gt; CheckResult:\n        \"\"\"Make the class callable for health check\"\"\"\n        try:\n            response = requests.get(\n                self.url,\n                timeout=self.timeout,\n                headers=self.headers\n            )\n\n            if response.status_code == 200:\n                self.failure_count = 0\n                return CheckResult(self.name, HealthStatus.healthy)\n            else:\n                self.failure_count += 1\n                return CheckResult(\n                    self.name,\n                    HealthStatus.unhealthy,\n                    f\"HTTP {response.status_code} (failures: {self.failure_count})\"\n                )\n        except Exception as e:\n            self.failure_count += 1\n            return CheckResult(\n                self.name,\n                HealthStatus.unhealthy,\n                f\"{str(e)} (failures: {self.failure_count})\"\n            )\n\n# Usage\nhealth = Health()\n\napi_check = ApiHealthCheck(\n    \"payment-api\",\n    \"https://payment.example.com/health\",\n    headers={\"Authorization\": \"Bearer TOKEN\"}\n)\n\nhealth.register(api_check)\n</code></pre>"},{"location":"advanced/custom-checks/#async-custom-checks","title":"Async Custom Checks","text":"<p>For async operations (use with FastAPI):</p> <pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport asyncio\nimport aiohttp\n\nasync def async_api_check() -&gt; CheckResult:\n    \"\"\"Async HTTP check\"\"\"\n    try:\n        async with aiohttp.ClientSession() as session:\n            async with session.get(\n                \"https://api.example.com/status\",\n                timeout=aiohttp.ClientTimeout(total=2)\n            ) as response:\n                if response.status == 200:\n                    return CheckResult(\"async-api\", HealthStatus.healthy)\n                else:\n                    return CheckResult(\n                        \"async-api\",\n                        HealthStatus.unhealthy,\n                        f\"HTTP {response.status}\"\n                    )\n    except Exception as e:\n        return CheckResult(\"async-api\", HealthStatus.unhealthy, str(e))\n\n# Sync wrapper for healthcheckx\ndef sync_api_check() -&gt; CheckResult:\n    return asyncio.run(async_api_check())\n\nhealth = Health()\nhealth.register(sync_api_check)\n</code></pre>"},{"location":"advanced/custom-checks/#error-handling-best-practices","title":"Error Handling Best Practices","text":""},{"location":"advanced/custom-checks/#comprehensive-error-handling","title":"Comprehensive Error Handling","text":"<pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport logging\n\nlogger = logging.getLogger(__name__)\n\ndef robust_check() -&gt; CheckResult:\n    \"\"\"Health check with comprehensive error handling\"\"\"\n    check_name = \"my-service\"\n\n    try:\n        # Your check logic here\n        # ...\n\n        return CheckResult(check_name, HealthStatus.healthy)\n\n    except TimeoutError as e:\n        logger.warning(f\"{check_name} check timeout: {e}\")\n        return CheckResult(\n            check_name,\n            HealthStatus.unhealthy,\n            \"Timeout\"\n        )\n    except ConnectionError as e:\n        logger.error(f\"{check_name} connection failed: {e}\")\n        return CheckResult(\n            check_name,\n            HealthStatus.unhealthy,\n            \"Connection failed\"\n        )\n    except Exception as e:\n        logger.exception(f\"{check_name} unexpected error\")\n        return CheckResult(\n            check_name,\n            HealthStatus.unhealthy,\n            f\"Error: {type(e).__name__}\"\n        )\n\nhealth = Health()\nhealth.register(robust_check)\n</code></pre>"},{"location":"advanced/custom-checks/#testing-custom-checks","title":"Testing Custom Checks","text":"<p>Write unit tests for custom checks:</p> <pre><code>import unittest\nfrom healthcheckx import HealthStatus\n\nclass TestCustomChecks(unittest.TestCase):\n    def test_disk_space_healthy(self):\n        \"\"\"Test disk space check returns healthy when space available\"\"\"\n        result = disk_space_check()\n        self.assertEqual(result.name, \"disk-space\")\n        self.assertIn(result.status, [\n            HealthStatus.healthy,\n            HealthStatus.degraded,\n            HealthStatus.unhealthy\n        ])\n\n    def test_api_check_handles_timeout(self):\n        \"\"\"Test API check handles timeout gracefully\"\"\"\n        result = api_check_with_retry()\n        self.assertIsNotNone(result)\n        self.assertIsInstance(result.status, HealthStatus)\n\n    def test_check_result_structure(self):\n        \"\"\"Test CheckResult has required fields\"\"\"\n        result = custom_api_check()\n        self.assertIsNotNone(result.name)\n        self.assertIsNotNone(result.status)\n        self.assertIsInstance(result.duration_ms, (int, float, type(None)))\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>"},{"location":"advanced/custom-checks/#best-practices","title":"Best Practices","text":"<ol> <li>Always Return CheckResult - Never raise exceptions, always return a CheckResult</li> <li>Set Timeouts - Always use timeouts to prevent hanging checks</li> <li>Meaningful Names - Use descriptive names for check identification</li> <li>Clear Messages - Provide helpful error messages for troubleshooting</li> <li>Use Degraded Status - Distinguish between complete failure and degraded service</li> <li>Keep It Fast - Aim for checks to complete in under 2 seconds</li> <li>Log Failures - Log detailed errors for debugging</li> <li>Test Your Checks - Write unit tests for custom check logic</li> <li>Handle All Exceptions - Catch and handle all possible exceptions</li> <li>Don't Modify State - Health checks should be read-only operations</li> </ol>"},{"location":"advanced/custom-checks/#common-patterns","title":"Common Patterns","text":""},{"location":"advanced/custom-checks/#retry-pattern","title":"Retry Pattern","text":"<pre><code>def check_with_retry(max_retries: int = 3) -&gt; CheckResult:\n    for attempt in range(max_retries):\n        try:\n            # Check logic\n            return CheckResult(\"service\", HealthStatus.healthy)\n        except Exception as e:\n            if attempt == max_retries - 1:\n                return CheckResult(\"service\", HealthStatus.unhealthy, str(e))\n            time.sleep(0.5)\n</code></pre>"},{"location":"advanced/custom-checks/#circuit-breaker-pattern","title":"Circuit Breaker Pattern","text":"<pre><code>class CircuitBreakerCheck:\n    def __init__(self, threshold: int = 5):\n        self.failure_count = 0\n        self.threshold = threshold\n        self.is_open = False\n\n    def __call__(self) -&gt; CheckResult:\n        if self.is_open:\n            return CheckResult(\"service\", HealthStatus.unhealthy, \"Circuit open\")\n\n        try:\n            # Check logic\n            self.failure_count = 0\n            return CheckResult(\"service\", HealthStatus.healthy)\n        except Exception as e:\n            self.failure_count += 1\n            if self.failure_count &gt;= self.threshold:\n                self.is_open = True\n            return CheckResult(\"service\", HealthStatus.unhealthy, str(e))\n</code></pre>"},{"location":"advanced/custom-checks/#next-steps","title":"Next Steps","text":"<ul> <li>Multiple Instances - Check multiple instances of the same service</li> <li>Configuration - Configure timeouts and behavior</li> <li>Examples - More complete examples</li> </ul>"},{"location":"advanced/multiple-instances/","title":"Multiple Instances","text":"<p>Check multiple instances of the same service type with unique names and configurations.</p>"},{"location":"advanced/multiple-instances/#overview","title":"Overview","text":"<p>In production environments, you often need to monitor multiple instances of the same service:</p> <ul> <li>Multiple Redis instances (cache, sessions, rate limiting)</li> <li>Multiple databases (primary, replica, analytics)</li> <li>Multiple message queues (orders, notifications, analytics)</li> <li>Multiple API endpoints (different regions or services)</li> </ul> <p>healthcheckx makes this easy by allowing you to register multiple checks with unique names.</p>"},{"location":"advanced/multiple-instances/#basic-example","title":"Basic Example","text":"<pre><code>from healthcheckx import Health\n\nhealth = Health()\n\n# Multiple Redis instances\nhealth.redis_check(\"redis://redis-cache:6379\", name=\"redis-cache\") \\\n      .redis_check(\"redis://redis-sessions:6379\", name=\"redis-sessions\") \\\n      .redis_check(\"redis://redis-rate-limit:6379\", name=\"redis-rate-limit\")\n\n# Run all checks\nresults = health.run()\n\nfor result in results:\n    print(f\"{result.name}: {result.status.value}\")\n</code></pre> <p>Output: <pre><code>redis-cache: healthy\nredis-sessions: healthy\nredis-rate-limit: unhealthy\n</code></pre></p>"},{"location":"advanced/multiple-instances/#multiple-databases","title":"Multiple Databases","text":""},{"location":"advanced/multiple-instances/#postgresql-primary-and-replicas","title":"PostgreSQL Primary and Replicas","text":"<pre><code>from healthcheckx import Health\n\nhealth = Health()\n\n# Primary database\nhealth.postgresql_check(\n    \"postgresql://user:pass@primary:5432/db\",\n    name=\"postgres-primary\"\n)\n\n# Read replicas\nhealth.postgresql_check(\n    \"postgresql://user:pass@replica1:5432/db\",\n    name=\"postgres-replica-1\"\n)\n\nhealth.postgresql_check(\n    \"postgresql://user:pass@replica2:5432/db\",\n    name=\"postgres-replica-2\"\n)\n\n# Analytics database\nhealth.postgresql_check(\n    \"postgresql://user:pass@analytics:5432/analytics_db\",\n    name=\"postgres-analytics\"\n)\n\nresults = health.run()\n</code></pre>"},{"location":"advanced/multiple-instances/#multi-database-setup","title":"Multi-Database Setup","text":"<pre><code>from healthcheckx import Health\n\nhealth = Health()\n\n# Different database types\nhealth.postgresql_check(\n    \"postgresql://localhost/main_db\",\n    name=\"postgres-main\"\n)\n\nhealth.mysql_check(\n    \"mysql://localhost:3306/legacy_db\",\n    name=\"mysql-legacy\"\n)\n\nhealth.mongodb_check(\n    \"mongodb://localhost:27017/documents\",\n    name=\"mongodb-docs\"\n)\n\nhealth.redis_check(\n    \"redis://localhost:6379\",\n    name=\"redis-cache\"\n)\n\nresults = health.run()\n</code></pre>"},{"location":"advanced/multiple-instances/#environment-based-configuration","title":"Environment-Based Configuration","text":"<p>Configure multiple instances from environment variables:</p> <pre><code>from healthcheckx import Health\nimport os\n\ndef create_health():\n    health = Health()\n\n    # Primary services\n    if db_url := os.getenv(\"DATABASE_URL\"):\n        health.postgresql_check(db_url, name=\"database-primary\")\n\n    if redis_url := os.getenv(\"REDIS_URL\"):\n        health.redis_check(redis_url, name=\"redis-main\")\n\n    # Optional replica\n    if db_replica_url := os.getenv(\"DATABASE_REPLICA_URL\"):\n        health.postgresql_check(db_replica_url, name=\"database-replica\")\n\n    # Optional additional Redis\n    if redis_session_url := os.getenv(\"REDIS_SESSION_URL\"):\n        health.redis_check(redis_session_url, name=\"redis-sessions\")\n\n    if redis_cache_url := os.getenv(\"REDIS_CACHE_URL\"):\n        health.redis_check(redis_cache_url, name=\"redis-cache\")\n\n    # Message queues\n    if rabbitmq_url := os.getenv(\"RABBITMQ_URL\"):\n        health.rabbitmq_check(rabbitmq_url, name=\"rabbitmq-main\")\n\n    return health\n\nhealth = create_health()\n</code></pre>"},{"location":"advanced/multiple-instances/#dynamic-instance-registration","title":"Dynamic Instance Registration","text":"<p>Register instances dynamically from configuration:</p> <pre><code>from healthcheckx import Health\nfrom typing import List, Dict\n\ndef setup_redis_clusters(health: Health, clusters: List[Dict[str, str]]):\n    \"\"\"Register multiple Redis clusters\"\"\"\n    for cluster in clusters:\n        health.redis_check(\n            cluster['url'],\n            name=cluster['name']\n        )\n\ndef setup_databases(health: Health, databases: List[Dict[str, str]]):\n    \"\"\"Register multiple databases\"\"\"\n    for db in databases:\n        if db['type'] == 'postgresql':\n            health.postgresql_check(db['url'], name=db['name'])\n        elif db['type'] == 'mysql':\n            health.mysql_check(db['url'], name=db['name'])\n        elif db['type'] == 'mongodb':\n            health.mongodb_check(db['url'], name=db['name'])\n\n# Configuration\nredis_clusters = [\n    {\"name\": \"redis-cache-us-east\", \"url\": \"redis://cache-us-east:6379\"},\n    {\"name\": \"redis-cache-eu-west\", \"url\": \"redis://cache-eu-west:6379\"},\n    {\"name\": \"redis-sessions\", \"url\": \"redis://sessions:6379\"},\n]\n\ndatabases = [\n    {\"name\": \"postgres-primary\", \"type\": \"postgresql\", \"url\": \"postgresql://primary:5432/db\"},\n    {\"name\": \"postgres-replica\", \"type\": \"postgresql\", \"url\": \"postgresql://replica:5432/db\"},\n    {\"name\": \"mysql-analytics\", \"type\": \"mysql\", \"url\": \"mysql://analytics:3306/analytics\"},\n]\n\n# Setup health checks\nhealth = Health()\nsetup_redis_clusters(health, redis_clusters)\nsetup_databases(health, databases)\n\nresults = health.run()\n</code></pre>"},{"location":"advanced/multiple-instances/#grouped-checks","title":"Grouped Checks","text":"<p>Organize checks by purpose:</p> <pre><code>from healthcheckx import Health\nfrom typing import List\n\nclass HealthCheckGroups:\n    def __init__(self):\n        self.critical_health = Health()\n        self.cache_health = Health()\n        self.analytics_health = Health()\n\n    def setup_critical(self):\n        \"\"\"Critical services that must be available\"\"\"\n        self.critical_health.postgresql_check(\n            \"postgresql://localhost/main\",\n            name=\"database-primary\"\n        )\n        self.critical_health.redis_check(\n            \"redis://localhost:6379\",\n            name=\"redis-sessions\"\n        )\n\n    def setup_cache(self):\n        \"\"\"Cache services (degraded is acceptable)\"\"\"\n        self.cache_health.redis_check(\n            \"redis://cache1:6379\",\n            name=\"cache-region-1\"\n        )\n        self.cache_health.redis_check(\n            \"redis://cache2:6379\",\n            name=\"cache-region-2\"\n        )\n        self.cache_health.memcached_check(\n            \"memcached://mc1:11211\",\n            name=\"memcached-1\"\n        )\n\n    def setup_analytics(self):\n        \"\"\"Analytics services (optional)\"\"\"\n        self.analytics_health.mongodb_check(\n            \"mongodb://localhost:27017/analytics\",\n            name=\"mongodb-analytics\"\n        )\n        self.analytics_health.postgresql_check(\n            \"postgresql://localhost/analytics\",\n            name=\"postgres-analytics\"\n        )\n\n    def check_critical(self):\n        \"\"\"Check only critical services\"\"\"\n        return self.critical_health.run()\n\n    def check_all(self):\n        \"\"\"Check all services\"\"\"\n        return (\n            self.critical_health.run() +\n            self.cache_health.run() +\n            self.analytics_health.run()\n        )\n\n# Usage\ngroups = HealthCheckGroups()\ngroups.setup_critical()\ngroups.setup_cache()\ngroups.setup_analytics()\n\n# For Kubernetes liveness - only critical\ncritical_results = groups.check_critical()\n\n# For readiness - all services\nall_results = groups.check_all()\n</code></pre>"},{"location":"advanced/multiple-instances/#regional-deployments","title":"Regional Deployments","text":"<p>Check services across multiple regions:</p> <pre><code>from healthcheckx import Health\nfrom typing import Dict, List\n\nclass RegionalHealthChecks:\n    def __init__(self):\n        self.regions = {}\n\n    def add_region(self, region_name: str, services: Dict[str, str]):\n        \"\"\"Add health checks for a region\"\"\"\n        health = Health()\n\n        if 'redis' in services:\n            health.redis_check(services['redis'], name=f\"redis-{region_name}\")\n\n        if 'database' in services:\n            health.postgresql_check(\n                services['database'],\n                name=f\"db-{region_name}\"\n            )\n\n        if 'cache' in services:\n            health.memcached_check(\n                services['cache'],\n                name=f\"cache-{region_name}\"\n            )\n\n        self.regions[region_name] = health\n\n    def check_region(self, region_name: str):\n        \"\"\"Check specific region\"\"\"\n        if region_name in self.regions:\n            return self.regions[region_name].run()\n        return []\n\n    def check_all_regions(self):\n        \"\"\"Check all regions\"\"\"\n        all_results = []\n        for region_name, health in self.regions.items():\n            results = health.run()\n            all_results.extend(results)\n        return all_results\n\n# Setup\nregional_health = RegionalHealthChecks()\n\nregional_health.add_region(\"us-east-1\", {\n    \"redis\": \"redis://redis-us-east:6379\",\n    \"database\": \"postgresql://db-us-east:5432/app\",\n    \"cache\": \"memcached://cache-us-east:11211\"\n})\n\nregional_health.add_region(\"eu-west-1\", {\n    \"redis\": \"redis://redis-eu-west:6379\",\n    \"database\": \"postgresql://db-eu-west:5432/app\",\n    \"cache\": \"memcached://cache-eu-west:11211\"\n})\n\nregional_health.add_region(\"ap-south-1\", {\n    \"redis\": \"redis://redis-ap-south:6379\",\n    \"database\": \"postgresql://db-ap-south:5432/app\",\n})\n\n# Check all regions\nall_results = regional_health.check_all_regions()\n\n# Or check specific region\nus_east_results = regional_health.check_region(\"us-east-1\")\n</code></pre>"},{"location":"advanced/multiple-instances/#microservices-architecture","title":"Microservices Architecture","text":"<p>Check multiple backend services:</p> <pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport requests\n\ndef create_microservices_health():\n    health = Health()\n\n    # Shared infrastructure\n    health.postgresql_check(\n        \"postgresql://localhost/users\",\n        name=\"database-users\"\n    )\n    health.redis_check(\n        \"redis://localhost:6379\",\n        name=\"redis-cache\"\n    )\n    health.rabbitmq_check(\n        \"amqp://localhost:5672\",\n        name=\"message-queue\"\n    )\n\n    # Custom checks for each microservice\n    def user_service_check() -&gt; CheckResult:\n        try:\n            response = requests.get(\n                \"http://user-service:8001/health\",\n                timeout=2\n            )\n            if response.status_code == 200:\n                return CheckResult(\"user-service\", HealthStatus.healthy)\n            return CheckResult(\n                \"user-service\",\n                HealthStatus.unhealthy,\n                f\"HTTP {response.status_code}\"\n            )\n        except Exception as e:\n            return CheckResult(\"user-service\", HealthStatus.unhealthy, str(e))\n\n    def order_service_check() -&gt; CheckResult:\n        try:\n            response = requests.get(\n                \"http://order-service:8002/health\",\n                timeout=2\n            )\n            if response.status_code == 200:\n                return CheckResult(\"order-service\", HealthStatus.healthy)\n            return CheckResult(\n                \"order-service\",\n                HealthStatus.unhealthy,\n                f\"HTTP {response.status_code}\"\n            )\n        except Exception as e:\n            return CheckResult(\"order-service\", HealthStatus.unhealthy, str(e))\n\n    def payment_service_check() -&gt; CheckResult:\n        try:\n            response = requests.get(\n                \"http://payment-service:8003/health\",\n                timeout=2\n            )\n            if response.status_code == 200:\n                return CheckResult(\"payment-service\", HealthStatus.healthy)\n            return CheckResult(\n                \"payment-service\",\n                HealthStatus.unhealthy,\n                f\"HTTP {response.status_code}\"\n            )\n        except Exception as e:\n            return CheckResult(\"payment-service\", HealthStatus.unhealthy, str(e))\n\n    health.register(user_service_check)\n    health.register(order_service_check)\n    health.register(payment_service_check)\n\n    return health\n\nhealth = create_microservices_health()\n</code></pre>"},{"location":"advanced/multiple-instances/#filtering-results","title":"Filtering Results","text":"<p>Filter results by status or name:</p> <pre><code>from healthcheckx import Health, HealthStatus\n\nhealth = Health()\n\n# Register multiple checks\nhealth.redis_check(\"redis://cache1:6379\", name=\"redis-cache-1\") \\\n      .redis_check(\"redis://cache2:6379\", name=\"redis-cache-2\") \\\n      .postgresql_check(\"postgresql://localhost/db\", name=\"postgres\") \\\n      .mongodb_check(\"mongodb://localhost:27017\", name=\"mongodb\")\n\nresults = health.run()\n\n# Filter unhealthy services\nunhealthy = [r for r in results if r.status == HealthStatus.unhealthy]\nprint(f\"Unhealthy services: {[r.name for r in unhealthy]}\")\n\n# Filter by name pattern\nredis_results = [r for r in results if 'redis' in r.name]\nprint(f\"Redis checks: {[r.name for r in redis_results]}\")\n\n# Get specific check result\npostgres_result = next((r for r in results if r.name == \"postgres\"), None)\nif postgres_result:\n    print(f\"PostgreSQL: {postgres_result.status.value}\")\n</code></pre>"},{"location":"advanced/multiple-instances/#parallel-vs-sequential-execution","title":"Parallel vs Sequential Execution","text":"<p>All checks run in parallel by default for better performance:</p> <pre><code>from healthcheckx import Health\nimport time\n\nhealth = Health()\n\n# These all run in parallel (fast)\nhealth.redis_check(\"redis://redis1:6379\", name=\"redis-1\") \\\n      .redis_check(\"redis://redis2:6379\", name=\"redis-2\") \\\n      .redis_check(\"redis://redis3:6379\", name=\"redis-3\") \\\n      .postgresql_check(\"postgresql://db1:5432/db\", name=\"postgres-1\") \\\n      .postgresql_check(\"postgresql://db2:5432/db\", name=\"postgres-2\")\n\nstart = time.time()\nresults = health.run()\nduration = time.time() - start\n\nprint(f\"Checked {len(results)} services in {duration:.2f}s\")\n# Output: Checked 5 services in 0.15s (not 0.75s if sequential)\n</code></pre>"},{"location":"advanced/multiple-instances/#conditional-registration","title":"Conditional Registration","text":"<p>Register checks based on environment:</p> <pre><code>from healthcheckx import Health\nimport os\n\ndef create_health_checks():\n    health = Health()\n    environment = os.getenv(\"ENVIRONMENT\", \"development\")\n\n    # Always check primary database\n    health.postgresql_check(\n        os.getenv(\"DATABASE_URL\"),\n        name=\"database-primary\"\n    )\n\n    # Production: check replicas\n    if environment == \"production\":\n        if replica_url := os.getenv(\"DATABASE_REPLICA_URL\"):\n            health.postgresql_check(replica_url, name=\"database-replica\")\n\n        # Check multiple Redis instances\n        health.redis_check(\n            os.getenv(\"REDIS_CACHE_URL\"),\n            name=\"redis-cache\"\n        )\n        health.redis_check(\n            os.getenv(\"REDIS_SESSION_URL\"),\n            name=\"redis-sessions\"\n        )\n\n    # Development: single Redis\n    else:\n        health.redis_check(\n            os.getenv(\"REDIS_URL\", \"redis://localhost:6379\"),\n            name=\"redis\"\n        )\n\n    # Staging and Production: check message queue\n    if environment in [\"staging\", \"production\"]:\n        if rabbitmq_url := os.getenv(\"RABBITMQ_URL\"):\n            health.rabbitmq_check(rabbitmq_url, name=\"message-queue\")\n\n    return health\n\nhealth = create_health_checks()\n</code></pre>"},{"location":"advanced/multiple-instances/#response-organization","title":"Response Organization","text":"<p>Organize multiple check results:</p> <pre><code>from healthcheckx import Health, overall_status, HealthStatus\nfrom typing import Dict, List\n\nhealth = Health()\n\n# Register many checks\nhealth.redis_check(\"redis://cache:6379\", name=\"redis-cache\") \\\n      .redis_check(\"redis://sessions:6379\", name=\"redis-sessions\") \\\n      .postgresql_check(\"postgresql://primary:5432/db\", name=\"postgres-primary\") \\\n      .postgresql_check(\"postgresql://replica:5432/db\", name=\"postgres-replica\") \\\n      .mongodb_check(\"mongodb://localhost:27017\", name=\"mongodb\")\n\nresults = health.run()\n\n# Organize by service type\norganized = {\n    \"redis\": [],\n    \"postgresql\": [],\n    \"mongodb\": []\n}\n\nfor result in results:\n    if \"redis\" in result.name:\n        organized[\"redis\"].append(result)\n    elif \"postgres\" in result.name:\n        organized[\"postgresql\"].append(result)\n    elif \"mongodb\" in result.name:\n        organized[\"mongodb\"].append(result)\n\n# Create summary\nsummary = {\n    \"status\": overall_status(results).value,\n    \"services\": {\n        service_type: {\n            \"total\": len(checks),\n            \"healthy\": sum(1 for c in checks if c.status == HealthStatus.healthy),\n            \"unhealthy\": sum(1 for c in checks if c.status == HealthStatus.unhealthy),\n            \"checks\": [\n                {\n                    \"name\": c.name,\n                    \"status\": c.status.value,\n                    \"duration_ms\": c.duration_ms\n                }\n                for c in checks\n            ]\n        }\n        for service_type, checks in organized.items()\n    }\n}\n\nprint(summary)\n</code></pre>"},{"location":"advanced/multiple-instances/#best-practices","title":"Best Practices","text":"<ol> <li>Use Descriptive Names - Make names clear and unique: <code>redis-cache-us-east</code> not <code>redis1</code></li> <li>Group by Purpose - Separate critical, optional, and analytics checks</li> <li>Environment-Based - Register different checks for dev/staging/prod</li> <li>Consistent Naming - Use patterns like <code>{service}-{purpose}-{region}</code></li> <li>Filter Results - Process results by service type or status</li> <li>Monitor Performance - Track check duration for multiple instances</li> <li>Fail Gracefully - One failing instance shouldn't crash all checks</li> <li>Document Dependencies - Comment why each instance is needed</li> </ol>"},{"location":"advanced/multiple-instances/#common-patterns","title":"Common Patterns","text":""},{"location":"advanced/multiple-instances/#pattern-1-primary-replicas","title":"Pattern 1: Primary + Replicas","text":"<pre><code>health = Health()\nhealth.postgresql_check(primary_url, name=\"db-primary\")\nhealth.postgresql_check(replica_url, name=\"db-replica\")\n</code></pre>"},{"location":"advanced/multiple-instances/#pattern-2-multi-region","title":"Pattern 2: Multi-Region","text":"<pre><code>for region in [\"us-east\", \"eu-west\", \"ap-south\"]:\n    health.redis_check(f\"redis://{region}:6379\", name=f\"redis-{region}\")\n</code></pre>"},{"location":"advanced/multiple-instances/#pattern-3-service-mesh","title":"Pattern 3: Service Mesh","text":"<pre><code>for service in [\"auth\", \"orders\", \"payments\", \"notifications\"]:\n    health.register(create_service_check(service))\n</code></pre>"},{"location":"advanced/multiple-instances/#pattern-4-sharded-databases","title":"Pattern 4: Sharded Databases","text":"<pre><code>for shard_id in range(1, 5):\n    health.postgresql_check(\n        f\"postgresql://shard{shard_id}:5432/db\",\n        name=f\"postgres-shard-{shard_id}\"\n    )\n</code></pre>"},{"location":"advanced/multiple-instances/#next-steps","title":"Next Steps","text":"<ul> <li>Custom Health Checks - Create custom checks</li> <li>Configuration - Configure timeouts and behavior</li> <li>Examples - Complete working examples</li> </ul>"},{"location":"checks/cache/","title":"Cache Systems","text":"<p>Health checks for caching systems including Redis, KeyDB, and Memcached.</p>"},{"location":"checks/cache/#redis","title":"Redis","text":"<p>Redis is an in-memory data structure store used as a database, cache, and message broker.</p>"},{"location":"checks/cache/#basic-usage","title":"Basic Usage","text":"<pre><code>from healthcheckx import Health\n\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\")\n\nresults = health.run()\n</code></pre>"},{"location":"checks/cache/#with-authentication","title":"With Authentication","text":"<pre><code>health.redis_check(\"redis://username:password@localhost:6379/0\")\n</code></pre>"},{"location":"checks/cache/#custom-timeout","title":"Custom Timeout","text":"<pre><code>health.redis_check(\"redis://localhost:6379\", timeout=3)\n</code></pre>"},{"location":"checks/cache/#custom-name","title":"Custom Name","text":"<pre><code># Monitor multiple Redis instances\nhealth.redis_check(\"redis://primary:6379\", name=\"redis-primary\")\nhealth.redis_check(\"redis://cache:6379\", name=\"redis-cache\")\nhealth.redis_check(\"redis://sessions:6379\", name=\"redis-sessions\")\n</code></pre>"},{"location":"checks/cache/#connection-formats","title":"Connection Formats","text":"<pre><code># Basic\nhealth.redis_check(\"redis://localhost:6379\")\n\n# With database number\nhealth.redis_check(\"redis://localhost:6379/1\")\n\n# With authentication\nhealth.redis_check(\"redis://user:pass@localhost:6379\")\n\n# Redis Sentinel\nhealth.redis_check(\"redis://sentinel1:26379,sentinel2:26379/mymaster\")\n\n# Unix socket\nhealth.redis_check(\"redis:///var/run/redis.sock\")\n</code></pre>"},{"location":"checks/cache/#installation","title":"Installation","text":"<pre><code>pip install healthcheckx[redis]\n</code></pre>"},{"location":"checks/cache/#how-it-works","title":"How It Works","text":"<p>The Redis health check: 1. Connects to the Redis server using the provided URL 2. Executes a <code>PING</code> command 3. Returns <code>healthy</code> if ping succeeds 4. Returns <code>unhealthy</code> if connection fails or times out</p>"},{"location":"checks/cache/#keydb","title":"KeyDB","text":"<p>KeyDB is a Redis-compatible in-memory database with enhanced performance features.</p>"},{"location":"checks/cache/#basic-usage_1","title":"Basic Usage","text":"<pre><code>from healthcheckx import Health\n\nhealth = Health()\nhealth.keydb_check(\"keydb://localhost:6379\")\n\nresults = health.run()\n</code></pre>"},{"location":"checks/cache/#connection-formats_1","title":"Connection Formats","text":"<pre><code># Using keydb:// scheme\nhealth.keydb_check(\"keydb://localhost:6379\")\n\n# Using redis:// scheme (also works)\nhealth.keydb_check(\"redis://localhost:6379\")\n\n# With authentication\nhealth.keydb_check(\"keydb://user:password@localhost:6379/0\")\n</code></pre>"},{"location":"checks/cache/#multiple-keydb-instances","title":"Multiple KeyDB Instances","text":"<pre><code>health.keydb_check(\"keydb://node1:6379\", name=\"keydb-node1\")\nhealth.keydb_check(\"keydb://node2:6379\", name=\"keydb-node2\")\nhealth.keydb_check(\"keydb://node3:6379\", name=\"keydb-node3\")\n</code></pre>"},{"location":"checks/cache/#installation_1","title":"Installation","text":"<pre><code># KeyDB uses the same client as Redis\npip install healthcheckx[redis]\n</code></pre>"},{"location":"checks/cache/#notes","title":"Notes","text":"<ul> <li>KeyDB is 100% Redis-compatible</li> <li>Uses the same <code>redis</code> Python library</li> <li>Supports all Redis connection features</li> <li>Can use either <code>keydb://</code> or <code>redis://</code> URL schemes</li> </ul>"},{"location":"checks/cache/#memcached","title":"Memcached","text":"<p>Memcached is a high-performance, distributed memory object caching system.</p>"},{"location":"checks/cache/#basic-usage_2","title":"Basic Usage","text":"<pre><code>from healthcheckx import Health\n\nhealth = Health()\nhealth.memcached_check()  # Defaults to localhost:11211\n\nresults = health.run()\n</code></pre>"},{"location":"checks/cache/#custom-host-and-port","title":"Custom Host and Port","text":"<pre><code>health.memcached_check(host=\"cache.example.com\", port=11211)\n</code></pre>"},{"location":"checks/cache/#with-timeout","title":"With Timeout","text":"<pre><code>health.memcached_check(\n    host=\"localhost\",\n    port=11211,\n    timeout=3\n)\n</code></pre>"},{"location":"checks/cache/#multiple-memcached-servers","title":"Multiple Memcached Servers","text":"<pre><code>health.memcached_check(host=\"cache1.local\", port=11211, name=\"memcached-1\")\nhealth.memcached_check(host=\"cache2.local\", port=11211, name=\"memcached-2\")\nhealth.memcached_check(host=\"cache3.local\", port=11211, name=\"memcached-3\")\n</code></pre>"},{"location":"checks/cache/#complete-example","title":"Complete Example","text":"<pre><code>from healthcheckx import Health\n\nhealth = Health()\n\n# Single instance\nhealth.memcached_check()\n\n# Multiple instances with custom configuration\nhealth.memcached_check(\n    host=\"cache-primary.example.com\",\n    port=11211,\n    timeout=2,\n    name=\"cache-primary\"\n)\n\nhealth.memcached_check(\n    host=\"cache-secondary.example.com\",\n    port=11211,\n    timeout=2,\n    name=\"cache-secondary\"\n)\n\nresults = health.run()\n\nfor result in results:\n    print(f\"{result.name}: {result.status} ({result.duration_ms:.2f}ms)\")\n</code></pre>"},{"location":"checks/cache/#installation_2","title":"Installation","text":"<pre><code>pip install healthcheckx[memcached]\n</code></pre>"},{"location":"checks/cache/#how-it-works_1","title":"How It Works","text":"<p>The Memcached health check: 1. Connects to the Memcached server 2. Executes a <code>stats</code> command 3. Returns <code>healthy</code> if stats are retrieved successfully 4. Returns <code>unhealthy</code> if connection fails or times out</p>"},{"location":"checks/cache/#comparison","title":"Comparison","text":"Feature Redis KeyDB Memcached URL-based config \u2705 Yes \u2705 Yes \u274c No (host/port) Authentication \u2705 Yes \u2705 Yes \u274c No Default port 6379 6379 11211 Check method PING PING stats Installation <code>[redis]</code> <code>[redis]</code> <code>[memcached]</code>"},{"location":"checks/cache/#best-practices","title":"Best Practices","text":"<ol> <li>Set appropriate timeouts - Cache checks should be fast (1-3 seconds)</li> <li>Use named checks - When monitoring multiple instances, always use the <code>name</code> parameter</li> <li>Monitor read replicas - Check both primary and replica instances</li> <li>Connection pooling - healthcheckx creates new connections for each check</li> <li>Production monitoring - Combine with metrics to track check duration over time</li> </ol>"},{"location":"checks/cache/#common-issues","title":"Common Issues","text":""},{"location":"checks/cache/#connection-refused","title":"Connection Refused","text":"<pre><code># Error: Connection refused\n# Solution: Verify service is running and accessible\nhealth.redis_check(\"redis://localhost:6379\", timeout=1)\n</code></pre>"},{"location":"checks/cache/#authentication-failed","title":"Authentication Failed","text":"<pre><code># Error: Authentication required / Invalid password\n# Solution: Check credentials in connection string\nhealth.redis_check(\"redis://user:correct_password@localhost:6379\")\n</code></pre>"},{"location":"checks/cache/#timeout","title":"Timeout","text":"<pre><code># Error: Connection timeout\n# Solution: Increase timeout or check network connectivity\nhealth.redis_check(\"redis://slow-server:6379\", timeout=5)\n</code></pre>"},{"location":"checks/cache/#next-steps","title":"Next Steps","text":"<ul> <li>Message Queue Checks - RabbitMQ health checks</li> <li>Relational DB Checks - Database health checks</li> <li>Custom Checks - Create your own cache checks</li> </ul>"},{"location":"checks/message-queue/","title":"Message Queues","text":"<p>Health checks for message queue systems.</p>"},{"location":"checks/message-queue/#rabbitmq","title":"RabbitMQ","text":"<p>RabbitMQ is a robust message broker supporting multiple messaging protocols.</p>"},{"location":"checks/message-queue/#basic-usage","title":"Basic Usage","text":"<pre><code>from healthcheckx import Health\n\nhealth = Health()\nhealth.rabbitmq_check(\"amqp://guest:guest@localhost:5672\")\n\nresults = health.run()\n</code></pre>"},{"location":"checks/message-queue/#connection-formats","title":"Connection Formats","text":"<pre><code># Basic with default credentials\nhealth.rabbitmq_check(\"amqp://guest:guest@localhost:5672\")\n\n# With custom credentials\nhealth.rabbitmq_check(\"amqp://myuser:mypassword@rabbitmq.example.com:5672\")\n\n# With virtual host\nhealth.rabbitmq_check(\"amqp://user:pass@localhost:5672/my_vhost\")\n\n# With SSL/TLS\nhealth.rabbitmq_check(\"amqps://user:pass@secure.example.com:5671\")\n</code></pre>"},{"location":"checks/message-queue/#custom-timeout","title":"Custom Timeout","text":"<pre><code>health.rabbitmq_check(\n    \"amqp://guest:guest@localhost:5672\",\n    timeout=3\n)\n</code></pre>"},{"location":"checks/message-queue/#multiple-rabbitmq-instances","title":"Multiple RabbitMQ Instances","text":"<pre><code>health.rabbitmq_check(\n    \"amqp://user:pass@primary:5672\",\n    name=\"rabbitmq-primary\"\n)\n\nhealth.rabbitmq_check(\n    \"amqp://user:pass@secondary:5672\",\n    name=\"rabbitmq-secondary\"\n)\n</code></pre>"},{"location":"checks/message-queue/#complete-example","title":"Complete Example","text":"<pre><code>from healthcheckx import Health, overall_status\n\nhealth = Health()\n\n# Production setup\nhealth.rabbitmq_check(\n    \"amqp://app_user:secure_pass@rabbitmq-prod.example.com:5672/production\",\n    timeout=3,\n    name=\"rabbitmq-prod\"\n)\n\n# Development setup\nhealth.rabbitmq_check(\n    \"amqp://guest:guest@localhost:5672\",\n    timeout=2,\n    name=\"rabbitmq-dev\"\n)\n\nresults = health.run()\nstatus = overall_status(results)\n\nfor result in results:\n    print(f\"{result.name}: {result.status} ({result.duration_ms:.2f}ms)\")\n    if result.message:\n        print(f\"  Error: {result.message}\")\n\nprint(f\"\\nOverall Status: {status}\")\n</code></pre>"},{"location":"checks/message-queue/#installation","title":"Installation","text":"<pre><code>pip install healthcheckx[rabbitmq]\n</code></pre>"},{"location":"checks/message-queue/#how-it-works","title":"How It Works","text":"<p>The RabbitMQ health check: 1. Connects to the RabbitMQ server using the AMQP protocol 2. Opens a connection and channel 3. Verifies the connection is active 4. Closes the connection cleanly 5. Returns <code>healthy</code> if all steps succeed 6. Returns <code>unhealthy</code> if connection fails or times out</p>"},{"location":"checks/message-queue/#parameters","title":"Parameters","text":"<ul> <li><code>amqp_url</code> (str): AMQP connection URL</li> <li>Format: <code>amqp://username:password@host:port/vhost</code></li> <li> <p>Default port: 5672 (5671 for amqps)</p> </li> <li> <p><code>timeout</code> (int, optional): Connection timeout in seconds</p> </li> <li>Default: 2</li> <li> <p>Recommended: 2-5 seconds</p> </li> <li> <p><code>name</code> (str, optional): Custom name for the check</p> </li> <li>Default: \"rabbitmq\"</li> <li>Use for multiple instances</li> </ul>"},{"location":"checks/message-queue/#environment-variables-example","title":"Environment Variables Example","text":"<pre><code>import os\nfrom healthcheckx import Health\n\nhealth = Health()\n\nrabbitmq_url = os.getenv(\"RABBITMQ_URL\", \"amqp://guest:guest@localhost:5672\")\nhealth.rabbitmq_check(rabbitmq_url)\n\nresults = health.run()\n</code></pre>"},{"location":"checks/message-queue/#best-practices","title":"Best Practices","text":"<ol> <li>Use specific virtual hosts - Don't use the default <code>/</code> vhost in production</li> <li>Create dedicated health check users - Use limited-privilege users for health checks</li> <li>Set appropriate timeouts - Message queue checks should be fast (2-3 seconds)</li> <li>Monitor all nodes - In a cluster, check each node separately</li> <li>Check both publishers and consumers - Health check verifies connection, not message flow</li> </ol>"},{"location":"checks/message-queue/#common-issues","title":"Common Issues","text":""},{"location":"checks/message-queue/#authentication-failed","title":"Authentication Failed","text":"<pre><code>Error: Authentication failed\n</code></pre> <p>Solution: Verify username and password in the connection URL</p> <pre><code># Correct format\nhealth.rabbitmq_check(\"amqp://correct_user:correct_pass@localhost:5672\")\n</code></pre>"},{"location":"checks/message-queue/#connection-refused","title":"Connection Refused","text":"<pre><code>Error: Connection refused\n</code></pre> <p>Solution:  - Verify RabbitMQ is running - Check firewall rules - Verify the port (default: 5672)</p> <pre><code># Check if RabbitMQ is running\nrabbitmqctl status\n</code></pre>"},{"location":"checks/message-queue/#virtual-host-not-found","title":"Virtual Host Not Found","text":"<pre><code>Error: Virtual host '/my_vhost' not found\n</code></pre> <p>Solution: Create the virtual host or use an existing one</p> <pre><code># Create virtual host\nrabbitmqctl add_vhost /my_vhost\nrabbitmqctl set_permissions -p /my_vhost myuser \".*\" \".*\" \".*\"\n</code></pre>"},{"location":"checks/message-queue/#timeout","title":"Timeout","text":"<pre><code>Error: Connection timeout\n</code></pre> <p>Solution: Increase timeout or check network connectivity</p> <pre><code>health.rabbitmq_check(\n    \"amqp://user:pass@remote:5672\",\n    timeout=5  # Increased timeout\n)\n</code></pre>"},{"location":"checks/message-queue/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"checks/message-queue/#with-management-plugin","title":"With Management Plugin","text":"<p>If you have the RabbitMQ management plugin, you can also create HTTP-based health checks:</p> <pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nimport requests\n\ndef rabbitmq_management_check():\n    \"\"\"Check RabbitMQ via management API\"\"\"\n    try:\n        response = requests.get(\n            \"http://localhost:15672/api/healthchecks/node\",\n            auth=(\"guest\", \"guest\"),\n            timeout=2\n        )\n        if response.status_code == 200:\n            return CheckResult(\"rabbitmq-mgmt\", HealthStatus.healthy)\n        else:\n            return CheckResult(\n                \"rabbitmq-mgmt\",\n                HealthStatus.unhealthy,\n                f\"HTTP {response.status_code}\"\n            )\n    except Exception as e:\n        return CheckResult(\"rabbitmq-mgmt\", HealthStatus.unhealthy, str(e))\n\nhealth = Health()\nhealth.register(rabbitmq_management_check)\nhealth.rabbitmq_check(\"amqp://guest:guest@localhost:5672\")\n\nresults = health.run()\n</code></pre>"},{"location":"checks/message-queue/#cluster-monitoring","title":"Cluster Monitoring","text":"<p>Monitor all nodes in a RabbitMQ cluster:</p> <pre><code>from healthcheckx import Health\n\nhealth = Health()\n\ncluster_nodes = [\n    (\"amqp://user:pass@node1:5672\", \"rabbitmq-node1\"),\n    (\"amqp://user:pass@node2:5672\", \"rabbitmq-node2\"),\n    (\"amqp://user:pass@node3:5672\", \"rabbitmq-node3\"),\n]\n\nfor url, name in cluster_nodes:\n    health.rabbitmq_check(url, name=name)\n\nresults = health.run()\n\n# Check cluster health\nhealthy_nodes = sum(1 for r in results if r.status == \"healthy\")\ntotal_nodes = len(results)\n\nprint(f\"Cluster Status: {healthy_nodes}/{total_nodes} nodes healthy\")\n</code></pre>"},{"location":"checks/message-queue/#docker-compose-example","title":"Docker Compose Example","text":"<pre><code>version: '3.8'\n\nservices:\n  rabbitmq:\n    image: rabbitmq:3-management\n    ports:\n      - \"5672:5672\"\n      - \"15672:15672\"\n    environment:\n      RABBITMQ_DEFAULT_USER: myuser\n      RABBITMQ_DEFAULT_PASS: mypassword\n    healthcheck:\n      test: rabbitmq-diagnostics -q ping\n      interval: 30s\n      timeout: 10s\n      retries: 3\n</code></pre> <p>Python health check for this setup:</p> <pre><code>health.rabbitmq_check(\"amqp://myuser:mypassword@localhost:5672\")\n</code></pre>"},{"location":"checks/message-queue/#next-steps","title":"Next Steps","text":"<ul> <li>Relational Database Checks - Database health checks</li> <li>NoSQL Checks - NoSQL database health checks</li> <li>Custom Checks - Create custom message queue checks</li> </ul>"},{"location":"checks/nosql/","title":"NoSQL Databases","text":"<p>Health checks for NoSQL database systems.</p>"},{"location":"checks/nosql/#mongodb","title":"MongoDB","text":"<p>MongoDB is a document-oriented NoSQL database.</p>"},{"location":"checks/nosql/#basic-usage","title":"Basic Usage","text":"<pre><code>from healthcheckx import Health\n\nhealth = Health()\nhealth.mongodb_check(\"mongodb://localhost:27017\")\n\nresults = health.run()\n</code></pre>"},{"location":"checks/nosql/#connection-formats","title":"Connection Formats","text":"<pre><code># Local MongoDB\nhealth.mongodb_check(\"mongodb://localhost:27017\")\n\n# With database\nhealth.mongodb_check(\"mongodb://localhost:27017/mydb\")\n\n# With authentication\nhealth.mongodb_check(\"mongodb://user:password@localhost:27017/mydb\")\n\n# MongoDB Atlas (Cloud)\nhealth.mongodb_check(\"mongodb+srv://user:pass@cluster.mongodb.net/mydb\")\n\n# Replica Set\nhealth.mongodb_check(\"mongodb://host1:27017,host2:27017,host3:27017/?replicaSet=myReplicaSet\")\n\n# With options\nhealth.mongodb_check(\"mongodb://localhost:27017/mydb?authSource=admin&amp;retryWrites=true\")\n</code></pre>"},{"location":"checks/nosql/#custom-timeout","title":"Custom Timeout","text":"<pre><code>health.mongodb_check(\n    \"mongodb://localhost:27017\",\n    timeout=3\n)\n</code></pre>"},{"location":"checks/nosql/#custom-name","title":"Custom Name","text":"<pre><code># Multiple MongoDB instances\nhealth.mongodb_check(\n    \"mongodb://primary:27017\",\n    name=\"mongo-primary\"\n)\n\nhealth.mongodb_check(\n    \"mongodb://secondary:27017\",\n    name=\"mongo-secondary\"\n)\n</code></pre>"},{"location":"checks/nosql/#installation","title":"Installation","text":"<pre><code>pip install healthcheckx[mongodb]\n</code></pre>"},{"location":"checks/nosql/#how-it-works","title":"How It Works","text":"<p>The MongoDB health check: 1. Creates a MongoClient with specified timeout 2. Executes <code>ping</code> command on admin database 3. Closes the connection 4. Returns <code>healthy</code> if ping succeeds 5. Returns <code>unhealthy</code> if connection fails or times out</p>"},{"location":"checks/nosql/#complete-example","title":"Complete Example","text":"<pre><code>from healthcheckx import Health, overall_status\nimport os\n\nhealth = Health()\n\n# Production cluster\nhealth.mongodb_check(\n    os.getenv(\"MONGO_PROD_URL\", \"mongodb://prod-cluster:27017/production\"),\n    timeout=3,\n    name=\"mongo-prod\"\n)\n\n# Analytics database\nhealth.mongodb_check(\n    os.getenv(\"MONGO_ANALYTICS_URL\", \"mongodb://analytics:27017/analytics\"),\n    timeout=3,\n    name=\"mongo-analytics\"\n)\n\n# Local development\nhealth.mongodb_check(\n    \"mongodb://localhost:27017/dev\",\n    timeout=2,\n    name=\"mongo-dev\"\n)\n\nresults = health.run()\nstatus = overall_status(results)\n\nprint(f\"MongoDB Health Status: {status}\\n\")\nfor result in results:\n    status_emoji = \"\u2705\" if result.status == \"healthy\" else \"\u274c\"\n    print(f\"{status_emoji} {result.name}: {result.status} ({result.duration_ms:.2f}ms)\")\n    if result.message:\n        print(f\"   Error: {result.message}\")\n</code></pre>"},{"location":"checks/nosql/#mongodb-atlas-cloud-example","title":"MongoDB Atlas (Cloud) Example","text":"<pre><code>from healthcheckx import Health\n\n# Atlas connection string\natlas_uri = \"mongodb+srv://username:password@cluster0.mongodb.net/mydb?retryWrites=true&amp;w=majority\"\n\nhealth = Health()\nhealth.mongodb_check(atlas_uri, timeout=5, name=\"mongodb-atlas\")\n\nresults = health.run()\n</code></pre>"},{"location":"checks/nosql/#replica-set-monitoring","title":"Replica Set Monitoring","text":"<p>Monitor all members of a replica set:</p> <pre><code>from healthcheckx import Health\n\nhealth = Health()\n\nreplica_set_members = [\n    (\"mongodb://primary:27017\", \"mongo-primary\"),\n    (\"mongodb://secondary1:27017\", \"mongo-secondary1\"),\n    (\"mongodb://secondary2:27017\", \"mongo-secondary2\"),\n]\n\nfor uri, name in replica_set_members:\n    health.mongodb_check(uri, timeout=3, name=name)\n\nresults = health.run()\n\n# Check replica set health\nhealthy_members = sum(1 for r in results if r.status == \"healthy\")\ntotal_members = len(results)\n\nprint(f\"Replica Set: {healthy_members}/{total_members} members healthy\")\n</code></pre>"},{"location":"checks/nosql/#connection-string-options","title":"Connection String Options","text":"<p>Common MongoDB connection string options:</p> <pre><code># Authentication database\nhealth.mongodb_check(\"mongodb://user:pass@host/mydb?authSource=admin\")\n\n# SSL/TLS\nhealth.mongodb_check(\"mongodb://host/db?ssl=true&amp;tlsAllowInvalidCertificates=true\")\n\n# Read preference\nhealth.mongodb_check(\"mongodb://host/db?readPreference=secondary\")\n\n# Write concern\nhealth.mongodb_check(\"mongodb://host/db?w=majority\")\n\n# Retry writes\nhealth.mongodb_check(\"mongodb://host/db?retryWrites=true\")\n</code></pre>"},{"location":"checks/nosql/#best-practices","title":"Best Practices","text":""},{"location":"checks/nosql/#1-set-appropriate-timeouts","title":"1. Set Appropriate Timeouts","text":"<pre><code># Local MongoDB\nhealth.mongodb_check(\"mongodb://localhost:27017\", timeout=2)\n\n# Remote/Cloud MongoDB\nhealth.mongodb_check(\"mongodb+srv://cluster.mongodb.net/db\", timeout=5)\n</code></pre>"},{"location":"checks/nosql/#2-monitor-all-replica-set-members","title":"2. Monitor All Replica Set Members","text":"<pre><code># Don't just check the connection string\n# Check each member individually\nfor member in replica_set_members:\n    health.mongodb_check(member, name=f\"mongo-{member}\")\n</code></pre>"},{"location":"checks/nosql/#3-use-read-only-operations","title":"3. Use Read-Only Operations","text":"<p>Health checks only perform ping operations and don't modify data.</p>"},{"location":"checks/nosql/#4-authentication","title":"4. Authentication","text":"<p>Always use authentication in production:</p> <pre><code># \u274c Not recommended for production\nhealth.mongodb_check(\"mongodb://localhost:27017/mydb\")\n\n# \u2705 Recommended\nhealth.mongodb_check(\"mongodb://app_user:secure_pass@localhost:27017/mydb?authSource=admin\")\n</code></pre>"},{"location":"checks/nosql/#5-environment-variables","title":"5. Environment Variables","text":"<pre><code>import os\n\nmongo_url = os.getenv(\"MONGODB_URL\", \"mongodb://localhost:27017/dev\")\nhealth.mongodb_check(mongo_url)\n</code></pre>"},{"location":"checks/nosql/#common-issues","title":"Common Issues","text":""},{"location":"checks/nosql/#connection-refused","title":"Connection Refused","text":"<pre><code>Error: Connection refused\n</code></pre> <p>Solutions: - Verify MongoDB is running: <code>systemctl status mongod</code> - Check port (default: 27017) - Verify firewall rules</p>"},{"location":"checks/nosql/#authentication-failed","title":"Authentication Failed","text":"<pre><code>Error: Authentication failed\n</code></pre> <p>Solutions: - Verify username and password - Check authentication database: <code>?authSource=admin</code> - Verify user permissions</p> <pre><code>// In MongoDB shell\nuse admin\ndb.createUser({\n  user: \"myuser\",\n  pwd: \"mypassword\",\n  roles: [ { role: \"readWrite\", db: \"mydb\" } ]\n})\n</code></pre>"},{"location":"checks/nosql/#server-selection-timeout","title":"Server Selection Timeout","text":"<pre><code>Error: Server selection timeout\n</code></pre> <p>Solutions: - Increase timeout - Check network connectivity - Verify MongoDB is accepting connections</p> <pre><code>health.mongodb_check(\n    \"mongodb://remote-host:27017\",\n    timeout=10  # Increased timeout\n)\n</code></pre>"},{"location":"checks/nosql/#ssltls-errors","title":"SSL/TLS Errors","text":"<pre><code>Error: SSL handshake failed\n</code></pre> <p>Solutions: <pre><code># Allow invalid certificates (development only)\nhealth.mongodb_check(\"mongodb://host/db?ssl=true&amp;tlsAllowInvalidCertificates=true\")\n\n# Specify CA file\nhealth.mongodb_check(\"mongodb://host/db?ssl=true&amp;tlsCAFile=/path/to/ca.pem\")\n</code></pre></p>"},{"location":"checks/nosql/#docker-example","title":"Docker Example","text":""},{"location":"checks/nosql/#docker-compose","title":"Docker Compose","text":"<pre><code>version: '3.8'\n\nservices:\n  mongodb:\n    image: mongo:7\n    ports:\n      - \"27017:27017\"\n    environment:\n      MONGO_INITDB_ROOT_USERNAME: root\n      MONGO_INITDB_ROOT_PASSWORD: rootpassword\n      MONGO_INITDB_DATABASE: mydb\n    volumes:\n      - mongo-data:/data/db\n\nvolumes:\n  mongo-data:\n</code></pre>"},{"location":"checks/nosql/#python-health-check","title":"Python Health Check","text":"<pre><code>health.mongodb_check(\n    \"mongodb://root:rootpassword@localhost:27017/mydb?authSource=admin\"\n)\n</code></pre>"},{"location":"checks/nosql/#advanced-custom-mongodb-check","title":"Advanced: Custom MongoDB Check","text":"<p>For more detailed MongoDB health information:</p> <pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nfrom pymongo import MongoClient\n\ndef detailed_mongodb_check():\n    \"\"\"Check MongoDB with server status\"\"\"\n    try:\n        client = MongoClient(\n            \"mongodb://localhost:27017\",\n            serverSelectionTimeoutMS=3000\n        )\n\n        # Get server status\n        status = client.admin.command(\"serverStatus\")\n\n        # Check connections\n        current_connections = status['connections']['current']\n        available_connections = status['connections']['available']\n\n        client.close()\n\n        # Determine health\n        if available_connections &lt; 10:\n            return CheckResult(\n                \"mongodb-detailed\",\n                HealthStatus.degraded,\n                f\"Low available connections: {available_connections}\"\n            )\n        else:\n            return CheckResult(\n                \"mongodb-detailed\",\n                HealthStatus.healthy,\n                f\"Connections: {current_connections}/{current_connections + available_connections}\"\n            )\n    except Exception as e:\n        return CheckResult(\n            \"mongodb-detailed\",\n            HealthStatus.unhealthy,\n            str(e)\n        )\n\nhealth = Health()\nhealth.register(detailed_mongodb_check)\nhealth.mongodb_check(\"mongodb://localhost:27017\")\n\nresults = health.run()\n</code></pre>"},{"location":"checks/nosql/#performance-monitoring","title":"Performance Monitoring","text":"<p>Track MongoDB health check duration:</p> <pre><code>from healthcheckx import Health\nimport time\n\nhealth = Health()\nhealth.mongodb_check(\"mongodb://localhost:27017\")\n\n# Run multiple times to get average\ndurations = []\nfor _ in range(5):\n    results = health.run()\n    durations.append(results[0].duration_ms)\n    time.sleep(1)\n\navg_duration = sum(durations) / len(durations)\nprint(f\"Average MongoDB health check duration: {avg_duration:.2f}ms\")\n</code></pre>"},{"location":"checks/nosql/#next-steps","title":"Next Steps","text":"<ul> <li>Framework Integration - Integrate with web frameworks</li> <li>Custom Checks - Create advanced custom checks</li> <li>Multiple Instances - Monitor multiple MongoDB clusters</li> </ul>"},{"location":"checks/relational-db/","title":"Relational Databases","text":"<p>Health checks for relational database systems including PostgreSQL, MySQL, SQLite, Oracle, and MS SQL Server.</p>"},{"location":"checks/relational-db/#postgresql","title":"PostgreSQL","text":""},{"location":"checks/relational-db/#basic-usage","title":"Basic Usage","text":"<pre><code>from healthcheckx import Health\n\nhealth = Health()\nhealth.postgresql_check(\"postgresql://user:password@localhost:5432/mydb\")\n\nresults = health.run()\n</code></pre>"},{"location":"checks/relational-db/#connection-formats","title":"Connection Formats","text":"<pre><code># Basic\nhealth.postgresql_check(\"postgresql://localhost/mydb\")\n\n# With credentials\nhealth.postgresql_check(\"postgresql://user:pass@localhost:5432/mydb\")\n\n# With schema\nhealth.postgresql_check(\"postgresql://user:pass@localhost/mydb?options=-csearch_path=myschema\")\n\n# Unix socket\nhealth.postgresql_check(\"postgresql:///mydb?host=/var/run/postgresql\")\n</code></pre>"},{"location":"checks/relational-db/#installation","title":"Installation","text":"<pre><code>pip install healthcheckx[postgresql]\n</code></pre>"},{"location":"checks/relational-db/#mysql","title":"MySQL","text":""},{"location":"checks/relational-db/#basic-usage_1","title":"Basic Usage","text":"<pre><code>health.mysql_check(\"mysql://root:password@localhost:3306/mydb\")\n</code></pre>"},{"location":"checks/relational-db/#connection-formats_1","title":"Connection Formats","text":"<pre><code># Basic\nhealth.mysql_check(\"mysql://localhost:3306/mydb\")\n\n# With credentials\nhealth.mysql_check(\"mysql://user:pass@localhost:3306/mydb\")\n\n# Custom charset\nhealth.mysql_check(\"mysql://user:pass@localhost:3306/mydb?charset=utf8mb4\")\n</code></pre>"},{"location":"checks/relational-db/#multiple-databases","title":"Multiple Databases","text":"<pre><code>health.mysql_check(\"mysql://user:pass@localhost:3306/users\", name=\"mysql-users\")\nhealth.mysql_check(\"mysql://user:pass@localhost:3306/orders\", name=\"mysql-orders\")\n</code></pre>"},{"location":"checks/relational-db/#installation_1","title":"Installation","text":"<pre><code>pip install healthcheckx[mysql]\n</code></pre>"},{"location":"checks/relational-db/#sqlite","title":"SQLite","text":""},{"location":"checks/relational-db/#basic-usage_2","title":"Basic Usage","text":"<pre><code># File-based database\nhealth.sqlite_check(\"/path/to/database.db\")\n\n# In-memory database\nhealth.sqlite_check(\":memory:\")\n</code></pre>"},{"location":"checks/relational-db/#complete-example","title":"Complete Example","text":"<pre><code>import os\nfrom healthcheckx import Health\n\nhealth = Health()\n\n# Production database\ndb_path = os.path.join(os.getcwd(), \"data\", \"production.db\")\nhealth.sqlite_check(db_path, name=\"sqlite-prod\")\n\n# Cache database\ncache_db = os.path.join(os.getcwd(), \"cache.db\")\nhealth.sqlite_check(cache_db, timeout=1, name=\"sqlite-cache\")\n\nresults = health.run()\n</code></pre>"},{"location":"checks/relational-db/#installation_2","title":"Installation","text":"<p>No extra dependencies needed - SQLite is included with Python!</p>"},{"location":"checks/relational-db/#oracle","title":"Oracle","text":""},{"location":"checks/relational-db/#basic-usage_3","title":"Basic Usage","text":"<pre><code># URL format\nhealth.oracle_check(\"oracle://user:password@localhost:1521/XEPDB1\")\n\n# TNS format\nhealth.oracle_check(\"user/password@localhost:1521/service_name\")\n</code></pre>"},{"location":"checks/relational-db/#connection-formats_2","title":"Connection Formats","text":"<pre><code># URL format\nhealth.oracle_check(\"oracle://scott:tiger@localhost:1521/XEPDB1\")\n\n# With TNS alias\nhealth.oracle_check(\"scott/tiger@MYDB\")\n\n# Full TNS string\nhealth.oracle_check(\"system/password@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=XEPDB1)))\")\n</code></pre>"},{"location":"checks/relational-db/#installation_3","title":"Installation","text":"<pre><code>pip install healthcheckx[oracle]\n</code></pre>"},{"location":"checks/relational-db/#ms-sql-server","title":"MS SQL Server","text":""},{"location":"checks/relational-db/#basic-usage_4","title":"Basic Usage","text":"<pre><code>health.mssql_check(\"mssql://sa:Password@localhost:1433/master\")\n</code></pre>"},{"location":"checks/relational-db/#connection-formats_3","title":"Connection Formats","text":"<pre><code># Basic\nhealth.mssql_check(\"mssql://localhost:1433/mydb\")\n\n# With credentials\nhealth.mssql_check(\"mssql://user:pass@localhost:1433/mydb\")\n\n# Named instance\nhealth.mssql_check(\"mssql://user:pass@localhost\\\\SQLEXPRESS:1433/mydb\")\n\n# Windows Authentication (not supported via DSN, use custom check)\n</code></pre>"},{"location":"checks/relational-db/#installation_4","title":"Installation","text":"<pre><code>pip install healthcheckx[mssql]\n</code></pre>"},{"location":"checks/relational-db/#comparison-table","title":"Comparison Table","text":"Database Default Port Connection String Check Method PostgreSQL 5432 <code>postgresql://user:pass@host/db</code> SELECT 1 MySQL 3306 <code>mysql://user:pass@host/db</code> SELECT 1 SQLite N/A <code>/path/to/db.db</code> SELECT 1 Oracle 1521 <code>oracle://user:pass@host/service</code> SELECT 1 FROM DUAL MS SQL 1433 <code>mssql://user:pass@host/db</code> SELECT 1"},{"location":"checks/relational-db/#complete-multi-database-example","title":"Complete Multi-Database Example","text":"<pre><code>from healthcheckx import Health, overall_status\nimport os\n\nhealth = Health()\n\n# PostgreSQL - Main application database\nhealth.postgresql_check(\n    os.getenv(\"DATABASE_URL\", \"postgresql://localhost/myapp\"),\n    timeout=3,\n    name=\"postgres-main\"\n)\n\n# MySQL - Analytics database\nhealth.mysql_check(\n    os.getenv(\"MYSQL_URL\", \"mysql://localhost:3306/analytics\"),\n    timeout=3,\n    name=\"mysql-analytics\"\n)\n\n# SQLite - Local cache\nhealth.sqlite_check(\n    \"./cache.db\",\n    timeout=1,\n    name=\"sqlite-cache\"\n)\n\n# Run all checks\nresults = health.run()\nstatus = overall_status(results)\n\n# Report\nprint(f\"Overall Database Health: {status}\\n\")\nfor result in results:\n    print(f\"  {result.name}: {result.status} ({result.duration_ms:.2f}ms)\")\n</code></pre>"},{"location":"checks/relational-db/#best-practices","title":"Best Practices","text":""},{"location":"checks/relational-db/#1-use-connection-pooling","title":"1. Use Connection Pooling","text":"<pre><code># Health checks create new connections each time\n# For production, ensure your app uses connection pooling\n</code></pre>"},{"location":"checks/relational-db/#2-read-only-checks","title":"2. Read-Only Checks","text":"<pre><code># Health checks only run SELECT queries\n# No data modification occurs\n</code></pre>"},{"location":"checks/relational-db/#3-set-appropriate-timeouts","title":"3. Set Appropriate Timeouts","text":"<pre><code># Local databases\nhealth.postgresql_check(\"postgresql://localhost/db\", timeout=2)\n\n# Remote databases\nhealth.postgresql_check(\"postgresql://remote-db/db\", timeout=5)\n</code></pre>"},{"location":"checks/relational-db/#4-monitor-replicas","title":"4. Monitor Replicas","text":"<pre><code># Check both primary and replica\nhealth.postgresql_check(\"postgresql://primary/db\", name=\"db-primary\")\nhealth.postgresql_check(\"postgresql://replica/db\", name=\"db-replica\")\n</code></pre>"},{"location":"checks/relational-db/#5-use-environment-variables","title":"5. Use Environment Variables","text":"<pre><code>import os\n\ndb_url = os.getenv(\"DATABASE_URL\")\nif db_url:\n    if db_url.startswith(\"postgresql\"):\n        health.postgresql_check(db_url)\n    elif db_url.startswith(\"mysql\"):\n        health.mysql_check(db_url)\n</code></pre>"},{"location":"checks/relational-db/#common-issues","title":"Common Issues","text":""},{"location":"checks/relational-db/#connection-refused","title":"Connection Refused","text":"<pre><code>Error: Connection refused\n</code></pre> <p>Solutions: - Verify database is running - Check host and port - Verify firewall rules</p>"},{"location":"checks/relational-db/#authentication-failed","title":"Authentication Failed","text":"<pre><code>Error: Authentication failed for user\n</code></pre> <p>Solutions: - Verify username and password - Check user permissions - Verify host-based authentication (PostgreSQL pg_hba.conf)</p>"},{"location":"checks/relational-db/#database-does-not-exist","title":"Database Does Not Exist","text":"<pre><code>Error: database \"mydb\" does not exist\n</code></pre> <p>Solutions: - Create the database - Verify database name spelling - Check if using correct database instance</p>"},{"location":"checks/relational-db/#ssltls-errors","title":"SSL/TLS Errors","text":"<pre><code>Error: SSL connection required\n</code></pre> <p>Solutions for PostgreSQL: <pre><code>health.postgresql_check(\"postgresql://user:pass@host/db?sslmode=require\")\n</code></pre></p> <p>Solutions for MySQL: <pre><code>health.mysql_check(\"mysql://user:pass@host/db?ssl=true\")\n</code></pre></p>"},{"location":"checks/relational-db/#docker-examples","title":"Docker Examples","text":""},{"location":"checks/relational-db/#postgresql_1","title":"PostgreSQL","text":"<pre><code>services:\n  postgres:\n    image: postgres:15\n    environment:\n      POSTGRES_PASSWORD: mypassword\n      POSTGRES_DB: mydb\n    ports:\n      - \"5432:5432\"\n</code></pre> <pre><code>health.postgresql_check(\"postgresql://postgres:mypassword@localhost:5432/mydb\")\n</code></pre>"},{"location":"checks/relational-db/#mysql_1","title":"MySQL","text":"<pre><code>services:\n  mysql:\n    image: mysql:8\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpass\n      MYSQL_DATABASE: mydb\n    ports:\n      - \"3306:3306\"\n</code></pre> <pre><code>health.mysql_check(\"mysql://root:rootpass@localhost:3306/mydb\")\n</code></pre>"},{"location":"checks/relational-db/#next-steps","title":"Next Steps","text":"<ul> <li>NoSQL Database Checks - MongoDB and other NoSQL checks</li> <li>Custom Checks - Create custom database checks</li> <li>Multiple Instances - Advanced multi-instance monitoring</li> </ul>"},{"location":"frameworks/django/","title":"Django Integration","text":"<p>Integrate healthcheckx with Django applications for robust health check endpoints.</p>"},{"location":"frameworks/django/#installation","title":"Installation","text":"<pre><code>pip install django healthcheckx[all]\n</code></pre>"},{"location":"frameworks/django/#basic-integration","title":"Basic Integration","text":""},{"location":"frameworks/django/#simple-example","title":"Simple Example","text":"<ol> <li>Create a health checks module (<code>myapp/health.py</code>):</li> </ol> <pre><code>from healthcheckx import Health\nimport os\n\nhealth = Health()\n\n# Register checks from settings\nif redis_url := os.getenv(\"REDIS_URL\"):\n    health.redis_check(redis_url, name=\"redis\")\n\nif db_url := os.getenv(\"DATABASE_URL\"):\n    health.postgresql_check(db_url, name=\"database\")\n</code></pre> <ol> <li>Add view (<code>myapp/views.py</code>):</li> </ol> <pre><code>from healthcheckx import django_health_view\nfrom .health import health\n\n# Create health check view\nhealth_check = django_health_view(health)\n</code></pre> <ol> <li>Configure URL (<code>myapp/urls.py</code>):</li> </ol> <pre><code>from django.urls import path\nfrom .views import health_check\n\nurlpatterns = [\n    path('health/', health_check, name='health'),\n]\n</code></pre> <ol> <li>Include in main URLs (<code>project/urls.py</code>):</li> </ol> <pre><code>from django.contrib import admin\nfrom django.urls import path, include\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('', include('myapp.urls')),\n]\n</code></pre> <p>Visit <code>http://localhost:8000/health/</code> to see the health status.</p>"},{"location":"frameworks/django/#response-format","title":"Response Format","text":""},{"location":"frameworks/django/#healthy-response-http-200","title":"Healthy Response (HTTP 200)","text":"<pre><code>{\n  \"status\": \"healthy\",\n  \"checks\": [\n    {\n      \"name\": \"redis\",\n      \"status\": \"healthy\",\n      \"duration_ms\": 12.5\n    },\n    {\n      \"name\": \"database\",\n      \"status\": \"healthy\",\n      \"duration_ms\": 45.3\n    }\n  ]\n}\n</code></pre>"},{"location":"frameworks/django/#unhealthy-response-http-503","title":"Unhealthy Response (HTTP 503)","text":"<pre><code>{\n  \"status\": \"unhealthy\",\n  \"checks\": [\n    {\n      \"name\": \"redis\",\n      \"status\": \"unhealthy\",\n      \"message\": \"Connection refused\",\n      \"duration_ms\": 2001.2\n    },\n    {\n      \"name\": \"database\",\n      \"status\": \"healthy\",\n      \"duration_ms\": 38.7\n    }\n  ]\n}\n</code></pre>"},{"location":"frameworks/django/#complete-django-project-setup","title":"Complete Django Project Setup","text":""},{"location":"frameworks/django/#project-structure","title":"Project Structure","text":"<pre><code>myproject/\n\u251c\u2500\u2500 manage.py\n\u251c\u2500\u2500 myproject/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 settings.py\n\u2502   \u251c\u2500\u2500 urls.py\n\u2502   \u2514\u2500\u2500 wsgi.py\n\u2514\u2500\u2500 api/\n    \u251c\u2500\u2500 __init__.py\n    \u251c\u2500\u2500 health.py\n    \u251c\u2500\u2500 views.py\n    \u2514\u2500\u2500 urls.py\n</code></pre>"},{"location":"frameworks/django/#settings-configuration-settingspy","title":"Settings Configuration (<code>settings.py</code>)","text":"<pre><code># myproject/settings.py\n\nimport os\nfrom pathlib import Path\n\nBASE_DIR = Path(__file__).resolve().parent.parent\n\nSECRET_KEY = os.getenv('DJANGO_SECRET_KEY', 'dev-secret-key')\n\nDEBUG = os.getenv('DEBUG', 'True') == 'True'\n\nALLOWED_HOSTS = os.getenv('ALLOWED_HOSTS', 'localhost,127.0.0.1').split(',')\n\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'api',  # Your app\n]\n\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n\nROOT_URLCONF = 'myproject.urls'\n\n# Database\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql',\n        'NAME': os.getenv('DB_NAME', 'mydb'),\n        'USER': os.getenv('DB_USER', 'postgres'),\n        'PASSWORD': os.getenv('DB_PASSWORD', 'postgres'),\n        'HOST': os.getenv('DB_HOST', 'localhost'),\n        'PORT': os.getenv('DB_PORT', '5432'),\n    }\n}\n\n# Cache\nCACHES = {\n    'default': {\n        'BACKEND': 'django_redis.cache.RedisCache',\n        'LOCATION': os.getenv('REDIS_URL', 'redis://localhost:6379/1'),\n        'OPTIONS': {\n            'CLIENT_CLASS': 'django_redis.client.DefaultClient',\n        }\n    }\n}\n\n# Static files\nSTATIC_URL = '/static/'\n</code></pre>"},{"location":"frameworks/django/#health-checks-module-apihealthpy","title":"Health Checks Module (<code>api/health.py</code>)","text":"<pre><code>from healthcheckx import Health\nfrom django.conf import settings\nimport os\n\ndef create_health():\n    \"\"\"Create health checks based on Django settings\"\"\"\n    health = Health()\n\n    # Database check\n    db_config = settings.DATABASES['default']\n    if db_config['ENGINE'] == 'django.db.backends.postgresql':\n        db_url = (\n            f\"postgresql://{db_config['USER']}:{db_config['PASSWORD']}\"\n            f\"@{db_config['HOST']}:{db_config['PORT']}/{db_config['NAME']}\"\n        )\n        health.postgresql_check(db_url, name=\"database\")\n\n    elif db_config['ENGINE'] == 'django.db.backends.mysql':\n        db_url = (\n            f\"mysql://{db_config['USER']}:{db_config['PASSWORD']}\"\n            f\"@{db_config['HOST']}:{db_config['PORT']}/{db_config['NAME']}\"\n        )\n        health.mysql_check(db_url, name=\"database\")\n\n    # Cache check\n    cache_config = settings.CACHES['default']\n    if 'redis' in cache_config['BACKEND'].lower():\n        redis_url = cache_config['LOCATION']\n        health.redis_check(redis_url, name=\"cache\")\n\n    # Additional checks from environment\n    if rabbitmq_url := os.getenv(\"RABBITMQ_URL\"):\n        health.rabbitmq_check(rabbitmq_url, name=\"message-queue\")\n\n    if mongodb_url := os.getenv(\"MONGODB_URL\"):\n        health.mongodb_check(mongodb_url, name=\"mongodb\")\n\n    return health\n\n# Create singleton instance\nhealth = create_health()\n</code></pre>"},{"location":"frameworks/django/#views-apiviewspy","title":"Views (<code>api/views.py</code>)","text":"<pre><code>from django.http import JsonResponse\nfrom healthcheckx import django_health_view\nfrom .health import health\n\n# Health check view\nhealth_check = django_health_view(health)\n\n# Liveness probe (simple alive check)\ndef liveness(request):\n    return JsonResponse({\"status\": \"ok\"})\n\n# Readiness probe (all services check)\nreadiness = django_health_view(health)\n</code></pre>"},{"location":"frameworks/django/#url-configuration-apiurlspy","title":"URL Configuration (<code>api/urls.py</code>)","text":"<pre><code>from django.urls import path\nfrom . import views\n\napp_name = 'api'\n\nurlpatterns = [\n    path('health/', views.health_check, name='health'),\n    path('healthz/', views.liveness, name='liveness'),\n    path('ready/', views.readiness, name='readiness'),\n]\n</code></pre>"},{"location":"frameworks/django/#main-urls-myprojecturlspy","title":"Main URLs (<code>myproject/urls.py</code>)","text":"<pre><code>from django.contrib import admin\nfrom django.urls import path, include\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('', include('api.urls')),\n]\n</code></pre>"},{"location":"frameworks/django/#using-django-orm-connections","title":"Using Django ORM Connections","text":"<p>Check database using Django's connection:</p> <pre><code># api/health.py\nfrom healthcheckx import Health, CheckResult, HealthStatus\nfrom django.db import connection\nfrom django.conf import settings\n\nhealth = Health()\n\ndef django_db_check() -&gt; CheckResult:\n    \"\"\"Check database using Django's connection\"\"\"\n    try:\n        # Execute simple query\n        with connection.cursor() as cursor:\n            cursor.execute(\"SELECT 1\")\n            cursor.fetchone()\n        return CheckResult(\"django-db\", HealthStatus.healthy)\n    except Exception as e:\n        return CheckResult(\"django-db\", HealthStatus.unhealthy, str(e))\n\n# Register custom check\nhealth.register(django_db_check)\n\n# Also add standard checks\ndb_config = settings.DATABASES['default']\nif db_config['ENGINE'] == 'django.db.backends.postgresql':\n    db_url = (\n        f\"postgresql://{db_config['USER']}:{db_config['PASSWORD']}\"\n        f\"@{db_config['HOST']}:{db_config['PORT']}/{db_config['NAME']}\"\n    )\n    health.postgresql_check(db_url, name=\"database\")\n</code></pre>"},{"location":"frameworks/django/#django-cache-framework-integration","title":"Django Cache Framework Integration","text":"<p>Check cache using Django's cache:</p> <pre><code>from healthcheckx import Health, CheckResult, HealthStatus\nfrom django.core.cache import cache\n\nhealth = Health()\n\ndef django_cache_check() -&gt; CheckResult:\n    \"\"\"Check cache using Django's cache framework\"\"\"\n    try:\n        # Test cache set/get\n        test_key = \"__healthcheck__\"\n        test_value = \"ok\"\n\n        cache.set(test_key, test_value, 10)\n        result = cache.get(test_key)\n        cache.delete(test_key)\n\n        if result == test_value:\n            return CheckResult(\"django-cache\", HealthStatus.healthy)\n        else:\n            return CheckResult(\n                \"django-cache\",\n                HealthStatus.unhealthy,\n                \"Cache read/write failed\"\n            )\n    except Exception as e:\n        return CheckResult(\"django-cache\", HealthStatus.unhealthy, str(e))\n\nhealth.register(django_cache_check)\n</code></pre>"},{"location":"frameworks/django/#custom-response-format","title":"Custom Response Format","text":"<p>Create custom health check view:</p> <pre><code>from django.http import JsonResponse\nfrom healthcheckx import overall_status\nfrom .health import health\nfrom datetime import datetime\n\ndef custom_health_view(request):\n    \"\"\"Custom health check with additional metadata\"\"\"\n    results = health.run()\n    status = overall_status(results)\n\n    response_data = {\n        \"application\": \"my-django-api\",\n        \"version\": \"1.0.0\",\n        \"status\": status.value,\n        \"timestamp\": datetime.utcnow().isoformat() + \"Z\",\n        \"environment\": os.getenv(\"ENVIRONMENT\", \"development\"),\n        \"services\": [\n            {\n                \"name\": r.name,\n                \"healthy\": r.status == \"healthy\",\n                \"responseTime\": f\"{r.duration_ms:.2f}ms\",\n                \"error\": r.message if r.message else None\n            }\n            for r in results\n        ]\n    }\n\n    status_code = 200 if status.value != \"unhealthy\" else 503\n    return JsonResponse(response_data, status=status_code)\n</code></pre>"},{"location":"frameworks/django/#class-based-views","title":"Class-Based Views","text":"<p>Use Django class-based views:</p> <pre><code>from django.views import View\nfrom django.http import JsonResponse\nfrom healthcheckx import overall_status\nfrom .health import health\n\nclass HealthCheckView(View):\n    \"\"\"Health check class-based view\"\"\"\n\n    def get(self, request):\n        results = health.run()\n        status = overall_status(results)\n\n        response_data = {\n            \"status\": status.value,\n            \"checks\": [\n                {\n                    \"name\": r.name,\n                    \"status\": r.status.value,\n                    \"duration_ms\": r.duration_ms,\n                    \"message\": r.message\n                }\n                for r in results\n            ]\n        }\n\n        status_code = 200 if status.value != \"unhealthy\" else 503\n        return JsonResponse(response_data, status=status_code)\n\n# In urls.py\nfrom django.urls import path\nfrom .views import HealthCheckView\n\nurlpatterns = [\n    path('health/', HealthCheckView.as_view(), name='health'),\n]\n</code></pre>"},{"location":"frameworks/django/#django-rest-framework-integration","title":"Django REST Framework Integration","text":"<p>Integrate with Django REST Framework:</p> <pre><code># views.py\nfrom rest_framework.decorators import api_view\nfrom rest_framework.response import Response\nfrom rest_framework import status\nfrom healthcheckx import overall_status\nfrom .health import health\n\n@api_view(['GET'])\ndef health_check_view(request):\n    \"\"\"Health check endpoint using DRF\"\"\"\n    results = health.run()\n    health_status = overall_status(results)\n\n    response_data = {\n        \"status\": health_status.value,\n        \"checks\": [\n            {\n                \"name\": r.name,\n                \"status\": r.status.value,\n                \"duration_ms\": r.duration_ms,\n                \"message\": r.message\n            }\n            for r in results\n        ]\n    }\n\n    status_code = (\n        status.HTTP_200_OK \n        if health_status.value != \"unhealthy\" \n        else status.HTTP_503_SERVICE_UNAVAILABLE\n    )\n\n    return Response(response_data, status=status_code)\n</code></pre> <p>Or with APIView:</p> <pre><code>from rest_framework.views import APIView\nfrom rest_framework.response import Response\nfrom rest_framework import status\nfrom healthcheckx import overall_status\nfrom .health import health\n\nclass HealthCheckAPIView(APIView):\n    \"\"\"Health check API view\"\"\"\n\n    permission_classes = []  # Public endpoint\n    authentication_classes = []  # No auth required\n\n    def get(self, request):\n        results = health.run()\n        health_status = overall_status(results)\n\n        response_data = {\n            \"status\": health_status.value,\n            \"checks\": [\n                {\n                    \"name\": r.name,\n                    \"status\": r.status.value,\n                    \"duration_ms\": r.duration_ms,\n                    \"message\": r.message\n                }\n                for r in results\n            ]\n        }\n\n        status_code = (\n            status.HTTP_200_OK \n            if health_status.value != \"unhealthy\" \n            else status.HTTP_503_SERVICE_UNAVAILABLE\n        )\n\n        return Response(response_data, status=status_code)\n</code></pre>"},{"location":"frameworks/django/#middleware-integration","title":"Middleware Integration","text":"<p>Create health check middleware:</p> <pre><code># api/middleware.py\nfrom django.http import JsonResponse\nfrom healthcheckx import overall_status\nfrom .health import health\nimport time\n\nclass HealthCheckMiddleware:\n    \"\"\"Middleware to log health check requests\"\"\"\n\n    def __init__(self, get_response):\n        self.get_response = get_response\n\n    def __call__(self, request):\n        if request.path == '/health/':\n            start_time = time.time()\n            response = self.get_response(request)\n            duration = time.time() - start_time\n\n            # Log health check\n            print(f\"Health check: {response.status_code} in {duration:.3f}s\")\n\n            return response\n\n        return self.get_response(request)\n\n# Add to settings.py MIDDLEWARE\nMIDDLEWARE = [\n    # ... other middleware\n    'api.middleware.HealthCheckMiddleware',\n]\n</code></pre>"},{"location":"frameworks/django/#kubernetes-integration","title":"Kubernetes Integration","text":""},{"location":"frameworks/django/#django-app-with-probes","title":"Django App with Probes","text":"<pre><code># api/views.py\nfrom django.http import JsonResponse\nfrom healthcheckx import django_health_view\nfrom .health import health\n\n# Liveness probe - is the app alive?\ndef liveness(request):\n    return JsonResponse({\"status\": \"ok\"})\n\n# Readiness probe - is the app ready to serve traffic?\nreadiness = django_health_view(health)\n\n# Startup probe - has the app finished starting?\nstartup = django_health_view(health)\n</code></pre> <pre><code># api/urls.py\nfrom django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('healthz/', views.liveness, name='liveness'),\n    path('ready/', views.readiness, name='readiness'),\n    path('startup/', views.startup, name='startup'),\n    path('health/', views.readiness, name='health'),\n]\n</code></pre>"},{"location":"frameworks/django/#kubernetes-deployment","title":"Kubernetes Deployment","text":"<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: django-api\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: django-api\n  template:\n    metadata:\n      labels:\n        app: django-api\n    spec:\n      containers:\n      - name: django\n        image: django-api:latest\n        ports:\n        - containerPort: 8000\n\n        env:\n        - name: DATABASE_URL\n          value: \"postgresql://postgres:5432/mydb\"\n        - name: REDIS_URL\n          value: \"redis://redis:6379\"\n        - name: DEBUG\n          value: \"False\"\n\n        # Liveness probe - restart if fails\n        livenessProbe:\n          httpGet:\n            path: /healthz/\n            port: 8000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n          timeoutSeconds: 5\n          failureThreshold: 3\n\n        # Readiness probe - remove from service if fails\n        readinessProbe:\n          httpGet:\n            path: /ready/\n            port: 8000\n          initialDelaySeconds: 10\n          periodSeconds: 5\n          timeoutSeconds: 3\n          failureThreshold: 3\n\n        # Startup probe - wait for app to start\n        startupProbe:\n          httpGet:\n            path: /startup/\n            port: 8000\n          initialDelaySeconds: 0\n          periodSeconds: 5\n          timeoutSeconds: 3\n          failureThreshold: 30\n</code></pre>"},{"location":"frameworks/django/#docker-integration","title":"Docker Integration","text":""},{"location":"frameworks/django/#dockerfile","title":"Dockerfile","text":"<pre><code>FROM python:3.11-slim\n\nWORKDIR /app\n\n# Install dependencies\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\n# Copy project\nCOPY . .\n\n# Collect static files\nRUN python manage.py collectstatic --noinput\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD python -c \"import requests; requests.get('http://localhost:8000/health/').raise_for_status()\"\n\nEXPOSE 8000\n\n# Run with gunicorn\nCMD [\"gunicorn\", \"--bind\", \"0.0.0.0:8000\", \"--workers\", \"4\", \"myproject.wsgi:application\"]\n</code></pre>"},{"location":"frameworks/django/#docker-composeyml","title":"docker-compose.yml","text":"<pre><code>version: '3.8'\n\nservices:\n  django:\n    build: .\n    ports:\n      - \"8000:8000\"\n    environment:\n      - DB_NAME=mydb\n      - DB_USER=postgres\n      - DB_PASSWORD=postgres\n      - DB_HOST=postgres\n      - DB_PORT=5432\n      - REDIS_URL=redis://redis:6379/1\n      - DEBUG=False\n    depends_on:\n      - postgres\n      - redis\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8000/health/\"]\n      interval: 30s\n      timeout: 3s\n      retries: 3\n      start_period: 10s\n\n  postgres:\n    image: postgres:15-alpine\n    environment:\n      POSTGRES_DB: mydb\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: postgres\n    ports:\n      - \"5432:5432\"\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n\n  redis:\n    image: redis:7-alpine\n    ports:\n      - \"6379:6379\"\n\nvolumes:\n  postgres_data:\n</code></pre>"},{"location":"frameworks/django/#management-command","title":"Management Command","text":"<p>Create a management command for health checks:</p> <pre><code># api/management/commands/healthcheck.py\nfrom django.core.management.base import BaseCommand\nfrom api.health import health\n\nclass Command(BaseCommand):\n    help = 'Run health checks'\n\n    def handle(self, *args, **options):\n        self.stdout.write(\"Running health checks...\")\n\n        results = health.run()\n\n        for result in results:\n            status_color = (\n                self.style.SUCCESS if result.status.value == \"healthy\"\n                else self.style.ERROR if result.status.value == \"unhealthy\"\n                else self.style.WARNING\n            )\n\n            message = f\" - {result.message}\" if result.message else \"\"\n            self.stdout.write(\n                f\"{result.name}: {status_color(result.status.value)} \"\n                f\"({result.duration_ms:.2f}ms){message}\"\n            )\n\n        # Exit with error code if unhealthy\n        if any(r.status.value == \"unhealthy\" for r in results):\n            raise SystemExit(1)\n</code></pre> <p>Usage:</p> <pre><code>python manage.py healthcheck\n</code></pre>"},{"location":"frameworks/django/#testing","title":"Testing","text":"<p>Test health check endpoints:</p> <pre><code># api/tests.py\nfrom django.test import TestCase, Client\nfrom django.urls import reverse\n\nclass HealthCheckTests(TestCase):\n    def setUp(self):\n        self.client = Client()\n\n    def test_health_endpoint_exists(self):\n        \"\"\"Test that health endpoint exists\"\"\"\n        response = self.client.get('/health/')\n        self.assertIn(response.status_code, [200, 503])\n\n    def test_health_response_format(self):\n        \"\"\"Test health response has correct format\"\"\"\n        response = self.client.get('/health/')\n        data = response.json()\n\n        self.assertIn('status', data)\n        self.assertIn('checks', data)\n        self.assertIsInstance(data['checks'], list)\n\n    def test_liveness_probe(self):\n        \"\"\"Test liveness probe always returns 200\"\"\"\n        response = self.client.get('/healthz/')\n        self.assertEqual(response.status_code, 200)\n\n    def test_health_check_view_name(self):\n        \"\"\"Test health check using URL name\"\"\"\n        url = reverse('api:health')\n        response = self.client.get(url)\n        self.assertIn(response.status_code, [200, 503])\n</code></pre> <p>Run tests:</p> <pre><code>python manage.py test api.tests\n</code></pre>"},{"location":"frameworks/django/#best-practices","title":"Best Practices","text":"<ol> <li>Use Django Settings - Configure health checks from Django settings</li> <li>Separate Probes - Use different endpoints for liveness and readiness</li> <li>No Authentication - Health checks should be publicly accessible</li> <li>Fast Checks - Keep total check time under 3 seconds</li> <li>Use Django ORM - Leverage Django's connection pooling</li> <li>Management Commands - Create commands for CLI health checks</li> <li>Proper Logging - Log health check failures for monitoring</li> </ol>"},{"location":"frameworks/django/#troubleshooting","title":"Troubleshooting","text":""},{"location":"frameworks/django/#csrf-token-errors","title":"CSRF Token Errors","text":"<p>Health check endpoints should bypass CSRF:</p> <pre><code>from django.views.decorators.csrf import csrf_exempt\nfrom healthcheckx import django_health_view\nfrom .health import health\n\n@csrf_exempt\ndef health_check(request):\n    return django_health_view(health)(request)\n</code></pre>"},{"location":"frameworks/django/#database-connection-errors","title":"Database Connection Errors","text":"<p>Ensure database settings are correct:</p> <pre><code># Check database configuration\npython manage.py check --database default\n</code></pre>"},{"location":"frameworks/django/#import-errors","title":"Import Errors","text":"<p>Make sure healthcheckx is installed:</p> <pre><code>pip install django healthcheckx[all]\n</code></pre>"},{"location":"frameworks/django/#next-steps","title":"Next Steps","text":"<ul> <li>FastAPI Integration - FastAPI framework integration</li> <li>Flask Integration - Flask framework integration</li> <li>Custom Checks - Create custom health checks</li> </ul>"},{"location":"frameworks/fastapi/","title":"FastAPI Integration","text":"<p>Integrate healthcheckx with FastAPI applications for modern async health check endpoints.</p>"},{"location":"frameworks/fastapi/#installation","title":"Installation","text":"<pre><code>pip install fastapi uvicorn healthcheckx[all]\n</code></pre>"},{"location":"frameworks/fastapi/#basic-integration","title":"Basic Integration","text":""},{"location":"frameworks/fastapi/#simple-example","title":"Simple Example","text":"<pre><code>from fastapi import FastAPI\nfrom healthcheckx import Health, FastAPIAdapter\n\napp = FastAPI()\nhealth = Health()\n\n# Register health checks\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://user:pass@localhost/db\")\n\n# Create adapter and add endpoint\nadapter = FastAPIAdapter(health)\napp.get(\"/health\")(adapter.endpoint)\n\n# Run with: uvicorn main:app --reload\n</code></pre> <p>Visit <code>http://localhost:8000/health</code> to see the health status.</p>"},{"location":"frameworks/fastapi/#response-format","title":"Response Format","text":""},{"location":"frameworks/fastapi/#healthy-response-http-200","title":"Healthy Response (HTTP 200)","text":"<pre><code>{\n  \"status\": \"healthy\",\n  \"checks\": [\n    {\n      \"name\": \"redis\",\n      \"status\": \"healthy\",\n      \"duration_ms\": 12.5\n    },\n    {\n      \"name\": \"postgresql\",\n      \"status\": \"healthy\",\n      \"duration_ms\": 45.3\n    }\n  ]\n}\n</code></pre>"},{"location":"frameworks/fastapi/#unhealthy-response-http-503","title":"Unhealthy Response (HTTP 503)","text":"<pre><code>{\n  \"status\": \"unhealthy\",\n  \"checks\": [\n    {\n      \"name\": \"redis\",\n      \"status\": \"unhealthy\",\n      \"message\": \"Connection refused\",\n      \"duration_ms\": 2001.2\n    },\n    {\n      \"name\": \"postgresql\",\n      \"status\": \"healthy\",\n      \"duration_ms\": 38.7\n    }\n  ]\n}\n</code></pre>"},{"location":"frameworks/fastapi/#complete-example","title":"Complete Example","text":"<pre><code>from fastapi import FastAPI, Response\nfrom healthcheckx import Health, FastAPIAdapter\nimport os\n\napp = FastAPI(\n    title=\"My API\",\n    description=\"API with health checks\",\n    version=\"1.0.0\"\n)\n\n# Initialize health checks\nhealth = Health()\n\n# Register checks from environment\nif redis_url := os.getenv(\"REDIS_URL\"):\n    health.redis_check(redis_url, name=\"redis-cache\")\n\nif db_url := os.getenv(\"DATABASE_URL\"):\n    health.postgresql_check(db_url, name=\"postgres-main\")\n\nif mongodb_url := os.getenv(\"MONGODB_URL\"):\n    health.mongodb_check(mongodb_url, name=\"mongo-data\")\n\n# Create adapter\nadapter = FastAPIAdapter(health)\n\n# Add health endpoint\n@app.get(\n    \"/health\",\n    tags=[\"monitoring\"],\n    summary=\"Health Check\",\n    description=\"Check the health of all services\"\n)\nasync def health_check():\n    return await adapter.endpoint()\n\n# Optional: Separate liveness endpoint\n@app.get(\n    \"/healthz\",\n    tags=[\"monitoring\"],\n    summary=\"Liveness Probe\",\n    description=\"Check if the application is alive\"\n)\nasync def liveness():\n    return {\"status\": \"ok\"}\n\n# Optional: Separate readiness endpoint\n@app.get(\n    \"/ready\",\n    tags=[\"monitoring\"],\n    summary=\"Readiness Probe\",\n    description=\"Check if the application is ready to serve traffic\"\n)\nasync def readiness():\n    return await adapter.endpoint()\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre>"},{"location":"frameworks/fastapi/#multiple-endpoints","title":"Multiple Endpoints","text":"<p>Create different health check endpoints for different purposes:</p> <pre><code>from fastapi import FastAPI\nfrom healthcheckx import Health, FastAPIAdapter\n\napp = FastAPI()\n\n# Critical services (for liveness)\ncritical_health = Health()\ncritical_health.postgresql_check(\"postgresql://localhost/db\", name=\"database\")\n\n# All services (for readiness)\nfull_health = Health()\nfull_health.postgresql_check(\"postgresql://localhost/db\", name=\"database\") \\\n           .redis_check(\"redis://localhost:6379\", name=\"cache\") \\\n           .rabbitmq_check(\"amqp://guest:guest@localhost:5672\", name=\"queue\")\n\n# Separate adapters\ncritical_adapter = FastAPIAdapter(critical_health)\nfull_adapter = FastAPIAdapter(full_health)\n\n# Liveness - only checks critical services\n@app.get(\"/healthz\")\nasync def liveness():\n    return await critical_adapter.endpoint()\n\n# Readiness - checks all services\n@app.get(\"/ready\")\nasync def readiness():\n    return await full_adapter.endpoint()\n</code></pre>"},{"location":"frameworks/fastapi/#kubernetes-integration","title":"Kubernetes Integration","text":""},{"location":"frameworks/fastapi/#with-probes","title":"With Probes","text":"<pre><code>from fastapi import FastAPI\nfrom healthcheckx import Health, FastAPIAdapter\n\napp = FastAPI()\nhealth = Health()\n\nhealth.postgresql_check(\"postgresql://postgres:5432/db\") \\\n      .redis_check(\"redis://redis:6379\")\n\nadapter = FastAPIAdapter(health)\n\n# Liveness probe - is the app alive?\n@app.get(\"/healthz\")\nasync def liveness():\n    return {\"status\": \"ok\"}\n\n# Readiness probe - is the app ready to serve traffic?\n@app.get(\"/ready\")\nasync def readiness():\n    return await adapter.endpoint()\n\n# Startup probe - has the app finished starting?\n@app.get(\"/startup\")\nasync def startup():\n    return await adapter.endpoint()\n</code></pre>"},{"location":"frameworks/fastapi/#kubernetes-deployment","title":"Kubernetes Deployment","text":"<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-api\nspec:\n  replicas: 3\n  template:\n    spec:\n      containers:\n      - name: api\n        image: my-api:latest\n        ports:\n        - containerPort: 8000\n\n        # Liveness probe - restart if fails\n        livenessProbe:\n          httpGet:\n            path: /healthz\n            port: 8000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n          timeoutSeconds: 5\n          failureThreshold: 3\n\n        # Readiness probe - remove from service if fails\n        readinessProbe:\n          httpGet:\n            path: /ready\n            port: 8000\n          initialDelaySeconds: 10\n          periodSeconds: 5\n          timeoutSeconds: 3\n          failureThreshold: 3\n\n        # Startup probe - wait for app to start\n        startupProbe:\n          httpGet:\n            path: /startup\n            port: 8000\n          initialDelaySeconds: 0\n          periodSeconds: 5\n          timeoutSeconds: 3\n          failureThreshold: 30\n</code></pre>"},{"location":"frameworks/fastapi/#custom-response-format","title":"Custom Response Format","text":"<p>Customize the response format:</p> <pre><code>from fastapi import FastAPI, Response\nfrom healthcheckx import Health, overall_status\nfrom typing import Dict, Any\nimport json\n\napp = FastAPI()\nhealth = Health()\n\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://localhost/db\")\n\n@app.get(\"/health\")\nasync def health_check():\n    results = health.run()\n    status = overall_status(results)\n\n    # Custom response format\n    response_data = {\n        \"application\": \"my-api\",\n        \"version\": \"1.0.0\",\n        \"status\": status.value,\n        \"timestamp\": \"2026-01-15T10:30:00Z\",\n        \"services\": [\n            {\n                \"name\": r.name,\n                \"healthy\": r.status == \"healthy\",\n                \"responseTime\": f\"{r.duration_ms:.2f}ms\",\n                \"error\": r.message if r.message else None\n            }\n            for r in results\n        ]\n    }\n\n    status_code = 200 if status != \"unhealthy\" else 503\n    return Response(\n        content=json.dumps(response_data, indent=2),\n        status_code=status_code,\n        media_type=\"application/json\"\n    )\n</code></pre>"},{"location":"frameworks/fastapi/#async-custom-checks","title":"Async Custom Checks","text":"<p>Create async custom health checks:</p> <pre><code>from fastapi import FastAPI\nfrom healthcheckx import Health, CheckResult, HealthStatus, FastAPIAdapter\nimport httpx\n\napp = FastAPI()\nhealth = Health()\n\n# Regular sync checks\nhealth.redis_check(\"redis://localhost:6379\")\n\n# Async custom check\nasync def external_api_check() -&gt; CheckResult:\n    try:\n        async with httpx.AsyncClient() as client:\n            response = await client.get(\n                \"https://api.example.com/status\",\n                timeout=2.0\n            )\n            if response.status_code == 200:\n                return CheckResult(\"external-api\", HealthStatus.healthy)\n            else:\n                return CheckResult(\n                    \"external-api\",\n                    HealthStatus.unhealthy,\n                    f\"HTTP {response.status_code}\"\n                )\n    except Exception as e:\n        return CheckResult(\"external-api\", HealthStatus.unhealthy, str(e))\n\n# Wrapper to make it sync for healthcheckx\ndef external_api_check_sync() -&gt; CheckResult:\n    import asyncio\n    return asyncio.run(external_api_check())\n\nhealth.register(external_api_check_sync)\n\nadapter = FastAPIAdapter(health)\napp.get(\"/health\")(adapter.endpoint)\n</code></pre>"},{"location":"frameworks/fastapi/#middleware-integration","title":"Middleware Integration","text":"<p>Add health check middleware:</p> <pre><code>from fastapi import FastAPI, Request\nfrom healthcheckx import Health, FastAPIAdapter\nimport time\n\napp = FastAPI()\nhealth = Health()\n\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://localhost/db\")\n\nadapter = FastAPIAdapter(health)\n\n# Add health endpoint\n@app.get(\"/health\")\nasync def health_check():\n    return await adapter.endpoint()\n\n# Middleware to log health check requests\n@app.middleware(\"http\")\nasync def log_health_checks(request: Request, call_next):\n    if request.url.path == \"/health\":\n        start_time = time.time()\n        response = await call_next(request)\n        duration = time.time() - start_time\n        print(f\"Health check: {response.status_code} in {duration:.3f}s\")\n        return response\n    return await call_next(request)\n</code></pre>"},{"location":"frameworks/fastapi/#openapiswagger-documentation","title":"OpenAPI/Swagger Documentation","text":"<p>The health endpoint will automatically appear in FastAPI's interactive docs:</p> <pre><code>from fastapi import FastAPI\nfrom healthcheckx import Health, FastAPIAdapter\n\napp = FastAPI(\n    title=\"My API\",\n    description=\"API with comprehensive health checks\"\n)\n\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://localhost/db\")\n\nadapter = FastAPIAdapter(health)\n\n@app.get(\n    \"/health\",\n    tags=[\"monitoring\"],\n    summary=\"Health Check Endpoint\",\n    description=\"Returns the health status of all services\",\n    responses={\n        200: {\n            \"description\": \"All services are healthy or degraded\",\n            \"content\": {\n                \"application/json\": {\n                    \"example\": {\n                        \"status\": \"healthy\",\n                        \"checks\": [\n                            {\n                                \"name\": \"redis\",\n                                \"status\": \"healthy\",\n                                \"duration_ms\": 12.5\n                            }\n                        ]\n                    }\n                }\n            }\n        },\n        503: {\n            \"description\": \"One or more services are unhealthy\",\n            \"content\": {\n                \"application/json\": {\n                    \"example\": {\n                        \"status\": \"unhealthy\",\n                        \"checks\": [\n                            {\n                                \"name\": \"redis\",\n                                \"status\": \"unhealthy\",\n                                \"message\": \"Connection refused\",\n                                \"duration_ms\": 2001.2\n                            }\n                        ]\n                    }\n                }\n            }\n        }\n    }\n)\nasync def health_check():\n    return await adapter.endpoint()\n</code></pre> <p>Visit <code>http://localhost:8000/docs</code> to see the interactive documentation.</p>"},{"location":"frameworks/fastapi/#docker-integration","title":"Docker Integration","text":""},{"location":"frameworks/fastapi/#dockerfile","title":"Dockerfile","text":"<pre><code>FROM python:3.11-slim\n\nWORKDIR /app\n\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\nCOPY . .\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD python -c \"import requests; requests.get('http://localhost:8000/health').raise_for_status()\"\n\nEXPOSE 8000\n\nCMD [\"uvicorn\", \"main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]\n</code></pre>"},{"location":"frameworks/fastapi/#docker-composeyml","title":"docker-compose.yml","text":"<pre><code>version: '3.8'\n\nservices:\n  api:\n    build: .\n    ports:\n      - \"8000:8000\"\n    environment:\n      - REDIS_URL=redis://redis:6379\n      - DATABASE_URL=postgresql://postgres:postgres@postgres:5432/mydb\n    depends_on:\n      - redis\n      - postgres\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8000/health\"]\n      interval: 30s\n      timeout: 3s\n      retries: 3\n      start_period: 10s\n\n  redis:\n    image: redis:7-alpine\n    ports:\n      - \"6379:6379\"\n\n  postgres:\n    image: postgres:15-alpine\n    environment:\n      POSTGRES_PASSWORD: postgres\n      POSTGRES_DB: mydb\n    ports:\n      - \"5432:5432\"\n</code></pre>"},{"location":"frameworks/fastapi/#best-practices","title":"Best Practices","text":"<ol> <li>Separate Liveness and Readiness - Use different endpoints for Kubernetes probes</li> <li>Set Appropriate Timeouts - Keep health checks fast (&lt; 3 seconds total)</li> <li>Cache Results - For high-traffic apps, cache health check results for a few seconds</li> <li>Monitor Dependencies Only - Don't include business logic in health checks</li> <li>Use Async When Possible - FastAPI's async nature works well with health checks</li> <li>Document in OpenAPI - Add proper descriptions and examples for Swagger docs</li> </ol>"},{"location":"frameworks/fastapi/#troubleshooting","title":"Troubleshooting","text":""},{"location":"frameworks/fastapi/#health-endpoint-returns-404","title":"Health Endpoint Returns 404","text":"<p>Make sure you're using the correct decorator:</p> <pre><code># \u2705 Correct\nadapter = FastAPIAdapter(health)\napp.get(\"/health\")(adapter.endpoint)\n\n# \u274c Wrong\napp.get(\"/health\")(health.run)\n</code></pre>"},{"location":"frameworks/fastapi/#async-warning","title":"Async Warning","text":"<p>If you see async warnings, ensure you're calling the adapter correctly:</p> <pre><code># \u2705 Correct\n@app.get(\"/health\")\nasync def health_check():\n    return await adapter.endpoint()\n\n# \u2705 Also correct (FastAPI handles it)\napp.get(\"/health\")(adapter.endpoint)\n</code></pre>"},{"location":"frameworks/fastapi/#next-steps","title":"Next Steps","text":"<ul> <li>Flask Integration - Flask framework integration</li> <li>Django Integration - Django framework integration</li> <li>Custom Checks - Create custom health checks</li> </ul>"},{"location":"frameworks/flask/","title":"Flask Integration","text":"<p>Integrate healthcheckx with Flask applications for simple and effective health check endpoints.</p>"},{"location":"frameworks/flask/#installation","title":"Installation","text":"<pre><code>pip install flask healthcheckx[all]\n</code></pre>"},{"location":"frameworks/flask/#basic-integration","title":"Basic Integration","text":""},{"location":"frameworks/flask/#simple-example","title":"Simple Example","text":"<pre><code>from flask import Flask\nfrom healthcheckx import Health, flask_health_endpoint\n\napp = Flask(__name__)\nhealth = Health()\n\n# Register health checks\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://user:pass@localhost/db\")\n\n# Add health endpoint\napp.add_url_rule(\"/health\", \"health\", flask_health_endpoint(health))\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre> <p>Visit <code>http://localhost:5000/health</code> to see the health status.</p>"},{"location":"frameworks/flask/#response-format","title":"Response Format","text":""},{"location":"frameworks/flask/#healthy-response-http-200","title":"Healthy Response (HTTP 200)","text":"<pre><code>{\n  \"status\": \"healthy\",\n  \"checks\": [\n    {\n      \"name\": \"redis\",\n      \"status\": \"healthy\",\n      \"duration_ms\": 12.5\n    },\n    {\n      \"name\": \"postgresql\",\n      \"status\": \"healthy\",\n      \"duration_ms\": 45.3\n    }\n  ]\n}\n</code></pre>"},{"location":"frameworks/flask/#unhealthy-response-http-503","title":"Unhealthy Response (HTTP 503)","text":"<pre><code>{\n  \"status\": \"unhealthy\",\n  \"checks\": [\n    {\n      \"name\": \"redis\",\n      \"status\": \"unhealthy\",\n      \"message\": \"Connection refused\",\n      \"duration_ms\": 2001.2\n    },\n    {\n      \"name\": \"postgresql\",\n      \"status\": \"healthy\",\n      \"duration_ms\": 38.7\n    }\n  ]\n}\n</code></pre>"},{"location":"frameworks/flask/#complete-example","title":"Complete Example","text":"<pre><code>from flask import Flask, jsonify\nfrom healthcheckx import Health, flask_health_endpoint\nimport os\n\napp = Flask(__name__)\n\n# Initialize health checks\nhealth = Health()\n\n# Register checks from environment\nif redis_url := os.getenv(\"REDIS_URL\"):\n    health.redis_check(redis_url, name=\"redis-cache\")\n\nif db_url := os.getenv(\"DATABASE_URL\"):\n    health.postgresql_check(db_url, name=\"postgres-main\")\n\nif mongodb_url := os.getenv(\"MONGODB_URL\"):\n    health.mongodb_check(mongodb_url, name=\"mongo-data\")\n\nif rabbitmq_url := os.getenv(\"RABBITMQ_URL\"):\n    health.rabbitmq_check(rabbitmq_url, name=\"message-queue\")\n\n# Add health endpoint\napp.add_url_rule(\"/health\", \"health\", flask_health_endpoint(health))\n\n# Optional: Liveness endpoint (simple alive check)\n@app.route(\"/healthz\")\ndef liveness():\n    return jsonify({\"status\": \"ok\"}), 200\n\n# Optional: Separate readiness endpoint\n@app.route(\"/ready\")\ndef readiness():\n    return flask_health_endpoint(health)()\n\n# Main application endpoints\n@app.route(\"/\")\ndef index():\n    return jsonify({\"message\": \"Welcome to the API\"})\n\n@app.route(\"/api/data\")\ndef get_data():\n    # Your business logic here\n    return jsonify({\"data\": []})\n\nif __name__ == \"__main__\":\n    app.run(host=\"0.0.0.0\", port=5000, debug=True)\n</code></pre>"},{"location":"frameworks/flask/#blueprint-integration","title":"Blueprint Integration","text":"<p>Organize health checks in a blueprint:</p> <pre><code>from flask import Flask, Blueprint\nfrom healthcheckx import Health, flask_health_endpoint\n\n# Create monitoring blueprint\nmonitoring = Blueprint('monitoring', __name__, url_prefix='/monitoring')\n\n# Create health checks\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://localhost/db\")\n\n# Add health endpoint to blueprint\nmonitoring.add_url_rule(\"/health\", \"health\", flask_health_endpoint(health))\n\n@monitoring.route(\"/ping\")\ndef ping():\n    return {\"status\": \"pong\"}, 200\n\n# Create app and register blueprint\napp = Flask(__name__)\napp.register_blueprint(monitoring)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre> <p>Access health check at: <code>http://localhost:5000/monitoring/health</code></p>"},{"location":"frameworks/flask/#multiple-health-check-endpoints","title":"Multiple Health Check Endpoints","text":"<p>Create different health check configurations:</p> <pre><code>from flask import Flask\nfrom healthcheckx import Health, flask_health_endpoint\n\napp = Flask(__name__)\n\n# Critical services only (for liveness probe)\ncritical_health = Health()\ncritical_health.postgresql_check(\"postgresql://localhost/db\", name=\"database\")\n\n# All services (for readiness probe)\nfull_health = Health()\nfull_health.postgresql_check(\"postgresql://localhost/db\", name=\"database\") \\\n           .redis_check(\"redis://localhost:6379\", name=\"cache\") \\\n           .rabbitmq_check(\"amqp://localhost:5672\", name=\"queue\") \\\n           .mongodb_check(\"mongodb://localhost:27017\", name=\"documents\")\n\n# Liveness - only checks critical services\napp.add_url_rule(\"/healthz\", \"liveness\", flask_health_endpoint(critical_health))\n\n# Readiness - checks all services\napp.add_url_rule(\"/ready\", \"readiness\", flask_health_endpoint(full_health))\n\n# Detailed health - includes all checks\napp.add_url_rule(\"/health\", \"health\", flask_health_endpoint(full_health))\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>"},{"location":"frameworks/flask/#custom-response-format","title":"Custom Response Format","text":"<p>Customize the response structure:</p> <pre><code>from flask import Flask, jsonify\nfrom healthcheckx import Health, overall_status\nfrom datetime import datetime\n\napp = Flask(__name__)\nhealth = Health()\n\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://localhost/db\")\n\n@app.route(\"/health\")\ndef health_check():\n    results = health.run()\n    status = overall_status(results)\n\n    # Custom response format\n    response_data = {\n        \"application\": \"my-flask-api\",\n        \"version\": \"1.0.0\",\n        \"status\": status.value,\n        \"timestamp\": datetime.utcnow().isoformat() + \"Z\",\n        \"services\": [\n            {\n                \"name\": r.name,\n                \"healthy\": r.status == \"healthy\",\n                \"responseTime\": f\"{r.duration_ms:.2f}ms\",\n                \"error\": r.message if r.message else None\n            }\n            for r in results\n        ]\n    }\n\n    status_code = 200 if status.value != \"unhealthy\" else 503\n    return jsonify(response_data), status_code\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>"},{"location":"frameworks/flask/#application-factory-pattern","title":"Application Factory Pattern","text":"<p>Use Flask application factory with health checks:</p> <pre><code>from flask import Flask\nfrom healthcheckx import Health, flask_health_endpoint\nimport os\n\ndef create_health():\n    \"\"\"Create and configure health checks\"\"\"\n    health = Health()\n\n    # Add checks based on configuration\n    if redis_url := os.getenv(\"REDIS_URL\"):\n        health.redis_check(redis_url, name=\"redis\")\n\n    if db_url := os.getenv(\"DATABASE_URL\"):\n        health.postgresql_check(db_url, name=\"database\")\n\n    return health\n\ndef create_app(config=None):\n    \"\"\"Application factory\"\"\"\n    app = Flask(__name__)\n\n    # Load configuration\n    if config:\n        app.config.update(config)\n\n    # Initialize health checks\n    health = create_health()\n\n    # Register health endpoint\n    app.add_url_rule(\"/health\", \"health\", flask_health_endpoint(health))\n\n    # Register blueprints\n    from .api import api_bp\n    app.register_blueprint(api_bp)\n\n    return app\n\n# Usage\nif __name__ == \"__main__\":\n    app = create_app()\n    app.run(debug=True)\n</code></pre>"},{"location":"frameworks/flask/#flask-extensions-integration","title":"Flask Extensions Integration","text":"<p>Integrate with Flask extensions:</p> <pre><code>from flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_redis import FlaskRedis\nfrom healthcheckx import Health, flask_health_endpoint\n\napp = Flask(__name__)\napp.config['SQLALCHEMY_DATABASE_URI'] = 'postgresql://localhost/mydb'\napp.config['REDIS_URL'] = 'redis://localhost:6379'\n\n# Initialize extensions\ndb = SQLAlchemy(app)\nredis_client = FlaskRedis(app)\n\n# Create health checks using extension connections\nhealth = Health()\nhealth.postgresql_check(app.config['SQLALCHEMY_DATABASE_URI'], name=\"database\") \\\n      .redis_check(app.config['REDIS_URL'], name=\"cache\")\n\n# Add health endpoint\napp.add_url_rule(\"/health\", \"health\", flask_health_endpoint(health))\n\n@app.route(\"/\")\ndef index():\n    # Use extensions\n    users = db.session.query(User).all()\n    redis_client.set('key', 'value')\n    return {\"users\": len(users)}\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>"},{"location":"frameworks/flask/#custom-health-checks","title":"Custom Health Checks","text":"<p>Add custom health checks:</p> <pre><code>from flask import Flask\nfrom healthcheckx import Health, CheckResult, HealthStatus, flask_health_endpoint\nimport requests\n\napp = Flask(__name__)\nhealth = Health()\n\n# Built-in checks\nhealth.redis_check(\"redis://localhost:6379\")\n\n# Custom check for external API\ndef external_api_check() -&gt; CheckResult:\n    try:\n        response = requests.get(\n            \"https://api.example.com/status\",\n            timeout=2\n        )\n        if response.status_code == 200:\n            return CheckResult(\"external-api\", HealthStatus.healthy)\n        else:\n            return CheckResult(\n                \"external-api\",\n                HealthStatus.unhealthy,\n                f\"HTTP {response.status_code}\"\n            )\n    except requests.RequestException as e:\n        return CheckResult(\"external-api\", HealthStatus.unhealthy, str(e))\n\n# Custom check for disk space\ndef disk_space_check() -&gt; CheckResult:\n    import shutil\n    try:\n        total, used, free = shutil.disk_usage(\"/\")\n        percent_used = (used / total) * 100\n\n        if percent_used &gt; 90:\n            return CheckResult(\n                \"disk-space\",\n                HealthStatus.unhealthy,\n                f\"Disk usage at {percent_used:.1f}%\"\n            )\n        elif percent_used &gt; 75:\n            return CheckResult(\n                \"disk-space\",\n                HealthStatus.degraded,\n                f\"Disk usage at {percent_used:.1f}%\"\n            )\n        else:\n            return CheckResult(\"disk-space\", HealthStatus.healthy)\n    except Exception as e:\n        return CheckResult(\"disk-space\", HealthStatus.unhealthy, str(e))\n\n# Register custom checks\nhealth.register(external_api_check)\nhealth.register(disk_space_check)\n\napp.add_url_rule(\"/health\", \"health\", flask_health_endpoint(health))\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>"},{"location":"frameworks/flask/#kubernetes-integration","title":"Kubernetes Integration","text":""},{"location":"frameworks/flask/#flask-app-with-probes","title":"Flask App with Probes","text":"<pre><code>from flask import Flask, jsonify\nfrom healthcheckx import Health, flask_health_endpoint\n\napp = Flask(__name__)\nhealth = Health()\n\nhealth.postgresql_check(\"postgresql://postgres:5432/db\") \\\n      .redis_check(\"redis://redis:6379\")\n\n# Liveness probe - is the app alive?\n@app.route(\"/healthz\")\ndef liveness():\n    return jsonify({\"status\": \"ok\"}), 200\n\n# Readiness probe - is the app ready to serve traffic?\napp.add_url_rule(\"/ready\", \"readiness\", flask_health_endpoint(health))\n\n# Startup probe - has the app finished starting?\napp.add_url_rule(\"/startup\", \"startup\", flask_health_endpoint(health))\n\n@app.route(\"/\")\ndef index():\n    return jsonify({\"message\": \"Hello World\"})\n\nif __name__ == \"__main__\":\n    app.run(host=\"0.0.0.0\", port=5000)\n</code></pre>"},{"location":"frameworks/flask/#kubernetes-deployment","title":"Kubernetes Deployment","text":"<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: flask-api\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: flask-api\n  template:\n    metadata:\n      labels:\n        app: flask-api\n    spec:\n      containers:\n      - name: api\n        image: flask-api:latest\n        ports:\n        - containerPort: 5000\n\n        env:\n        - name: REDIS_URL\n          value: \"redis://redis:6379\"\n        - name: DATABASE_URL\n          value: \"postgresql://postgres:5432/mydb\"\n\n        # Liveness probe - restart if fails\n        livenessProbe:\n          httpGet:\n            path: /healthz\n            port: 5000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n          timeoutSeconds: 5\n          failureThreshold: 3\n\n        # Readiness probe - remove from service if fails\n        readinessProbe:\n          httpGet:\n            path: /ready\n            port: 5000\n          initialDelaySeconds: 10\n          periodSeconds: 5\n          timeoutSeconds: 3\n          failureThreshold: 3\n\n        # Startup probe - wait for app to start\n        startupProbe:\n          httpGet:\n            path: /startup\n            port: 5000\n          initialDelaySeconds: 0\n          periodSeconds: 5\n          timeoutSeconds: 3\n          failureThreshold: 30\n</code></pre>"},{"location":"frameworks/flask/#docker-integration","title":"Docker Integration","text":""},{"location":"frameworks/flask/#dockerfile","title":"Dockerfile","text":"<pre><code>FROM python:3.11-slim\n\nWORKDIR /app\n\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\nCOPY . .\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD python -c \"import requests; requests.get('http://localhost:5000/health').raise_for_status()\"\n\nEXPOSE 5000\n\nCMD [\"gunicorn\", \"--bind\", \"0.0.0.0:5000\", \"app:app\"]\n</code></pre>"},{"location":"frameworks/flask/#docker-composeyml","title":"docker-compose.yml","text":"<pre><code>version: '3.8'\n\nservices:\n  flask-api:\n    build: .\n    ports:\n      - \"5000:5000\"\n    environment:\n      - REDIS_URL=redis://redis:6379\n      - DATABASE_URL=postgresql://postgres:postgres@postgres:5432/mydb\n    depends_on:\n      - redis\n      - postgres\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:5000/health\"]\n      interval: 30s\n      timeout: 3s\n      retries: 3\n      start_period: 10s\n\n  redis:\n    image: redis:7-alpine\n    ports:\n      - \"6379:6379\"\n\n  postgres:\n    image: postgres:15-alpine\n    environment:\n      POSTGRES_PASSWORD: postgres\n      POSTGRES_DB: mydb\n    ports:\n      - \"5432:5432\"\n</code></pre>"},{"location":"frameworks/flask/#production-deployment-with-gunicorn","title":"Production Deployment with Gunicorn","text":"<pre><code># wsgi.py\nfrom app import create_app\n\napp = create_app()\n\nif __name__ == \"__main__\":\n    app.run()\n</code></pre> <p>Run with Gunicorn:</p> <pre><code>gunicorn --workers 4 --bind 0.0.0.0:5000 wsgi:app\n</code></pre> <p>Or with configuration file:</p> <pre><code># gunicorn.conf.py\nbind = \"0.0.0.0:5000\"\nworkers = 4\nworker_class = \"sync\"\ntimeout = 30\nkeepalive = 5\n\n# Health check\ndef pre_request(worker, req):\n    if req.path == \"/health\":\n        worker.log.debug(\"Health check request\")\n</code></pre>"},{"location":"frameworks/flask/#error-handling","title":"Error Handling","text":"<p>Handle errors gracefully:</p> <pre><code>from flask import Flask, jsonify\nfrom healthcheckx import Health, flask_health_endpoint\n\napp = Flask(__name__)\nhealth = Health()\n\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://localhost/db\")\n\napp.add_url_rule(\"/health\", \"health\", flask_health_endpoint(health))\n\n# Global error handler\n@app.errorhandler(Exception)\ndef handle_error(error):\n    app.logger.error(f\"Error: {error}\")\n    return jsonify({\n        \"status\": \"error\",\n        \"message\": str(error)\n    }), 500\n\n# Health check shouldn't trigger error handler\n@app.errorhandler(503)\ndef service_unavailable(error):\n    # Let health check return 503 without triggering error handler\n    return error\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>"},{"location":"frameworks/flask/#logging-integration","title":"Logging Integration","text":"<p>Add logging to health checks:</p> <pre><code>from flask import Flask\nfrom healthcheckx import Health, flask_health_endpoint\nimport logging\n\napp = Flask(__name__)\n\n# Configure logging\nlogging.basicConfig(\n    level=logging.INFO,\n    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n)\nlogger = logging.getLogger(__name__)\n\nhealth = Health()\nhealth.redis_check(\"redis://localhost:6379\") \\\n      .postgresql_check(\"postgresql://localhost/db\")\n\n# Wrapper to log health checks\ndef logged_health_endpoint():\n    logger.info(\"Health check initiated\")\n    health_func = flask_health_endpoint(health)\n    response = health_func()\n    logger.info(f\"Health check completed: {response[1]}\")\n    return response\n\napp.add_url_rule(\"/health\", \"health\", logged_health_endpoint)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>"},{"location":"frameworks/flask/#testing","title":"Testing","text":"<p>Test health check endpoints:</p> <pre><code># test_health.py\nimport pytest\nfrom app import create_app\n\n@pytest.fixture\ndef client():\n    app = create_app({\"TESTING\": True})\n    with app.test_client() as client:\n        yield client\n\ndef test_health_endpoint_exists(client):\n    \"\"\"Test that health endpoint exists\"\"\"\n    response = client.get(\"/health\")\n    assert response.status_code in [200, 503]\n\ndef test_health_response_format(client):\n    \"\"\"Test health response has correct format\"\"\"\n    response = client.get(\"/health\")\n    data = response.get_json()\n\n    assert \"status\" in data\n    assert \"checks\" in data\n    assert isinstance(data[\"checks\"], list)\n\ndef test_liveness_probe(client):\n    \"\"\"Test liveness probe always returns 200\"\"\"\n    response = client.get(\"/healthz\")\n    assert response.status_code == 200\n\ndef test_health_with_mocked_services(client, mocker):\n    \"\"\"Test health with mocked services\"\"\"\n    # Mock Redis to be healthy\n    mocker.patch('redis.Redis.ping', return_value=True)\n\n    response = client.get(\"/health\")\n    data = response.get_json()\n\n    assert data[\"status\"] == \"healthy\"\n</code></pre>"},{"location":"frameworks/flask/#best-practices","title":"Best Practices","text":"<ol> <li>Keep It Simple - Health checks should be fast and straightforward</li> <li>Separate Concerns - Use different endpoints for liveness and readiness</li> <li>Handle Timeouts - Set appropriate timeouts for all checks (1-3 seconds)</li> <li>Log Sparingly - Only log failures or important events</li> <li>Use Blueprints - Organize health checks in monitoring blueprint</li> <li>Production Ready - Deploy with Gunicorn or uWSGI for production</li> </ol>"},{"location":"frameworks/flask/#troubleshooting","title":"Troubleshooting","text":""},{"location":"frameworks/flask/#health-endpoint-returns-404","title":"Health Endpoint Returns 404","text":"<p>Ensure you're using the helper function correctly:</p> <pre><code># \u2705 Correct\napp.add_url_rule(\"/health\", \"health\", flask_health_endpoint(health))\n\n# \u274c Wrong\napp.add_url_rule(\"/health\", \"health\", health.run)\n</code></pre>"},{"location":"frameworks/flask/#slow-health-checks","title":"Slow Health Checks","text":"<p>If health checks are slow, add timeouts:</p> <pre><code>health = Health()\n# Default timeout is 2 seconds, adjust if needed\nhealth.redis_check(\"redis://localhost:6379\")  # Uses 2s timeout\n</code></pre>"},{"location":"frameworks/flask/#import-errors","title":"Import Errors","text":"<p>Make sure healthcheckx is installed with Flask support:</p> <pre><code>pip install flask healthcheckx[all]\n</code></pre>"},{"location":"frameworks/flask/#next-steps","title":"Next Steps","text":"<ul> <li>FastAPI Integration - FastAPI framework integration</li> <li>Django Integration - Django framework integration  </li> <li>Custom Checks - Create custom health checks</li> </ul>"}]}